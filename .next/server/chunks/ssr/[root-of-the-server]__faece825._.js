module.exports=[88947,(a,b,c)=>{b.exports=a.x("stream",()=>require("stream"))},76450,a=>{"use strict";a.s(["default",()=>e]);var b=a.i(87924),c=a.i(72131),d=a.i(10849);function e(){let a=(0,d.createClient)(),[e,f]=(0,c.useState)("Processingâ€¦"),[g,h]=(0,c.useState)(null);return(0,c.useEffect)(()=>{(async()=>{let b=new URL(window.location.href),{data:c}=await a.auth.getSession();if(c.session)f("Session already active.");else{let{access_token:c,refresh_token:d,error:e}=function(a){let b=new URLSearchParams(a.replace(/^#/,""));return{access_token:b.get("access_token"),refresh_token:b.get("refresh_token"),error:b.get("error_description")||b.get("error")}}(b.hash);if(e)f(`Auth error: ${e}`);else if(c&&d){let{error:b}=await a.auth.setSession({access_token:c,refresh_token:d});b?f(`Auth error: ${b.message}`):f("Signed in via implicit flow.")}else if(b.searchParams.get("code")){let{error:c}=await a.auth.exchangeCodeForSession(b.toString());c?f(`Auth exchange warning: ${c.message}`):f("Signed in via PKCE flow.")}else f("No auth params found.")}let{data:d}=await a.auth.getSession();if(d.session){let{data:b,error:c}=await a.rpc("app_role");c||h(b??null),f(a=>a.startsWith("Auth error")?a:"Done.");let d=`${location.origin}/auth/callback`;window.history.replaceState({},"",d)}})()},[a]),(0,b.jsxs)("main",{style:{maxWidth:480,margin:"48px auto",display:"grid",gap:12},children:[(0,b.jsx)("h1",{children:"Callback"}),(0,b.jsx)("div",{children:e}),(0,b.jsxs)("div",{children:["Your role: ",(0,b.jsx)("b",{children:g??"anon"})]}),(0,b.jsx)("a",{href:"/canvas",children:"Go home"})]})}},59789,a=>{a.v(a=>Promise.resolve().then(()=>a(23952)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__faece825._.js.map