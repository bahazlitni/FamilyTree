module.exports=[88947,(a,b,c)=>{b.exports=a.x("stream",()=>require("stream"))},17020,a=>{a.v({button:"page-module__S1Tu7W__button",card:"page-module__S1Tu7W__card",field:"page-module__S1Tu7W__field",header:"page-module__S1Tu7W__header",help:"page-module__S1Tu7W__help",input:"page-module__S1Tu7W__input",inputRow:"page-module__S1Tu7W__inputRow",isError:"page-module__S1Tu7W__isError",isOk:"page-module__S1Tu7W__isOk",label:"page-module__S1Tu7W__label",status:"page-module__S1Tu7W__status",subtitle:"page-module__S1Tu7W__subtitle",title:"page-module__S1Tu7W__title",wrap:"page-module__S1Tu7W__wrap"})},8684,a=>{"use strict";a.s(["default",()=>h]);var b=a.i(87924),c=a.i(72131),d=a.i(10849),e=a.i(17020);let f="recent_emails";function g(){try{let a=localStorage.getItem(f);if(!a)return[];let b=JSON.parse(a);return Array.isArray(b)?b.filter(a=>"string"==typeof a):[]}catch{return[]}}function h(){let a=(0,d.createClient)(),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)([]);(0,c.useEffect)(()=>{o(g())},[]);let p=(0,c.useMemo)(()=>{let a=h.trim().toLowerCase();return!!a&&a.includes("@")&&a.includes(".")},[h]);async function q(){let b=h.trim().toLowerCase();if(!b)return;m(!0),k("Sending...");let{error:c}=await a.auth.signInWithOtp({email:b,options:{emailRedirectTo:`${location.origin}/auth/callback`,shouldCreateUser:!0}});if(c)k(`Error: ${c.message}`);else{k("Check your inbox for a magic link.");try{let a=g(),c=[b,...a.filter(a=>a!==b)].slice(0,5);localStorage.setItem(f,JSON.stringify(c))}catch{}o(g())}m(!1)}return(0,b.jsx)("main",{className:e.default.wrap,children:(0,b.jsxs)("section",{className:e.default.card,"aria-labelledby":"signin-title",children:[(0,b.jsxs)("header",{className:e.default.header,children:[(0,b.jsx)("h1",{id:"signin-title",className:e.default.title,children:"Sign in"}),(0,b.jsx)("p",{className:e.default.subtitle,children:"We’ll email you a magic link to continue."})]}),(0,b.jsxs)("div",{className:e.default.field,children:[(0,b.jsx)("label",{htmlFor:"email",className:e.default.label,children:"Email"}),(0,b.jsxs)("div",{className:e.default.inputRow,children:[(0,b.jsx)("input",{id:"email",className:e.default.input,type:"email",inputMode:"email",autoCapitalize:"none",autoCorrect:"off",spellCheck:!1,autoComplete:"email",placeholder:"you@example.com",value:h,onChange:a=>i(a.target.value),list:"recent-emails","aria-describedby":"email-help"}),(0,b.jsx)("datalist",{id:"recent-emails",children:n.map(a=>(0,b.jsx)("option",{value:a},a))}),(0,b.jsx)("button",{className:e.default.button,onClick:q,disabled:!p||l,children:l?"Sending…":"Send magic link"})]})]}),!!j&&(0,b.jsx)("div",{className:j.startsWith("Error")?`${e.default.status} ${e.default.isError}`:`${e.default.status} ${e.default.isOk}`,role:"status","aria-live":"polite",children:j})]})})}},59789,a=>{a.v(a=>Promise.resolve().then(()=>a(23952)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__9df8e55f._.js.map