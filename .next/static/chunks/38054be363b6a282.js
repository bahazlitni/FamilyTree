(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6085,e=>{"use strict";e.s(["Headers",()=>i,"Request",()=>s,"Response",()=>u,"default",()=>l,"fetch",()=>a]);var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:e.g;let a=t.fetch,l=t.fetch.bind(t),i=t.Headers,s=t.Request,u=t.Response},86567,e=>{e.v({button:"page-module__S1Tu7W__button",card:"page-module__S1Tu7W__card",field:"page-module__S1Tu7W__field",header:"page-module__S1Tu7W__header",help:"page-module__S1Tu7W__help",input:"page-module__S1Tu7W__input",inputRow:"page-module__S1Tu7W__inputRow",isError:"page-module__S1Tu7W__isError",isOk:"page-module__S1Tu7W__isOk",label:"page-module__S1Tu7W__label",status:"page-module__S1Tu7W__status",subtitle:"page-module__S1Tu7W__subtitle",title:"page-module__S1Tu7W__title",wrap:"page-module__S1Tu7W__wrap"})},49138,e=>{"use strict";e.s(["default",()=>r]);var t=e.i(43476),a=e.i(71645),l=e.i(7471),i=e.i(86567);let s="recent_emails";function u(){try{let e=localStorage.getItem(s);if(!e)return[];let t=JSON.parse(e);return Array.isArray(t)?t.filter(e=>"string"==typeof e):[]}catch(e){return[]}}function r(){let e=(0,l.createClient)(),[r,n]=(0,a.useState)(""),[o,d]=(0,a.useState)(""),[c,_]=(0,a.useState)(!1),[m,p]=(0,a.useState)([]);(0,a.useEffect)(()=>{p(u())},[]);let f=(0,a.useMemo)(()=>{let e=r.trim().toLowerCase();return!!e&&e.includes("@")&&e.includes(".")},[r]);async function h(){let t=r.trim().toLowerCase();if(!t)return;_(!0),d("Sending...");let{error:a}=await e.auth.signInWithOtp({email:t,options:{emailRedirectTo:"".concat(location.origin,"/auth/callback"),shouldCreateUser:!0}});if(a)d("Error: ".concat(a.message));else{d("Check your inbox for a magic link.");try{let e=u(),a=[t,...e.filter(e=>e!==t)].slice(0,5);localStorage.setItem(s,JSON.stringify(a))}catch(e){}p(u())}_(!1)}return(0,t.jsx)("main",{className:i.default.wrap,children:(0,t.jsxs)("section",{className:i.default.card,"aria-labelledby":"signin-title",children:[(0,t.jsxs)("header",{className:i.default.header,children:[(0,t.jsx)("h1",{id:"signin-title",className:i.default.title,children:"Sign in"}),(0,t.jsx)("p",{className:i.default.subtitle,children:"We’ll email you a magic link to continue."})]}),(0,t.jsxs)("div",{className:i.default.field,children:[(0,t.jsx)("label",{htmlFor:"email",className:i.default.label,children:"Email"}),(0,t.jsxs)("div",{className:i.default.inputRow,children:[(0,t.jsx)("input",{id:"email",className:i.default.input,type:"email",inputMode:"email",autoCapitalize:"none",autoCorrect:"off",spellCheck:!1,autoComplete:"email",placeholder:"you@example.com",value:r,onChange:e=>n(e.target.value),list:"recent-emails","aria-describedby":"email-help"}),(0,t.jsx)("datalist",{id:"recent-emails",children:m.map(e=>(0,t.jsx)("option",{value:e},e))}),(0,t.jsx)("button",{className:i.default.button,onClick:h,disabled:!f||c,children:c?"Sending…":"Send magic link"})]})]}),!!o&&(0,t.jsx)("div",{className:o.startsWith("Error")?"".concat(i.default.status," ").concat(i.default.isError):"".concat(i.default.status," ").concat(i.default.isOk),role:"status","aria-live":"polite",children:o})]})})}},11737,e=>{e.v(e=>Promise.resolve().then(()=>e(6085)))}]);