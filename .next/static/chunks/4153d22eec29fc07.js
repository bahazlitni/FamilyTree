(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55838,(e,t,n)=>{"use strict";var i=e.r(71645),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=i.useState,a=i.useEffect,s=i.useLayoutEffect,l=i.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!r(e,n)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),i=o({inst:{value:n,getSnapshot:t}}),r=i[0].inst,c=i[1];return s(function(){r.value=n,r.getSnapshot=t,u(r)&&c({inst:r})},[e,n,t]),a(function(){return u(r)&&c({inst:r}),e(function(){u(r)&&c({inst:r})})},[e]),l(n),n};n.useSyncExternalStore=void 0!==i.useSyncExternalStore?i.useSyncExternalStore:c},2239,(e,t,n)=>{"use strict";t.exports=e.r(55838)},52822,(e,t,n)=>{"use strict";var i=e.r(71645),r=e.r(2239),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=r.useSyncExternalStore,s=i.useRef,l=i.useEffect,u=i.useMemo,c=i.useDebugValue;n.useSyncExternalStoreWithSelector=function(e,t,n,i,r){var d=s(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;var f=a(e,(d=u(function(){function e(e){if(!l){if(l=!0,a=e,e=i(e),void 0!==r&&h.hasValue){var t=h.value;if(r(t,e))return s=t}return s=e}if(t=s,o(a,e))return t;var n=i(e);return void 0!==r&&r(t,n)?(a=e,t):(a=e,s=n)}var a,s,l=!1,u=void 0===n?null:n;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]},[t,n,i,r]))[0],d[1]);return l(function(){h.hasValue=!0,h.value=f},[f]),c(f),f}},30224,(e,t,n)=>{"use strict";t.exports=e.r(52822)},18566,(e,t,n)=>{t.exports=e.r(76562)},98183,(e,t,n)=>{"use strict";function i(e){let t={};for(let[n,i]of e.entries()){let e=t[n];void 0===e?t[n]=i:Array.isArray(e)?e.push(i):t[n]=[e,i]}return t}function r(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function o(e){let t=new URLSearchParams;for(let[n,i]of Object.entries(e))if(Array.isArray(i))for(let e of i)t.append(n,r(e));else t.set(n,r(i));return t}function a(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(let t of n){for(let n of t.keys())e.delete(n);for(let[n,i]of t.entries())e.append(n,i)}return e}Object.defineProperty(n,"__esModule",{value:!0}),!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(n,{assign:function(){return a},searchParamsToUrlQuery:function(){return i},urlQueryToSearchParams:function(){return o}})},95057,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(n,{formatUrl:function(){return o},formatWithValidation:function(){return s},urlObjectKeys:function(){return a}});let i=e.r(90809)._(e.r(98183)),r=/https?|ftp|gopher|file/;function o(e){let{auth:t,hostname:n}=e,o=e.protocol||"",a=e.pathname||"",s=e.hash||"",l=e.query||"",u=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?u=t+e.host:n&&(u=t+(~n.indexOf(":")?"["+n+"]":n),e.port&&(u+=":"+e.port)),l&&"object"==typeof l&&(l=String(i.urlQueryToSearchParams(l)));let c=e.search||l&&"?"+l||"";return o&&!o.endsWith(":")&&(o+=":"),e.slashes||(!o||r.test(o))&&!1!==u?(u="//"+(u||""),a&&"/"!==a[0]&&(a="/"+a)):u||(u=""),s&&"#"!==s[0]&&(s="#"+s),c&&"?"!==c[0]&&(c="?"+c),""+o+u+(a=a.replace(/[?#]/g,encodeURIComponent))+(c=c.replace("#","%23"))+s}let a=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function s(e){return o(e)}},18581,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"useMergedRef",{enumerable:!0,get:function(){return r}});let i=e.r(71645);function r(e,t){let n=(0,i.useRef)(null),r=(0,i.useRef)(null);return(0,i.useCallback)(i=>{if(null===i){let e=n.current;e&&(n.current=null,e());let t=r.current;t&&(r.current=null,t())}else e&&(n.current=o(e,i)),t&&(r.current=o(t,i))},[e,t])}function o(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let n=e(t);return"function"==typeof n?n:()=>e(null)}}("function"==typeof n.default||"object"==typeof n.default&&null!==n.default)&&void 0===n.default.__esModule&&(Object.defineProperty(n.default,"__esModule",{value:!0}),Object.assign(n.default,n),t.exports=n.default)},18967,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(n,{DecodeError:function(){return m},MiddlewareNotFoundError:function(){return x},MissingStaticPage:function(){return y},NormalizeError:function(){return g},PageNotFoundError:function(){return v},SP:function(){return f},ST:function(){return p},WEB_VITALS:function(){return i},execOnce:function(){return r},getDisplayName:function(){return u},getLocationOrigin:function(){return s},getURL:function(){return l},isAbsoluteUrl:function(){return a},isResSent:function(){return c},loadGetInitialProps:function(){return h},normalizeRepeatedSlashes:function(){return d},stringifyError:function(){return b}});let i=["CLS","FCP","FID","INP","LCP","TTFB"];function r(e){let t,n=!1;return function(){for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];return n||(n=!0,t=e(...r)),t}}let o=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,a=e=>o.test(e);function s(){let{protocol:e,hostname:t,port:n}=window.location;return e+"//"+t+(n?":"+n:"")}function l(){let{href:e}=window.location,t=s();return e.substring(t.length)}function u(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function c(e){return e.finished||e.headersSent}function d(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?"?"+t.slice(1).join("?"):"")}async function h(e,t){let n=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await h(t.Component,t.ctx)}:{};let i=await e.getInitialProps(t);if(n&&c(n))return i;if(!i)throw Object.defineProperty(Error('"'+u(e)+'.getInitialProps()" should resolve to an object. But found "'+i+'" instead.'),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return i}let f="undefined"!=typeof performance,p=f&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class m extends Error{}class g extends Error{}class v extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message="Cannot find module for page: "+e}}class y extends Error{constructor(e,t){super(),this.message="Failed to load static file for page: "+e+" "+t}}class x extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function b(e){return JSON.stringify({message:e.message,stack:e.stack})}},73668,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"isLocalURL",{enumerable:!0,get:function(){return o}});let i=e.r(18967),r=e.r(52817);function o(e){if(!(0,i.isAbsoluteUrl)(e))return!0;try{let t=(0,i.getLocationOrigin)(),n=new URL(e,t);return n.origin===t&&(0,r.hasBasePath)(n.pathname)}catch(e){return!1}}},84508,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"errorOnce",{enumerable:!0,get:function(){return i}});let i=e=>{}},22016,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(n,{default:function(){return g},useLinkStatus:function(){return y}});let i=e.r(90809),r=e.r(43476),o=i._(e.r(71645)),a=e.r(95057),s=e.r(8372),l=e.r(18581),u=e.r(18967),c=e.r(5550);e.r(33525);let d=e.r(91949),h=e.r(73668),f=e.r(99781);e.r(84508);let p=e.r(65165);function m(e){return"string"==typeof e?e:(0,a.formatUrl)(e)}function g(e){var t;let n,i,a,[g,y]=(0,o.useOptimistic)(d.IDLE_LINK_STATUS),x=(0,o.useRef)(null),{href:b,as:w,children:S,prefetch:E=null,passHref:_,replace:M,shallow:P,scroll:A,onClick:C,onMouseEnter:T,onTouchStart:k,legacyBehavior:N=!1,onNavigate:R,ref:D,unstable_dynamicOnHover:j,...O}=e;n=S,N&&("string"==typeof n||"number"==typeof n)&&(n=(0,r.jsx)("a",{children:n}));let L=o.default.useContext(s.AppRouterContext),V=!1!==E,I=!1!==E?null===(t=E)||"auto"===t?p.FetchStrategy.PPR:p.FetchStrategy.Full:p.FetchStrategy.PPR,{href:B,as:F}=o.default.useMemo(()=>{let e=m(b);return{href:e,as:w?m(w):e}},[b,w]);N&&(i=o.default.Children.only(n));let z=N?i&&"object"==typeof i&&i.ref:D,U=o.default.useCallback(e=>(null!==L&&(x.current=(0,d.mountLinkInstance)(e,B,L,I,V,y)),()=>{x.current&&((0,d.unmountLinkForCurrentNavigation)(x.current),x.current=null),(0,d.unmountPrefetchableInstance)(e)}),[V,B,L,I,y]),H={ref:(0,l.useMergedRef)(U,z),onClick(e){N||"function"!=typeof C||C(e),N&&i.props&&"function"==typeof i.props.onClick&&i.props.onClick(e),L&&(e.defaultPrevented||function(e,t,n,i,r,a,s){let{nodeName:l}=e.currentTarget;if(!("A"===l.toUpperCase()&&function(e){let t=e.currentTarget.getAttribute("target");return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)||e.currentTarget.hasAttribute("download"))){if(!(0,h.isLocalURL)(t)){r&&(e.preventDefault(),location.replace(t));return}if(e.preventDefault(),s){let e=!1;if(s({preventDefault:()=>{e=!0}}),e)return}o.default.startTransition(()=>{(0,f.dispatchNavigateAction)(n||t,r?"replace":"push",null==a||a,i.current)})}}(e,B,F,x,M,A,R))},onMouseEnter(e){N||"function"!=typeof T||T(e),N&&i.props&&"function"==typeof i.props.onMouseEnter&&i.props.onMouseEnter(e),L&&V&&(0,d.onNavigationIntent)(e.currentTarget,!0===j)},onTouchStart:function(e){N||"function"!=typeof k||k(e),N&&i.props&&"function"==typeof i.props.onTouchStart&&i.props.onTouchStart(e),L&&V&&(0,d.onNavigationIntent)(e.currentTarget,!0===j)}};return(0,u.isAbsoluteUrl)(F)?H.href=F:N&&!_&&("a"!==i.type||"href"in i.props)||(H.href=(0,c.addBasePath)(F)),a=N?o.default.cloneElement(i,H):(0,r.jsx)("a",{...O,...H,children:n}),(0,r.jsx)(v.Provider,{value:g,children:a})}let v=(0,o.createContext)(d.IDLE_LINK_STATUS),y=()=>(0,o.useContext)(v);("function"==typeof n.default||"object"==typeof n.default&&null!==n.default)&&void 0===n.default.__esModule&&(Object.defineProperty(n.default,"__esModule",{value:!0}),Object.assign(n.default,n),t.exports=n.default)},92104,e=>{e.v({drop:"styles-module__DTcM5W__drop",hl:"styles-module__DTcM5W__hl",input:"styles-module__DTcM5W__input",inputWrap:"styles-module__DTcM5W__inputWrap",isActive:"styles-module__DTcM5W__isActive",option:"styles-module__DTcM5W__option",searchBtn:"styles-module__DTcM5W__searchBtn"})},13993,e=>{e.v({badge:"styles-module__xKK1hq__badge",childAvatar:"styles-module__xKK1hq__childAvatar",childList:"styles-module__xKK1hq__childList",childMeta:"styles-module__xKK1hq__childMeta",childName:"styles-module__xKK1hq__childName",childRow:"styles-module__xKK1hq__childRow",chip:"styles-module__xKK1hq__chip",chipAvatar:"styles-module__xKK1hq__chipAvatar",chipMeta:"styles-module__xKK1hq__chipMeta",chipText:"styles-module__xKK1hq__chipText",chips:"styles-module__xKK1hq__chips",close:"styles-module__xKK1hq__close",content:"styles-module__xKK1hq__content",count:"styles-module__xKK1hq__count",dot:"styles-module__xKK1hq__dot",header:"styles-module__xKK1hq__header",kv:"styles-module__xKK1hq__kv",label:"styles-module__xKK1hq__label",panel:"styles-module__xKK1hq__panel",section:"styles-module__xKK1hq__section",sectionHeader:"styles-module__xKK1hq__sectionHeader",sectionTitle:"styles-module__xKK1hq__sectionTitle",subTitle:"styles-module__xKK1hq__subTitle",title:"styles-module__xKK1hq__title",titleBlock:"styles-module__xKK1hq__titleBlock",value:"styles-module__xKK1hq__value"})},3614,e=>{"use strict";let t;e.s(["default",()=>dg],3614);var n,i,r,o,a,s,l,u,c=e.i(43476),d=e.i(71645);function h(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n=0,i;n<e.length;n++)""!==(i=h(e[n]))&&(t+=(t&&" ")+i);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}e.i(47167);var f=e.i(30224);let p={get url(){return`file://${e.P("node_modules/zustand/esm/vanilla.mjs")}`}},m=e=>{let t,n=new Set,i=(e,i)=>{let r="function"==typeof e?e(t):e;if(!Object.is(r,t)){let e=t;t=(null!=i?i:"object"!=typeof r||null===r)?r:Object.assign({},t,r),n.forEach(n=>n(t,e))}},r=()=>t,o={setState:i,getState:r,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{(p.env?p.env.MODE:void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},a=t=e(i,r,o);return o},{useDebugValue:g}=d.default,{useSyncExternalStoreWithSelector:v}=f.default,y=e=>e;function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y,n=arguments.length>2?arguments[2]:void 0,i=v(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return g(i),i}let b=(e,t)=>{let n=(e=>e?m(e):m)(e),i=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return x(n,e,i)};return Object.assign(i,n),i};function w(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[n,i]of e)if(!Object.is(i,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}let n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let i of n)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1;return!0}var S={value:()=>{}};function E(){for(var e,t=0,n=arguments.length,i={};t<n;++t){if(!(e=arguments[t]+"")||e in i||/[\s.]/.test(e))throw Error("illegal type: "+e);i[e]=[]}return new _(i)}function _(e){this._=e}function M(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=S,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=n&&e.push({name:t,value:n}),e}function P(){}function A(e){return null==e?P:function(){return this.querySelector(e)}}function C(){return[]}function T(e){return null==e?C:function(){return this.querySelectorAll(e)}}function k(e){return function(){return this.matches(e)}}function N(e){return function(t){return t.matches(e)}}_.prototype=E.prototype={constructor:_,on:function(e,t){var n,i=this._,r=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!i.hasOwnProperty(e))throw Error("unknown type: "+e);return{type:e,name:t}}),o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((n=(e=r[o]).type)&&(n=function(e,t){for(var n,i=0,r=e.length;i<r;++i)if((n=e[i]).name===t)return n.value}(i[n],e.name)))return n;return}if(null!=t&&"function"!=typeof t)throw Error("invalid callback: "+t);for(;++o<a;)if(n=(e=r[o]).type)i[n]=M(i[n],e.name,t);else if(null==t)for(n in i)i[n]=M(i[n],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new _(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,i,r=Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(i=this._[e],o=0,n=i.length;o<n;++o)i[o].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)}};var R=Array.prototype.find;function D(){return this.firstElementChild}var j=Array.prototype.filter;function O(){return Array.from(this.children)}function L(e){return Array(e.length)}function V(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function I(e,t,n,i,r,o){for(var a,s=0,l=t.length,u=o.length;s<u;++s)(a=t[s])?(a.__data__=o[s],i[s]=a):n[s]=new V(e,o[s]);for(;s<l;++s)(a=t[s])&&(r[s]=a)}function B(e,t,n,i,r,o,a){var s,l,u,c=new Map,d=t.length,h=o.length,f=Array(d);for(s=0;s<d;++s)(l=t[s])&&(f[s]=u=a.call(l,l.__data__,s,t)+"",c.has(u)?r[s]=l:c.set(u,l));for(s=0;s<h;++s)u=a.call(e,o[s],s,o)+"",(l=c.get(u))?(i[s]=l,l.__data__=o[s],c.delete(u)):n[s]=new V(e,o[s]);for(s=0;s<d;++s)(l=t[s])&&c.get(f[s])===l&&(r[s]=l)}function F(e){return e.__data__}function z(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}V.prototype={constructor:V,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var U="http://www.w3.org/1999/xhtml";let H={svg:"http://www.w3.org/2000/svg",xhtml:U,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function K(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),H.hasOwnProperty(t)?{space:H[t],local:e}:e}function W(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function X(e,t){return e.style.getPropertyValue(t)||W(e).getComputedStyle(e,null).getPropertyValue(t)}function Y(e){return e.trim().split(/^|\s+/)}function q(e){return e.classList||new Z(e)}function Z(e){this._node=e,this._names=Y(e.getAttribute("class")||"")}function G(e,t){for(var n=q(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function $(e,t){for(var n=q(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function Q(){this.textContent=""}function J(){this.innerHTML=""}function ee(){this.nextSibling&&this.parentNode.appendChild(this)}function et(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function en(e){var t=K(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===U&&t.documentElement.namespaceURI===U?t.createElement(e):t.createElementNS(n,e)}})(t)}function ei(){return null}function er(){var e=this.parentNode;e&&e.removeChild(this)}function eo(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ea(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function es(e){return function(){var t=this.__on;if(t){for(var n,i=0,r=-1,o=t.length;i<o;++i)(n=t[i],e.type&&n.type!==e.type||n.name!==e.name)?t[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?t.length=r:delete this.__on}}}function el(e,t,n){return function(){var i,r=this.__on,o=function(e){t.call(this,e,this.__data__)};if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function eu(e,t,n){var i=W(e),r=i.CustomEvent;"function"==typeof r?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}Z.prototype={add:function(e){0>this._names.indexOf(e)&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var ec=[null];function ed(e,t){this._groups=e,this._parents=t}function eh(){return new ed([[document.documentElement]],ec)}function ef(e){return"string"==typeof e?new ed([[document.querySelector(e)]],[document.documentElement]):new ed([[e]],ec)}ed.prototype=eh.prototype={constructor:ed,select:function(e){"function"!=typeof e&&(e=A(e));for(var t=this._groups,n=t.length,i=Array(n),r=0;r<n;++r)for(var o,a,s=t[r],l=s.length,u=i[r]=Array(l),c=0;c<l;++c)(o=s[c])&&(a=e.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),u[c]=a);return new ed(i,this._parents)},selectAll:function(e){if("function"==typeof e){var t;t=e,e=function(){var e;return e=t.apply(this,arguments),null==e?[]:Array.isArray(e)?e:Array.from(e)}}else e=T(e);for(var n=this._groups,i=n.length,r=[],o=[],a=0;a<i;++a)for(var s,l=n[a],u=l.length,c=0;c<u;++c)(s=l[c])&&(r.push(e.call(s,s.__data__,c,l)),o.push(s));return new ed(r,o)},selectChild:function(e){var t;return this.select(null==e?D:(t="function"==typeof e?e:N(e),function(){return R.call(this.children,t)}))},selectChildren:function(e){var t;return this.selectAll(null==e?O:(t="function"==typeof e?e:N(e),function(){return j.call(this.children,t)}))},filter:function(e){"function"!=typeof e&&(e=k(e));for(var t=this._groups,n=t.length,i=Array(n),r=0;r<n;++r)for(var o,a=t[r],s=a.length,l=i[r]=[],u=0;u<s;++u)(o=a[u])&&e.call(o,o.__data__,u,a)&&l.push(o);return new ed(i,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,F);var n=t?B:I,i=this._parents,r=this._groups;"function"!=typeof e&&(y=e,e=function(){return y});for(var o=r.length,a=Array(o),s=Array(o),l=Array(o),u=0;u<o;++u){var c=i[u],d=r[u],h=d.length,f="object"==typeof(v=e.call(c,c&&c.__data__,u,i))&&"length"in v?v:Array.from(v),p=f.length,m=s[u]=Array(p),g=a[u]=Array(p);n(c,d,m,g,l[u]=Array(h),f,t);for(var v,y,x,b,w=0,S=0;w<p;++w)if(x=m[w]){for(w>=S&&(S=w+1);!(b=g[S])&&++S<p;);x._next=b||null}}return(a=new ed(a,i))._enter=s,a._exit=l,a},enter:function(){return new ed(this._enter||this._groups.map(L),this._parents)},exit:function(){return new ed(this._exit||this._groups.map(L),this._parents)},join:function(e,t,n){var i=this.enter(),r=this,o=this.exit();return"function"==typeof e?(i=e(i))&&(i=i.selection()):i=i.append(e+""),null!=t&&(r=t(r))&&(r=r.selection()),null==n?o.remove():n(o),i&&r?i.merge(r).order():r},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,o=i.length,a=Math.min(r,o),s=Array(r),l=0;l<a;++l)for(var u,c=n[l],d=i[l],h=c.length,f=s[l]=Array(h),p=0;p<h;++p)(u=c[p]||d[p])&&(f[p]=u);for(;l<r;++l)s[l]=n[l];return new ed(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i,r=e[t],o=r.length-1,a=r[o];--o>=0;)(i=r[o])&&(a&&4^i.compareDocumentPosition(a)&&a.parentNode.insertBefore(i,a),a=i);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=z);for(var n=this._groups,i=n.length,r=Array(i),o=0;o<i;++o){for(var a,s=n[o],l=s.length,u=r[o]=Array(l),c=0;c<l;++c)(a=s[c])&&(u[c]=a);u.sort(t)}return new ed(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null},size:function(){let e=0;for(let t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r,o=t[n],a=0,s=o.length;a<s;++a)(r=o[a])&&e.call(r,r.__data__,a,o);return this},attr:function(e,t){var n=K(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==t?n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?n.local?function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}:function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}:n.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(e,t,n){return function(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):X(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=Y(e+"");if(arguments.length<2){for(var i=q(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?G:$)(this,e)}}:t?function(e){return function(){G(this,e)}}:function(e){return function(){$(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?Q:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?J:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(ee)},lower:function(){return this.each(et)},append:function(e){var t="function"==typeof e?e:en(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:en(e),i=null==t?ei:"function"==typeof t?t:A(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function(){return this.each(er)},clone:function(e){return this.select(e?ea:eo)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var i,r,o=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}),a=o.length;if(arguments.length<2){var s=this.node().__on;if(s){for(var l,u=0,c=s.length;u<c;++u)for(i=0,l=s[u];i<a;++i)if((r=o[i]).type===l.type&&r.name===l.name)return l.value}return}for(i=0,s=t?el:es;i<a;++i)this.each(s(o[i],t,n));return this},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return eu(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return eu(this,e,t)}})(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i,r=e[t],o=0,a=r.length;o<a;++o)(i=r[o])&&(yield i)}};let ep={passive:!1},em={capture:!0,passive:!1};function eg(e){e.stopImmediatePropagation()}function ev(e){e.preventDefault(),e.stopImmediatePropagation()}function ey(e){var t=e.document.documentElement,n=ef(e).on("dragstart.drag",ev,em);"onselectstart"in t?n.on("selectstart.drag",ev,em):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ex(e,t){var n=e.document.documentElement,i=ef(e).on("dragstart.drag",null);t&&(i.on("click.drag",ev,em),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function eb(e){return((e=Math.exp(e))+1/e)/2}let ew=function e(t,n,i){function r(e,r){var o,a,s=e[0],l=e[1],u=e[2],c=r[0],d=r[1],h=r[2],f=c-s,p=d-l,m=f*f+p*p;if(m<1e-12)a=Math.log(h/u)/t,o=function(e){return[s+e*f,l+e*p,u*Math.exp(t*e*a)]};else{var g=Math.sqrt(m),v=(h*h-u*u+i*m)/(2*u*n*g),y=(h*h-u*u-i*m)/(2*h*n*g),x=Math.log(Math.sqrt(v*v+1)-v);a=(Math.log(Math.sqrt(y*y+1)-y)-x)/t,o=function(e){var i,r,o=e*a,c=eb(x),d=u/(n*g)*(c*(((i=Math.exp(2*(i=t*o+x)))-1)/(i+1))-((r=Math.exp(r=x))-1/r)/2);return[s+d*f,l+d*p,u*c/eb(t*o+x)]}}return o.duration=1e3*a*t/Math.SQRT2,o}return r.rho=function(t){var n=Math.max(.001,+t),i=n*n;return e(n,i,i*i)},r}(Math.SQRT2,2,4);function eS(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}var eE,e_,eM=0,eP=0,eA=0,eC=0,eT=0,ek=0,eN="object"==typeof performance&&performance.now?performance:Date,eR="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function eD(){return eT||(eR(ej),eT=eN.now()+ek)}function ej(){eT=0}function eO(){this._call=this._time=this._next=null}function eL(e,t,n){var i=new eO;return i.restart(e,t,n),i}function eV(){eT=(eC=eN.now())+ek,eM=eP=0;try{eD(),++eM;for(var e,t=eE;t;)(e=eT-t._time)>=0&&t._call.call(void 0,e),t=t._next;--eM}finally{eM=0,function(){for(var e,t,n=eE,i=1/0;n;)n._call?(i>n._time&&(i=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:eE=t);e_=e,eB(i)}(),eT=0}}function eI(){var e=eN.now(),t=e-eC;t>1e3&&(ek-=t,eC=e)}function eB(e){!eM&&(eP&&(eP=clearTimeout(eP)),e-eT>24?(e<1/0&&(eP=setTimeout(eV,e-eN.now()-ek)),eA&&(eA=clearInterval(eA))):(eA||(eC=eN.now(),eA=setInterval(eI,1e3)),eM=1,eR(eV)))}function eF(e,t,n){var i=new eO;return t=null==t?0:+t,i.restart(n=>{i.stop(),e(n+t)},t,n),i}eO.prototype=eL.prototype={constructor:eO,restart:function(e,t,n){if("function"!=typeof e)throw TypeError("callback is not a function");n=(null==n?eD():+n)+(null==t?0:+t),this._next||e_===this||(e_?e_._next=this:eE=this,e_=this),this._call=e,this._time=n,eB()},stop:function(){this._call&&(this._call=null,this._time=1/0,eB())}};var ez=E("start","end","cancel","interrupt"),eU=[];function eH(e,t,n,i,r,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var i,r=e.__transition;function o(l){var u,c,d,h;if(1!==n.state)return s();for(u in r)if((h=r[u]).name===n.name){if(3===h.state)return eF(o);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[u]):+u<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[u])}if(eF(function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(u=0,n.state=3,i=Array(d=n.tween.length),c=-1;u<d;++u)(h=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(i[++c]=h);i.length=c+1}}function a(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=5,1),o=-1,a=i.length;++o<a;)i[o].call(e,r);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var i in n.state=6,n.timer.stop(),delete r[t],r)return;delete e.__transition}r[t]=n,n.timer=eL(function(e){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)},0,n.time)}(e,n,{name:t,index:i,group:r,on:ez,tween:eU,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function eK(e,t){var n=eX(e,t);if(n.state>0)throw Error("too late; already scheduled");return n}function eW(e,t){var n=eX(e,t);if(n.state>3)throw Error("too late; already running");return n}function eX(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw Error("transition not found");return n}function eY(e,t){var n,i,r,o=e.__transition,a=!0;if(o){for(r in t=null==t?null:t+"",o){if((n=o[r]).name!==t){a=!1;continue}i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[r]}a&&delete e.__transition}}function eq(e,t){return e*=1,t*=1,function(n){return e*(1-n)+t*n}}var eZ=180/Math.PI,eG={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function e$(e,t,n,i,r,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),e*i<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(t,e)*eZ,skewX:Math.atan(l)*eZ,scaleX:a,scaleY:s}}function eQ(e,t,n,i){function r(e){return e.length?e.pop()+" ":""}return function(o,a){var s,l,u,c,d=[],h=[];return o=e(o),a=e(a),!function(e,i,r,o,a,s){if(e!==r||i!==o){var l=a.push("translate(",null,t,null,n);s.push({i:l-4,x:eq(e,r)},{i:l-2,x:eq(i,o)})}else(r||o)&&a.push("translate("+r+t+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,d,h),s=o.rotate,l=a.rotate,s!==l?(s-l>180?l+=360:l-s>180&&(s+=360),h.push({i:d.push(r(d)+"rotate(",null,i)-2,x:eq(s,l)})):l&&d.push(r(d)+"rotate("+l+i),u=o.skewX,c=a.skewX,u!==c?h.push({i:d.push(r(d)+"skewX(",null,i)-2,x:eq(u,c)}):c&&d.push(r(d)+"skewX("+c+i),!function(e,t,n,i,o,a){if(e!==n||t!==i){var s=o.push(r(o)+"scale(",null,",",null,")");a.push({i:s-4,x:eq(e,n)},{i:s-2,x:eq(t,i)})}else(1!==n||1!==i)&&o.push(r(o)+"scale("+n+","+i+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,d,h),o=a=null,function(e){for(var t,n=-1,i=h.length;++n<i;)d[(t=h[n]).i]=t.x(e);return d.join("")}}}var eJ=eQ(function(e){let t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?eG:e$(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),e0=eQ(function(e){return null==e?eG:(n||(n=document.createElementNS("http://www.w3.org/2000/svg","g")),n.setAttribute("transform",e),e=n.transform.baseVal.consolidate())?e$((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):eG},", ",")",")");function e1(e,t,n){var i=e._id;return e.each(function(){var e=eW(this,i);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return eX(e,i).value[t]}}function e2(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function e5(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function e3(){}var e4="\\s*([+-]?\\d+)\\s*",e6="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",e9="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",e8=/^#([0-9a-f]{3,8})$/,e7=new RegExp("^rgb\\(".concat(e4,",").concat(e4,",").concat(e4,"\\)$")),te=new RegExp("^rgb\\(".concat(e9,",").concat(e9,",").concat(e9,"\\)$")),tt=new RegExp("^rgba\\(".concat(e4,",").concat(e4,",").concat(e4,",").concat(e6,"\\)$")),tn=new RegExp("^rgba\\(".concat(e9,",").concat(e9,",").concat(e9,",").concat(e6,"\\)$")),ti=new RegExp("^hsl\\(".concat(e6,",").concat(e9,",").concat(e9,"\\)$")),tr=new RegExp("^hsla\\(".concat(e6,",").concat(e9,",").concat(e9,",").concat(e6,"\\)$")),to={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};function ta(){return this.rgb().formatHex()}function ts(){return this.rgb().formatRgb()}function tl(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=e8.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?tu(t):3===n?new th(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?tc(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?tc(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=e7.exec(e))?new th(t[1],t[2],t[3],1):(t=te.exec(e))?new th(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=tt.exec(e))?tc(t[1],t[2],t[3],t[4]):(t=tn.exec(e))?tc(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=ti.exec(e))?ty(t[1],t[2]/100,t[3]/100,1):(t=tr.exec(e))?ty(t[1],t[2]/100,t[3]/100,t[4]):to.hasOwnProperty(e)?tu(to[e]):"transparent"===e?new th(NaN,NaN,NaN,0):null}function tu(e){return new th(e>>16&255,e>>8&255,255&e,1)}function tc(e,t,n,i){return i<=0&&(e=t=n=NaN),new th(e,t,n,i)}function td(e,t,n,i){var r;return 1==arguments.length?((r=e)instanceof e3||(r=tl(r)),r)?new th((r=r.rgb()).r,r.g,r.b,r.opacity):new th:new th(e,t,n,null==i?1:i)}function th(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function tf(){return"#".concat(tv(this.r)).concat(tv(this.g)).concat(tv(this.b))}function tp(){let e=tm(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(tg(this.r),", ").concat(tg(this.g),", ").concat(tg(this.b)).concat(1===e?")":", ".concat(e,")"))}function tm(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function tg(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function tv(e){return((e=tg(e))<16?"0":"")+e.toString(16)}function ty(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new tb(e,t,n,i)}function tx(e){if(e instanceof tb)return new tb(e.h,e.s,e.l,e.opacity);if(e instanceof e3||(e=tl(e)),!e)return new tb;if(e instanceof tb)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),o=Math.max(t,n,i),a=NaN,s=o-r,l=(o+r)/2;return s?(a=t===o?(n-i)/s+(n<i)*6:n===o?(i-t)/s+2:(t-n)/s+4,s/=l<.5?o+r:2-o-r,a*=60):s=l>0&&l<1?0:a,new tb(a,s,l,e.opacity)}function tb(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function tw(e){return(e=(e||0)%360)<0?e+360:e}function tS(e){return Math.max(0,Math.min(1,e||0))}function tE(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function t_(e,t,n,i,r){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*i+a*r)/6}e2(e3,tl,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ta,formatHex:ta,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return tx(this).formatHsl()},formatRgb:ts,toString:ts}),e2(th,td,e5(e3,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new th(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new th(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new th(tg(this.r),tg(this.g),tg(this.b),tm(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tf,formatHex:tf,formatHex8:function(){return"#".concat(tv(this.r)).concat(tv(this.g)).concat(tv(this.b)).concat(tv((isNaN(this.opacity)?1:this.opacity)*255))},formatRgb:tp,toString:tp})),e2(tb,function(e,t,n,i){return 1==arguments.length?tx(e):new tb(e,t,n,null==i?1:i)},e5(e3,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new tb(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new tb(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new th(tE(e>=240?e-240:e+120,r,i),tE(e,r,i),tE(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new tb(tw(this.h),tS(this.s),tS(this.l),tm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=tm(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(tw(this.h),", ").concat(100*tS(this.s),"%, ").concat(100*tS(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));let tM=e=>()=>e;function tP(e,t){var n=t-e;return n?function(t){return e+t*n}:tM(isNaN(e)?t:e)}let tA=function e(t){var n,i=1==(n=+t)?tP:function(e,t){var i,r,o;return t-e?(i=e,r=t,i=Math.pow(i,o=n),r=Math.pow(r,o)-i,o=1/o,function(e){return Math.pow(i+e*r,o)}):tM(isNaN(e)?t:e)};function r(e,t){var n=i((e=td(e)).r,(t=td(t)).r),r=i(e.g,t.g),o=i(e.b,t.b),a=tP(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=r(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function tC(e){return function(t){var n,i,r=t.length,o=Array(r),a=Array(r),s=Array(r);for(n=0;n<r;++n)i=td(t[n]),o[n]=i.r||0,a[n]=i.g||0,s[n]=i.b||0;return o=e(o),a=e(a),s=e(s),i.opacity=1,function(e){return i.r=o(e),i.g=a(e),i.b=s(e),i+""}}}tC(function(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],o=e[i+1],a=i>0?e[i-1]:2*r-o,s=i<t-1?e[i+2]:2*o-r;return t_((n-i/t)*t,a,r,o,s)}}),tC(function(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],o=e[i%t],a=e[(i+1)%t],s=e[(i+2)%t];return t_((n-i/t)*t,r,o,a,s)}});var tT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tk=RegExp(tT.source,"g");function tN(e,t){var n;return("number"==typeof t?eq:t instanceof tl?tA:(n=tl(t))?(t=n,tA):function(e,t){var n,i,r,o,a,s=tT.lastIndex=tk.lastIndex=0,l=-1,u=[],c=[];for(e+="",t+="";(r=tT.exec(e))&&(o=tk.exec(t));)(a=o.index)>s&&(a=t.slice(s,a),u[l]?u[l]+=a:u[++l]=a),(r=r[0])===(o=o[0])?u[l]?u[l]+=o:u[++l]=o:(u[++l]=null,c.push({i:l,x:eq(r,o)})),s=tk.lastIndex;return s<t.length&&(a=t.slice(s),u[l]?u[l]+=a:u[++l]=a),u.length<2?c[0]?(n=c[0].x,function(e){return n(e)+""}):(i=t,function(){return i}):(t=c.length,function(e){for(var n,i=0;i<t;++i)u[(n=c[i]).i]=n.x(e);return u.join("")})})(e,t)}var tR=eh.prototype.constructor;function tD(e){return function(){this.style.removeProperty(e)}}var tj=0;function tO(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}var tL=eh.prototype;tO.prototype=(function(e){return eh().transition(e)}).prototype={constructor:tO,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=A(e));for(var i=this._groups,r=i.length,o=Array(r),a=0;a<r;++a)for(var s,l,u=i[a],c=u.length,d=o[a]=Array(c),h=0;h<c;++h)(s=u[h])&&(l=e.call(s,s.__data__,h,u))&&("__data__"in s&&(l.__data__=s.__data__),d[h]=l,eH(d[h],t,n,h,d,eX(s,n)));return new tO(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=T(e));for(var i=this._groups,r=i.length,o=[],a=[],s=0;s<r;++s)for(var l,u=i[s],c=u.length,d=0;d<c;++d)if(l=u[d]){for(var h,f=e.call(l,l.__data__,d,u),p=eX(l,n),m=0,g=f.length;m<g;++m)(h=f[m])&&eH(h,t,n,m,f,p);o.push(f),a.push(l)}return new tO(o,a,t,n)},selectChild:tL.selectChild,selectChildren:tL.selectChildren,filter:function(e){"function"!=typeof e&&(e=k(e));for(var t=this._groups,n=t.length,i=Array(n),r=0;r<n;++r)for(var o,a=t[r],s=a.length,l=i[r]=[],u=0;u<s;++u)(o=a[u])&&e.call(o,o.__data__,u,a)&&l.push(o);return new tO(i,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw Error();for(var t=this._groups,n=e._groups,i=t.length,r=n.length,o=Math.min(i,r),a=Array(i),s=0;s<o;++s)for(var l,u=t[s],c=n[s],d=u.length,h=a[s]=Array(d),f=0;f<d;++f)(l=u[f]||c[f])&&(h[f]=l);for(;s<i;++s)a[s]=t[s];return new tO(a,this._parents,this._name,this._id)},selection:function(){return new tR(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=++tj,i=this._groups,r=i.length,o=0;o<r;++o)for(var a,s=i[o],l=s.length,u=0;u<l;++u)if(a=s[u]){var c=eX(a,t);eH(a,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new tO(i,this._parents,e,n)},call:tL.call,nodes:tL.nodes,node:tL.node,size:tL.size,empty:tL.empty,each:tL.each,on:function(e,t){var n,i,r,o,a,s,l=this._id;return arguments.length<2?eX(this.node(),l).on.on(e):this.each((n=l,i=e,r=t,s=(i+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})?eK:eW,function(){var e=s(this,n),t=e.on;t!==o&&(a=(o=t).copy()).on(i,r),e.on=a}))},attr:function(e,t){var n=K(e),i="transform"===n?e0:tN;return this.attrTween(e,"function"==typeof t?(n.local?function(e,t,n){var i,r,o;return function(){var a,s,l=n(this);return null==l?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:a===i&&s===r?o:(r=s,o=t(i=a,l))}}:function(e,t,n){var i,r,o;return function(){var a,s,l=n(this);return null==l?void this.removeAttribute(e):(a=this.getAttribute(e))===(s=l+"")?null:a===i&&s===r?o:(r=s,o=t(i=a,l))}})(n,i,e1(this,"attr."+e,t)):null==t?(n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(n):(n.local?function(e,t,n){var i,r,o=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===i?r:r=t(i=a,n)}}:function(e,t,n){var i,r,o=n+"";return function(){var a=this.getAttribute(e);return a===o?null:a===i?r:r=t(i=a,n)}})(n,i,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw Error();var i=K(e);return this.tween(n,(i.local?function(e,t){var n,i;function r(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&function(t){this.setAttributeNS(e.space,e.local,r.call(this,t))}),n}return r._value=t,r}:function(e,t){var n,i;function r(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&function(t){this.setAttribute(e,r.call(this,t))}),n}return r._value=t,r})(i,t))},style:function(e,t,n){var i,r,o,a,s,l,u,c,d,h,f,p,m,g,v,y,x,b,w,S,E,_="transform"==(e+="")?eJ:tN;return null==t?this.styleTween(e,(i=e,function(){var e=X(this,i),t=(this.style.removeProperty(i),X(this,i));return e===t?null:e===r&&t===o?a:a=_(r=e,o=t)})).on("end.style."+e,tD(e)):"function"==typeof t?this.styleTween(e,(s=e,l=e1(this,"style."+e,t),function(){var e=X(this,s),t=l(this),n=t+"";return null==t&&(this.style.removeProperty(s),n=t=X(this,s)),e===n?null:e===u&&n===c?d:(c=n,d=_(u=e,t))})).each((h=this._id,x="end."+(y="style."+(f=e)),function(){var e=eW(this,h),t=e.on,n=null==e.value[y]?v||(v=tD(f)):void 0;(t!==p||g!==n)&&(m=(p=t).copy()).on(x,g=n),e.on=m})):this.styleTween(e,(b=e,E=t+"",function(){var e=X(this,b);return e===E?null:e===w?S:S=_(w=e,t)}),n).on("end.style."+e,null)},styleTween:function(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==t)return this.tween(i,null);if("function"!=typeof t)throw Error();return this.tween(i,function(e,t,n){var i,r;function o(){var o=t.apply(this,arguments);return o!==r&&(i=(r=o)&&function(t){this.style.setProperty(e,o.call(this,t),n)}),i}return o._value=t,o}(e,t,null==n?"":n))},text:function(e){var t,n;return this.tween("text","function"==typeof e?(t=e1(this,"text",e),function(){var e=t(this);this.textContent=null==e?"":e}):(n=null==e?"":e+"",function(){this.textContent=n}))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw Error();return this.tween(t,function(e){var t,n;function i(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&function(e){this.textContent=i.call(this,e)}),t}return i._value=e,i}(e))},remove:function(){var e;return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i,r=eX(this.node(),n).tween,o=0,a=r.length;o<a;++o)if((i=r[o]).name===e)return i.value;return null}return this.each((null==t?function(e,t){var n,i;return function(){var r=eW(this,e),o=r.tween;if(o!==n){i=n=o;for(var a=0,s=i.length;a<s;++a)if(i[a].name===t){(i=i.slice()).splice(a,1);break}}r.tween=i}}:function(e,t,n){var i,r;if("function"!=typeof n)throw Error();return function(){var o=eW(this,e),a=o.tween;if(a!==i){r=(i=a).slice();for(var s={name:t,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===t){r[l]=s;break}l===u&&r.push(s)}o.tween=r}})(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){eK(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t*=1,function(){eK(this,e).delay=t}})(t,e)):eX(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){eW(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t*=1,function(){eW(this,e).duration=t}})(t,e)):eX(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw Error();return function(){eW(this,e).ease=t}}(t,e)):eX(this.node(),t).ease},easeVarying:function(e){var t;if("function"!=typeof e)throw Error();return this.each((t=this._id,function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw Error();eW(this,t).ease=n}))},end:function(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(o,a){var s={value:a},l={value:function(){0==--r&&o()}};n.each(function(){var n=eW(this,i),r=n.on;r!==e&&((t=(e=r).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t}),0===r&&o()})},[Symbol.iterator]:tL[Symbol.iterator]};var tV={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};eh.prototype.interrupt=function(e){return this.each(function(){eY(this,e)})},eh.prototype.transition=function(e){var t,n;e instanceof tO?(t=e._id,e=e._name):(t=++tj,(n=tV).time=eD(),e=null==e?null:e+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var a,s=i[o],l=s.length,u=0;u<l;++u)(a=s[u])&&eH(a,e,t,u,s,n||function(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw Error("transition ".concat(t," not found"));return n}(a,t));return new tO(i,this._parents,e,t)};let tI=e=>()=>e;function tB(e,t){let{sourceEvent:n,target:i,transform:r,dispatch:o}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function tF(e,t,n){this.k=e,this.x=t,this.y=n}tF.prototype={constructor:tF,scale:function(e){return 1===e?this:new tF(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new tF(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var tz=new tF(1,0,0);function tU(e){e.stopImmediatePropagation()}function tH(e){e.preventDefault(),e.stopImmediatePropagation()}function tK(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function tW(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function tX(){return this.__zoom||tz}function tY(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function tq(){return navigator.maxTouchPoints||"ontouchstart"in this}function tZ(e,t,n){var i=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}tF.prototype;let tG=e=>()=>e;function t$(e,t){let{sourceEvent:n,subject:i,target:r,identifier:o,active:a,x:s,y:l,dx:u,dy:c,dispatch:d}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:i,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}function tQ(e){return!e.ctrlKey&&!e.button}function tJ(){return this.parentNode}function t0(e,t){return null==t?{x:e.x,y:e.y}:t}function t1(){return navigator.maxTouchPoints||"ontouchstart"in this}t$.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e},e.i(74080);let t2=(0,d.createContext)(null),t5=t2.Provider,t3={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error003:e=>'Node type "'.concat(e,'" not found. Using fallback type "default".'),error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error009:e=>'Marker type "'.concat(e,"\" doesn't exist."),error008:(e,t)=>"Couldn't create edge for ".concat(!e?"source":"target",' handle id: "').concat(!e?t.sourceHandle:t.targetHandle,'", edge id: ').concat(t.id,"."),error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>'Edge type "'.concat(e,'" not found. Using fallback type "default".'),error012:e=>'Node with id "'.concat(e,'" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.')},t4=t3.error001();function t6(e,t){let n=(0,d.useContext)(t2);if(null===n)throw Error(t4);return x(n,e,t)}let t9=()=>{let e=(0,d.useContext)(t2);if(null===e)throw Error(t4);return(0,d.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},t8=e=>e.userSelectionActive?"none":"all";function t7(e){let{position:t,children:n,className:i,style:r,...o}=e,a=t6(t8),s="".concat(t).split("-");return d.default.createElement("div",{className:h(["react-flow__panel",i,...s]),style:{...r,pointerEvents:a},...o},n)}function ne(e){let{proOptions:t,position:n="bottom-right"}=e;return(null==t?void 0:t.hideAttribution)?null:d.default.createElement(t7,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},d.default.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}var nt=(0,d.memo)(e=>{let{x:t,y:n,label:i,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:a={},labelBgPadding:s=[2,4],labelBgBorderRadius:l=2,children:u,className:c,...f}=e,p=(0,d.useRef)(null),[m,g]=(0,d.useState)({x:0,y:0,width:0,height:0}),v=h(["react-flow__edge-textwrapper",c]);return((0,d.useEffect)(()=>{if(p.current){let e=p.current.getBBox();g({x:e.x,y:e.y,width:e.width,height:e.height})}},[i]),void 0!==i&&i)?d.default.createElement("g",{transform:"translate(".concat(t-m.width/2," ").concat(n-m.height/2,")"),className:v,visibility:m.width?"visible":"hidden",...f},o&&d.default.createElement("rect",{width:m.width+2*s[0],x:-s[0],y:-s[1],height:m.height+2*s[1],className:"react-flow__edge-textbg",style:a,rx:l,ry:l}),d.default.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:p,style:r},i),u):null});let nn=e=>({width:e.offsetWidth,height:e.offsetHeight}),ni=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,t),n)},nr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},t=arguments.length>1?arguments[1]:void 0;return{x:ni(e.x,t[0][0],t[1][0]),y:ni(e.y,t[0][1],t[1][1])}},no=(e,t,n)=>e<t?ni(Math.abs(e-t),1,50)/50:e>n?-ni(Math.abs(e-n),1,50)/50:0,na=(e,t)=>[20*no(e.x,35,t.width-35),20*no(e.y,35,t.height-35)],ns=e=>{var t,n;return(null==(t=e.getRootNode)?void 0:t.call(e))||(null==(n=window)?void 0:n.document)},nl=e=>{let{x:t,y:n,width:i,height:r}=e;return{x:t,y:n,x2:t+i,y2:n+r}},nu=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),nc=(e,t)=>Math.ceil(Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x))*Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y))),nd=e=>!isNaN(e)&&isFinite(e),nh=Symbol.for("internals"),nf=["Enter"," ","Escape"],np=(e,t)=>{};function nm(e){var t,n;let i="nativeEvent"in e?e.nativeEvent:e,r=(null==(n=i.composedPath)||null==(t=n.call(i))?void 0:t[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(null==r?void 0:r.nodeName)||(null==r?void 0:r.hasAttribute("contenteditable"))||!!(null==r?void 0:r.closest(".nokey"))}let ng=(e,t)=>{var n,i,r,o;let a="clientX"in e,s=a?e.clientX:null==(n=e.touches)?void 0:n[0].clientX,l=a?e.clientY:null==(i=e.touches)?void 0:i[0].clientY;return{x:s-(null!=(r=null==t?void 0:t.left)?r:0),y:l-(null!=(o=null==t?void 0:t.top)?o:0)}},nv=()=>{var e,t;return"undefined"!=typeof navigator&&(null==(t=navigator)||null==(e=t.userAgent)?void 0:e.indexOf("Mac"))>=0},ny=e=>{let{id:t,path:n,labelX:i,labelY:r,label:o,labelStyle:a,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c,style:h,markerEnd:f,markerStart:p,interactionWidth:m=20}=e;return d.default.createElement(d.default.Fragment,null,d.default.createElement("path",{id:t,style:h,d:n,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:p}),m&&d.default.createElement("path",{d:n,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),o&&nd(i)&&nd(r)?d.default.createElement(nt,{x:i,y:r,label:o,labelStyle:a,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c}):null)};function nx(e,t,n){return void 0===n?n:i=>{let r=t().edges.find(t=>t.id===e);r&&n(i,{...r})}}function nb(e){let{sourceX:t,sourceY:n,targetX:i,targetY:r}=e,o=Math.abs(i-t)/2,a=Math.abs(r-n)/2;return[i<t?i+o:i-o,r<n?r+a:r-a,o,a]}function nw(e){let{sourceX:t,sourceY:n,targetX:i,targetY:r,sourceControlX:o,sourceControlY:a,targetControlX:s,targetControlY:l}=e,u=.125*t+.375*o+.375*s+.125*i,c=.125*n+.375*a+.375*l+.125*r,d=Math.abs(u-t),h=Math.abs(c-n);return[u,c,d,h]}function nS(e){let{pos:t,x1:n,y1:i,x2:r,y2:o}=e;return t===l.Left||t===l.Right?[.5*(n+r),i]:[n,.5*(i+o)]}function nE(e){let{sourceX:t,sourceY:n,sourcePosition:i=l.Bottom,targetX:r,targetY:o,targetPosition:a=l.Top}=e,[s,u]=nS({pos:i,x1:t,y1:n,x2:r,y2:o}),[c,d]=nS({pos:a,x1:r,y1:o,x2:t,y2:n}),[h,f,p,m]=nw({sourceX:t,sourceY:n,targetX:r,targetY:o,sourceControlX:s,sourceControlY:u,targetControlX:c,targetControlY:d});return["M".concat(t,",").concat(n," C").concat(s,",").concat(u," ").concat(c,",").concat(d," ").concat(r,",").concat(o),h,f,p,m]}ny.displayName="BaseEdge",function(e){e.Strict="strict",e.Loose="loose"}(i||(i={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(r||(r={})),function(e){e.Partial="partial",e.Full="full"}(o||(o={})),function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"}(a||(a={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(s||(s={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(l||(l={}));let n_=(0,d.memo)(e=>{let{sourceX:t,sourceY:n,targetX:i,targetY:r,sourcePosition:o=l.Bottom,targetPosition:a=l.Top,label:s,labelStyle:u,labelShowBg:c,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:g,markerStart:v,interactionWidth:y}=e,[x,b,w]=nE({sourceX:t,sourceY:n,sourcePosition:o,targetX:i,targetY:r,targetPosition:a});return d.default.createElement(ny,{path:x,labelX:b,labelY:w,label:s,labelStyle:u,labelShowBg:c,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:g,markerStart:v,interactionWidth:y})});n_.displayName="SimpleBezierEdge";let nM={[l.Left]:{x:-1,y:0},[l.Right]:{x:1,y:0},[l.Top]:{x:0,y:-1},[l.Bottom]:{x:0,y:1}},nP=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function nA(e){let{sourceX:t,sourceY:n,sourcePosition:i=l.Bottom,targetX:r,targetY:o,targetPosition:a=l.Top,borderRadius:s=5,centerX:u,centerY:c,offset:d=20}=e,[h,f,p,m,g]=function(e){let t,n,{source:i,sourcePosition:r=l.Bottom,target:o,targetPosition:a=l.Top,center:s,offset:u}=e,c=nM[r],d=nM[a],h={x:i.x+c.x*u,y:i.y+c.y*u},f={x:o.x+d.x*u,y:o.y+d.y*u},p=(e=>{let{source:t,sourcePosition:n=l.Bottom,target:i}=e;return n===l.Left||n===l.Right?t.x<i.x?{x:1,y:0}:{x:-1,y:0}:t.y<i.y?{x:0,y:1}:{x:0,y:-1}})({source:h,sourcePosition:r,target:f}),m=0!==p.x?"x":"y",g=p[m],v=[],y={x:0,y:0},x={x:0,y:0},[b,w,S,E]=nb({sourceX:i.x,sourceY:i.y,targetX:o.x,targetY:o.y});if(c[m]*d[m]==-1){var _,M;t=null!=(_=s.x)?_:b,n=null!=(M=s.y)?M:w;let e=[{x:t,y:h.y},{x:t,y:f.y}],i=[{x:h.x,y:n},{x:f.x,y:n}];v=c[m]===g?"x"===m?e:i:"x"===m?i:e}else{let e=[{x:h.x,y:f.y}],s=[{x:f.x,y:h.y}];if(v="x"===m?c.x===g?s:e:c.y===g?e:s,r===a){let e=Math.abs(i[m]-o[m]);if(e<=u){let t=Math.min(u-1,u-e);c[m]===g?y[m]=(h[m]>i[m]?-1:1)*t:x[m]=(f[m]>o[m]?-1:1)*t}}if(r!==a){let t="x"===m?"y":"x",n=c[m]===d[t],i=h[t]>f[t],r=h[t]<f[t];(1===c[m]&&(!n&&i||n&&r)||1!==c[m]&&(!n&&r||n&&i))&&(v="x"===m?e:s)}let l={x:h.x+y.x,y:h.y+y.y},p={x:f.x+x.x,y:f.y+x.y};Math.max(Math.abs(l.x-v[0].x),Math.abs(p.x-v[0].x))>=Math.max(Math.abs(l.y-v[0].y),Math.abs(p.y-v[0].y))?(t=(l.x+p.x)/2,n=v[0].y):(t=v[0].x,n=(l.y+p.y)/2)}return[[i,{x:h.x+y.x,y:h.y+y.y},...v,{x:f.x+x.x,y:f.y+x.y},o],t,n,S,E]}({source:{x:t,y:n},sourcePosition:i,target:{x:r,y:o},targetPosition:a,center:{x:u,y:c},offset:d});return[h.reduce((e,t,n)=>e+(n>0&&n<h.length-1?function(e,t,n,i){let r=Math.min(nP(e,t)/2,nP(t,n)/2,i),{x:o,y:a}=t;if(e.x===o&&o===n.x||e.y===a&&a===n.y)return"L".concat(o," ").concat(a);if(e.y===a){let t=e.x<n.x?-1:1,i=e.y<n.y?1:-1;return"L ".concat(o+r*t,",").concat(a,"Q ").concat(o,",").concat(a," ").concat(o,",").concat(a+r*i)}let s=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return"L ".concat(o,",").concat(a+r*l,"Q ").concat(o,",").concat(a," ").concat(o+r*s,",").concat(a)}(h[n-1],t,h[n+1],s):"".concat(0===n?"M":"L").concat(t.x," ").concat(t.y)),""),f,p,m,g]}let nC=(0,d.memo)(e=>{let{sourceX:t,sourceY:n,targetX:i,targetY:r,label:o,labelStyle:a,labelShowBg:s,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:h,style:f,sourcePosition:p=l.Bottom,targetPosition:m=l.Top,markerEnd:g,markerStart:v,pathOptions:y,interactionWidth:x}=e,[b,w,S]=nA({sourceX:t,sourceY:n,sourcePosition:p,targetX:i,targetY:r,targetPosition:m,borderRadius:null==y?void 0:y.borderRadius,offset:null==y?void 0:y.offset});return d.default.createElement(ny,{path:b,labelX:w,labelY:S,label:o,labelStyle:a,labelShowBg:s,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:h,style:f,markerEnd:g,markerStart:v,interactionWidth:x})});nC.displayName="SmoothStepEdge";let nT=(0,d.memo)(e=>{var t;return d.default.createElement(nC,{...e,pathOptions:(0,d.useMemo)(()=>{var t;return{borderRadius:0,offset:null==(t=e.pathOptions)?void 0:t.offset}},[null==(t=e.pathOptions)?void 0:t.offset])})});nT.displayName="StepEdge";let nk=(0,d.memo)(e=>{let{sourceX:t,sourceY:n,targetX:i,targetY:r,label:o,labelStyle:a,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c,style:h,markerEnd:f,markerStart:p,interactionWidth:m}=e,[g,v,y]=function(e){let{sourceX:t,sourceY:n,targetX:i,targetY:r}=e,[o,a,s,l]=nb({sourceX:t,sourceY:n,targetX:i,targetY:r});return["M ".concat(t,",").concat(n,"L ").concat(i,",").concat(r),o,a,s,l]}({sourceX:t,sourceY:n,targetX:i,targetY:r});return d.default.createElement(ny,{path:g,labelX:v,labelY:y,label:o,labelStyle:a,labelShowBg:s,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c,style:h,markerEnd:f,markerStart:p,interactionWidth:m})});function nN(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function nR(e){let{pos:t,x1:n,y1:i,x2:r,y2:o,c:a}=e;switch(t){case l.Left:return[n-nN(n-r,a),i];case l.Right:return[n+nN(r-n,a),i];case l.Top:return[n,i-nN(i-o,a)];case l.Bottom:return[n,i+nN(o-i,a)]}}function nD(e){let{sourceX:t,sourceY:n,sourcePosition:i=l.Bottom,targetX:r,targetY:o,targetPosition:a=l.Top,curvature:s=.25}=e,[u,c]=nR({pos:i,x1:t,y1:n,x2:r,y2:o,c:s}),[d,h]=nR({pos:a,x1:r,y1:o,x2:t,y2:n,c:s}),[f,p,m,g]=nw({sourceX:t,sourceY:n,targetX:r,targetY:o,sourceControlX:u,sourceControlY:c,targetControlX:d,targetControlY:h});return["M".concat(t,",").concat(n," C").concat(u,",").concat(c," ").concat(d,",").concat(h," ").concat(r,",").concat(o),f,p,m,g]}nk.displayName="StraightEdge";let nj=(0,d.memo)(e=>{let{sourceX:t,sourceY:n,targetX:i,targetY:r,sourcePosition:o=l.Bottom,targetPosition:a=l.Top,label:s,labelStyle:u,labelShowBg:c,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:g,markerStart:v,pathOptions:y,interactionWidth:x}=e,[b,w,S]=nD({sourceX:t,sourceY:n,sourcePosition:o,targetX:i,targetY:r,targetPosition:a,curvature:null==y?void 0:y.curvature});return d.default.createElement(ny,{path:b,labelX:w,labelY:S,label:s,labelStyle:u,labelShowBg:c,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:g,markerStart:v,interactionWidth:x})});nj.displayName="BezierEdge";let nO=(0,d.createContext)(null),nL=nO.Provider;nO.Consumer;let nV=(e,t)=>void 0===e?"":"string"==typeof e?e:"".concat(t?"".concat(t,"__"):"").concat(Object.keys(e).sort().map(t=>"".concat(t,"=").concat(e[t])).join("&")),nI=(e,t,n,i)=>{let{x:r,y:o}=e,[a,s,l]=t,[u,c]=i,d={x:(r-a)/l,y:(o-s)/l};return n?{x:u*Math.round(d.x/u),y:c*Math.round(d.y/c)}:d},nB=(e,t)=>{let{x:n,y:i}=e,[r,o,a]=t;return{x:n*a+r,y:i*a+o}},nF=function(e){var t,n;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};let r=(null!=(t=e.width)?t:0)*i[0],o=(null!=(n=e.height)?n:0)*i[1],a={x:e.position.x-r,y:e.position.y-o};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-o}:a}},nz=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];return 0===e.length?{x:0,y:0,width:0,height:0}:(e=>{let{x:t,y:n,x2:i,y2:r}=e;return{x:t,y:n,width:i-t,height:r-n}})(e.reduce((e,n)=>{let i,{x:r,y:o}=nF(n,t).positionAbsolute;return i=nl({x:r,y:o,width:n.width||0,height:n.height||0}),{x:Math.min(e.x,i.x),y:Math.min(e.y,i.y),x2:Math.max(e.x2,i.x2),y2:Math.max(e.y2,i.y2)}},{x:1/0,y:1/0,x2:-1/0,y2:-1/0}))},nU=function(e,t){let[n,i,r]=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,1],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[0,0],l={x:(t.x-n)/r,y:(t.y-i)/r,width:t.width/r,height:t.height/r},u=[];return e.forEach(e=>{let{width:t,height:n,selectable:i=!0,hidden:r=!1}=e;if(a&&!i||r)return!1;let{positionAbsolute:c}=nF(e,s),d=nc(l,{x:c.x,y:c.y,width:t||0,height:n||0}),h=void 0===t||void 0===n||null===t||null===n,f=(t||0)*(n||0);(h||o&&d>0||d>=f||e.dragging)&&u.push(e)}),u},nH=(e,t)=>{let n=e.map(e=>e.id);return t.filter(e=>n.includes(e.source)||n.includes(e.target))},nK=function(e,t,n,i,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.1,a=ni(Math.min(t/(e.width*(1+o)),n/(e.height*(1+o))),i,r),s=e.x+e.width/2;return{x:t/2-s*a,y:n/2-(e.y+e.height/2)*a,zoom:a}},nW=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.transition().duration(t)};function nX(e,t,n,i){return(t[n]||[]).reduce((t,r)=>{if("".concat(e.id,"-").concat(r.id,"-").concat(n)!==i){var o,a,s,l;t.push({id:r.id||null,type:n,nodeId:e.id,x:(null!=(s=null==(o=e.positionAbsolute)?void 0:o.x)?s:0)+r.x+r.width/2,y:(null!=(l=null==(a=e.positionAbsolute)?void 0:a.y)?l:0)+r.y+r.height/2})}return t},[])}let nY={source:null,target:null,sourceHandle:null,targetHandle:null},nq=()=>({handleDomNode:null,isValid:!1,connection:nY,endHandle:null});function nZ(e,t,n,r,o,a,s){let l="target"===o,u=s.querySelector('.react-flow__handle[data-id="'.concat(null==e?void 0:e.nodeId,"-").concat(null==e?void 0:e.id,"-").concat(null==e?void 0:e.type,'"]')),c={...nq(),handleDomNode:u};if(u){let e=nG(void 0,u),o=u.getAttribute("data-nodeid"),s=u.getAttribute("data-handleid"),d=u.classList.contains("connectable"),h=u.classList.contains("connectableend"),f={source:l?o:n,sourceHandle:l?s:r,target:l?n:o,targetHandle:l?r:s};c.connection=f,d&&h&&(t===i.Strict?l&&"source"===e||!l&&"target"===e:o!==n||s!==r)&&(c.endHandle={nodeId:o,handleId:s,type:e},c.isValid=a(f))}return c}function nG(e,t){return e?e:(null==t?void 0:t.classList.contains("target"))?"target":(null==t?void 0:t.classList.contains("source"))?"source":null}function n$(e){null==e||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function nQ(e){let t,n,{event:i,handleId:r,nodeId:o,onConnect:a,isTarget:s,getState:l,setState:u,isValidConnection:c,edgeUpdaterType:d,onReconnectEnd:h}=e,f=ns(i.target),{connectionMode:p,domNode:m,autoPanOnConnect:g,connectionRadius:v,onConnectStart:y,panBy:x,getNodes:b,cancelConnection:w}=l(),S=0,{x:E,y:_}=ng(i),M=nG(d,null==f?void 0:f.elementFromPoint(E,_)),P=null==m?void 0:m.getBoundingClientRect();if(!P||!M)return;let A=ng(i,P),C=!1,T=null,k=!1,N=null,R=function(e){let{nodes:t,nodeId:n,handleId:i,handleType:r}=e;return t.reduce((e,t)=>{if(t[nh]){let{handleBounds:o}=t[nh],a=[],s=[];o&&(a=nX(t,o,"source","".concat(n,"-").concat(i,"-").concat(r)),s=nX(t,o,"target","".concat(n,"-").concat(i,"-").concat(r))),e.push(...a,...s)}return e},[])}({nodes:b(),nodeId:o,handleId:r,handleType:M}),D=()=>{if(!g)return;let[e,t]=na(A,P);x({x:e,y:t}),S=requestAnimationFrame(D)};function j(e){var i,a;let d,{transform:h}=l();A=ng(e,P);let{handle:m,validHandleResult:g}=function(e,t,n,i,r,o){let{x:a,y:s}=ng(e),l=t.elementsFromPoint(a,s).find(e=>e.classList.contains("react-flow__handle"));if(l){let e=l.getAttribute("data-nodeid");if(e){let t=nG(void 0,l),i=l.getAttribute("data-handleid"),a=o({nodeId:e,id:i,type:t});if(a){let o=r.find(n=>n.nodeId===e&&n.type===t&&n.id===i);return{handle:{id:i,type:t,nodeId:e,x:(null==o?void 0:o.x)||n.x,y:(null==o?void 0:o.y)||n.y},validHandleResult:a}}}}let u=[],c=1/0;if(r.forEach(e=>{let t=Math.sqrt((e.x-n.x)**2+(e.y-n.y)**2);if(t<=i){let n=o(e);t<=c&&(t<c?u=[{handle:e,validHandleResult:n}]:t===c&&u.push({handle:e,validHandleResult:n}),c=t)}}),!u.length)return{handle:null,validHandleResult:nq()};if(1===u.length)return u[0];let d=u.some(e=>{let{validHandleResult:t}=e;return t.isValid}),h=u.some(e=>{let{handle:t}=e;return"target"===t.type});return u.find(e=>{let{handle:t,validHandleResult:n}=e;return h?"target"===t.type:!d||n.isValid})||u[0]}(e,f,nI(A,h,!1,[1,1]),v,R,e=>nZ(e,p,o,r,s?"target":"source",c,f));if(t=m,C||(D(),C=!0),N=g.handleDomNode,T=g.connection,k=g.isValid,u({connectionPosition:t&&k?nB({x:t.x,y:t.y},h):A,connectionStatus:(i=!!t,d=null,(a=k)?d="valid":i&&!a&&(d="invalid"),d),connectionEndHandle:g.endHandle}),!t&&!k&&!N)return n$(n);T.source!==T.target&&N&&(n$(n),n=N,N.classList.add("connecting","react-flow__handle-connecting"),N.classList.toggle("valid",k),N.classList.toggle("react-flow__handle-valid",k))}function O(e){var i,r;(t||N)&&T&&k&&(null==a||a(T)),null==(i=(r=l()).onConnectEnd)||i.call(r,e),d&&(null==h||h(e)),n$(n),w(),cancelAnimationFrame(S),C=!1,k=!1,T=null,N=null,f.removeEventListener("mousemove",j),f.removeEventListener("mouseup",O),f.removeEventListener("touchmove",j),f.removeEventListener("touchend",O)}u({connectionPosition:A,connectionStatus:null,connectionNodeId:o,connectionHandleId:r,connectionHandleType:M,connectionStartHandle:{nodeId:o,handleId:r,type:M},connectionEndHandle:null}),null==y||y(i,{nodeId:o,handleId:r,handleType:M}),f.addEventListener("mousemove",j),f.addEventListener("mouseup",O),f.addEventListener("touchmove",j),f.addEventListener("touchend",O)}let nJ=()=>!0,n0=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),n1=(0,d.forwardRef)((e,t)=>{let{type:n="source",position:i=l.Top,isValidConnection:r,isConnectable:o=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:u,onConnect:c,children:f,className:p,onMouseDown:m,onTouchStart:g,...v}=e,y=u||null,x="target"===n,b=t9(),S=(0,d.useContext)(nO),{connectOnClick:E,noPanClassName:_}=t6(n0,w),{connecting:M,clickConnecting:P}=t6(((e,t,n)=>i=>{let{connectionStartHandle:r,connectionEndHandle:o,connectionClickStartHandle:a}=i;return{connecting:(null==r?void 0:r.nodeId)===e&&(null==r?void 0:r.handleId)===t&&(null==r?void 0:r.type)===n||(null==o?void 0:o.nodeId)===e&&(null==o?void 0:o.handleId)===t&&(null==o?void 0:o.type)===n,clickConnecting:(null==a?void 0:a.nodeId)===e&&(null==a?void 0:a.handleId)===t&&(null==a?void 0:a.type)===n}})(S,y,n),w);if(!S){var A,C;null==(A=(C=b.getState()).onError)||A.call(C,"010",t3.error010())}let T=e=>{let{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:i}=b.getState(),r={...t,...e};if(i){let{edges:e,setEdges:t}=b.getState();t(((e,t)=>{let n;return e.source&&e.target?((e,t)=>t.some(t=>t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle)))(n=(e=>"id"in e&&"source"in e&&"target"in e)(e)?{...e}:{...e,id:(e=>{let{source:t,sourceHandle:n,target:i,targetHandle:r}=e;return"reactflow__edge-".concat(t).concat(n||"","-").concat(i).concat(r||"")})(e)},t)?t:t.concat(n):(np("006",t3.error006()),t)})(r,e))}null==n||n(r),null==c||c(r)},k=e=>{if(!S)return;let t="clientX"in e;a&&(t&&0===e.button||!t)&&nQ({event:e,handleId:y,nodeId:S,onConnect:T,isTarget:x,getState:b.getState,setState:b.setState,isValidConnection:r||b.getState().isValidConnection||nJ}),t?null==m||m(e):null==g||g(e)};return d.default.createElement("div",{"data-handleid":y,"data-nodeid":S,"data-handlepos":i,"data-id":"".concat(S,"-").concat(y,"-").concat(n),className:h(["react-flow__handle","react-flow__handle-".concat(i),"nodrag",_,p,{source:!x,target:x,connectable:o,connectablestart:a,connectableend:s,connecting:P,connectionindicator:o&&(a&&!M||s&&M)}]),onMouseDown:k,onTouchStart:k,onClick:E?e=>{let{onClickConnectStart:t,onClickConnectEnd:i,connectionClickStartHandle:o,connectionMode:s,isValidConnection:l}=b.getState();if(!S||!o&&!a)return;if(!o){null==t||t(e,{nodeId:S,handleId:y,handleType:n}),b.setState({connectionClickStartHandle:{nodeId:S,type:n,handleId:y}});return}let u=ns(e.target),c=r||l||nJ,{connection:d,isValid:h}=nZ({nodeId:S,id:y,type:n},s,o.nodeId,o.handleId||null,o.type,c,u);h&&T(d),null==i||i(e),b.setState({connectionClickStartHandle:null})}:void 0,ref:t,...v},f)});n1.displayName="Handle";var n2=(0,d.memo)(n1);let n5=e=>{let{data:t,isConnectable:n,targetPosition:i=l.Top,sourcePosition:r=l.Bottom}=e;return d.default.createElement(d.default.Fragment,null,d.default.createElement(n2,{type:"target",position:i,isConnectable:n}),null==t?void 0:t.label,d.default.createElement(n2,{type:"source",position:r,isConnectable:n}))};n5.displayName="DefaultNode";var n3=(0,d.memo)(n5);let n4=e=>{let{data:t,isConnectable:n,sourcePosition:i=l.Bottom}=e;return d.default.createElement(d.default.Fragment,null,null==t?void 0:t.label,d.default.createElement(n2,{type:"source",position:i,isConnectable:n}))};n4.displayName="InputNode";var n6=(0,d.memo)(n4);let n9=e=>{let{data:t,isConnectable:n,targetPosition:i=l.Top}=e;return d.default.createElement(d.default.Fragment,null,d.default.createElement(n2,{type:"target",position:i,isConnectable:n}),null==t?void 0:t.label)};n9.displayName="OutputNode";var n8=(0,d.memo)(n9);let n7=()=>null;n7.displayName="GroupNode";let ie=e=>({selectedNodes:e.getNodes().filter(e=>e.selected),selectedEdges:e.edges.filter(e=>e.selected).map(e=>({...e}))}),it=e=>e.id;function ii(e,t){return w(e.selectedNodes.map(it),t.selectedNodes.map(it))&&w(e.selectedEdges.map(it),t.selectedEdges.map(it))}let ir=(0,d.memo)(e=>{let{onSelectionChange:t}=e,n=t9(),{selectedNodes:i,selectedEdges:r}=t6(ie,ii);return(0,d.useEffect)(()=>{let e={nodes:i,edges:r};null==t||t(e),n.getState().onSelectionChange.forEach(t=>t(e))},[i,r,t]),null});ir.displayName="SelectionListener";let io=e=>!!e.onSelectionChange;function ia(e){let{onSelectionChange:t}=e,n=t6(io);return t||n?d.default.createElement(ir,{onSelectionChange:t}):null}let is=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function il(e,t){(0,d.useEffect)(()=>{void 0!==e&&t(e)},[e])}function iu(e,t,n){(0,d.useEffect)(()=>{void 0!==t&&n({[e]:t})},[t])}let ic=e=>{let{nodes:t,edges:n,defaultNodes:i,defaultEdges:r,onConnect:o,onConnectStart:a,onConnectEnd:s,onClickConnectStart:l,onClickConnectEnd:u,nodesDraggable:c,nodesConnectable:h,nodesFocusable:f,edgesFocusable:p,edgesUpdatable:m,elevateNodesOnSelect:g,minZoom:v,maxZoom:y,nodeExtent:x,onNodesChange:b,onEdgesChange:S,elementsSelectable:E,connectionMode:_,snapGrid:M,snapToGrid:P,translateExtent:A,connectOnClick:C,defaultEdgeOptions:T,fitView:k,fitViewOptions:N,onNodesDelete:R,onEdgesDelete:D,onNodeDrag:j,onNodeDragStart:O,onNodeDragStop:L,onSelectionDrag:V,onSelectionDragStart:I,onSelectionDragStop:B,noPanClassName:F,nodeOrigin:z,rfId:U,autoPanOnConnect:H,autoPanOnNodeDrag:K,onError:W,connectionRadius:X,isValidConnection:Y,nodeDragThreshold:q}=e,{setNodes:Z,setEdges:G,setDefaultNodesAndEdges:$,setMinZoom:Q,setMaxZoom:J,setTranslateExtent:ee,setNodeExtent:et,reset:en}=t6(is,w),ei=t9();return(0,d.useEffect)(()=>($(i,null==r?void 0:r.map(e=>({...e,...T}))),()=>{en()}),[]),iu("defaultEdgeOptions",T,ei.setState),iu("connectionMode",_,ei.setState),iu("onConnect",o,ei.setState),iu("onConnectStart",a,ei.setState),iu("onConnectEnd",s,ei.setState),iu("onClickConnectStart",l,ei.setState),iu("onClickConnectEnd",u,ei.setState),iu("nodesDraggable",c,ei.setState),iu("nodesConnectable",h,ei.setState),iu("nodesFocusable",f,ei.setState),iu("edgesFocusable",p,ei.setState),iu("edgesUpdatable",m,ei.setState),iu("elementsSelectable",E,ei.setState),iu("elevateNodesOnSelect",g,ei.setState),iu("snapToGrid",P,ei.setState),iu("snapGrid",M,ei.setState),iu("onNodesChange",b,ei.setState),iu("onEdgesChange",S,ei.setState),iu("connectOnClick",C,ei.setState),iu("fitViewOnInit",k,ei.setState),iu("fitViewOnInitOptions",N,ei.setState),iu("onNodesDelete",R,ei.setState),iu("onEdgesDelete",D,ei.setState),iu("onNodeDrag",j,ei.setState),iu("onNodeDragStart",O,ei.setState),iu("onNodeDragStop",L,ei.setState),iu("onSelectionDrag",V,ei.setState),iu("onSelectionDragStart",I,ei.setState),iu("onSelectionDragStop",B,ei.setState),iu("noPanClassName",F,ei.setState),iu("nodeOrigin",z,ei.setState),iu("rfId",U,ei.setState),iu("autoPanOnConnect",H,ei.setState),iu("autoPanOnNodeDrag",K,ei.setState),iu("onError",W,ei.setState),iu("connectionRadius",X,ei.setState),iu("isValidConnection",Y,ei.setState),iu("nodeDragThreshold",q,ei.setState),il(t,Z),il(n,G),il(v,Q),il(y,J),il(A,ee),il(x,et),null},id={display:"none"},ih={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ip="react-flow__node-desc",im="react-flow__edge-desc",ig=e=>e.ariaLiveMessage;function iv(e){let{rfId:t}=e,n=t6(ig);return d.default.createElement("div",{id:"".concat("react-flow__aria-live","-").concat(t),"aria-live":"assertive","aria-atomic":"true",style:ih},n)}function iy(e){let{rfId:t,disableKeyboardA11y:n}=e;return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{id:"".concat(ip,"-").concat(t),style:id},"Press enter or space to select a node.",!n&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),d.default.createElement("div",{id:"".concat(im,"-").concat(t),style:id},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!n&&d.default.createElement(iv,{rfId:t}))}var ix=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{actInsideInputWithModifier:!0},[n,i]=(0,d.useState)(!1),r=(0,d.useRef)(!1),o=(0,d.useRef)(new Set([])),[a,s]=(0,d.useMemo)(()=>{if(null!==e){let t=(Array.isArray(e)?e:[e]).filter(e=>"string"==typeof e).map(e=>e.split("+")),n=t.reduce((e,t)=>e.concat(...t),[]);return[t,n]}return[[],[]]},[e]);return(0,d.useEffect)(()=>{let n="undefined"!=typeof document?document:null,l=(null==t?void 0:t.target)||n;if(null!==e){let e=e=>{if(r.current=e.ctrlKey||e.metaKey||e.shiftKey,(!r.current||r.current&&!t.actInsideInputWithModifier)&&nm(e))return!1;let n=iw(e.code,s);o.current.add(e[n]),ib(a,o.current,!1)&&(e.preventDefault(),i(!0))},n=e=>{if((!r.current||r.current&&!t.actInsideInputWithModifier)&&nm(e))return!1;let n=iw(e.code,s);ib(a,o.current,!0)?(i(!1),o.current.clear()):o.current.delete(e[n]),"Meta"===e.key&&o.current.clear(),r.current=!1},u=()=>{o.current.clear(),i(!1)};return null==l||l.addEventListener("keydown",e),null==l||l.addEventListener("keyup",n),window.addEventListener("blur",u),()=>{null==l||l.removeEventListener("keydown",e),null==l||l.removeEventListener("keyup",n),window.removeEventListener("blur",u)}}},[e,i]),n};function ib(e,t,n){return e.filter(e=>n||e.length===t.size).some(e=>e.every(e=>t.has(e)))}function iw(e,t){return t.includes(e)?"code":"key"}function iS(e,t,n){e.forEach(i=>{let r=i.parentNode||i.parentId;if(r&&!e.has(r))throw Error("Parent node ".concat(r," not found"));if(r||(null==n?void 0:n[i.id])){var o,a;let{x:r,y:s,z:l}=function e(t,n,i,r){var o,a,s,l,u,c,d,h;let f=t.parentNode||t.parentId;if(!f)return i;let p=n.get(f),m=nF(p,r);return e(p,n,{x:(null!=(s=i.x)?s:0)+m.x,y:(null!=(l=i.y)?l:0)+m.y,z:(null!=(u=null==(o=p[nh])?void 0:o.z)?u:0)>(null!=(c=i.z)?c:0)?null!=(d=null==(a=p[nh])?void 0:a.z)?d:0:null!=(h=i.z)?h:0},r)}(i,e,{...i.position,z:null!=(a=null==(o=i[nh])?void 0:o.z)?a:0},t);i.positionAbsolute={x:r,y:s},i[nh].z=l,(null==n?void 0:n[i.id])&&(i[nh].isParent=!0)}})}function iE(e,t,n,i){let r=new Map,o={},a=1e3*!!i;return e.forEach(e=>{var n;let i=(nd(e.zIndex)?e.zIndex:0)+(e.selected?a:0),s=t.get(e.id),l={...e,positionAbsolute:{x:e.position.x,y:e.position.y}},u=e.parentNode||e.parentId;u&&(o[u]=!0),Object.defineProperty(l,nh,{enumerable:!1,value:{handleBounds:(null==s?void 0:s.type)&&(null==s?void 0:s.type)!==e.type||null==s||null==(n=s[nh])?void 0:n.handleBounds,z:i}}),r.set(e.id,l)}),iS(r,n,o),r}function i_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{getNodes:n,width:i,height:r,minZoom:o,maxZoom:a,d3Zoom:s,d3Selection:l,fitViewOnInitDone:u,fitViewOnInit:c,nodeOrigin:d}=e(),h=t.initial&&!u&&c;if(s&&l&&(h||!t.initial)){let e=n().filter(e=>{var n;let i=t.includeHiddenNodes?e.width&&e.height:!e.hidden;return(null==(n=t.nodes)?void 0:n.length)?i&&t.nodes.some(t=>t.id===e.id):i}),u=e.every(e=>e.width&&e.height);if(e.length>0&&u){var f,p,m;let{x:n,y:u,zoom:c}=nK(nz(e,d),i,r,null!=(f=t.minZoom)?f:o,null!=(p=t.maxZoom)?p:a,null!=(m=t.padding)?m:.1),h=tz.translate(n,u).scale(c);return"number"==typeof t.duration&&t.duration>0?s.transform(nW(l,t.duration),h):s.transform(l,h),!0}}return!1}function iM(e){let{changedNodes:t,changedEdges:n,get:i,set:r}=e,{nodeInternals:o,edges:a,onNodesChange:s,onEdgesChange:l,hasDefaultNodes:u,hasDefaultEdges:c}=i();(null==t?void 0:t.length)&&(u&&r({nodeInternals:(t.forEach(e=>{let t=o.get(e.id);t&&o.set(t.id,{...t,[nh]:t[nh],selected:e.selected})}),new Map(o))}),null==s||s(t)),(null==n?void 0:n.length)&&(c&&r({edges:a.map(e=>{let t=n.find(t=>t.id===e.id);return t&&(e.selected=t.selected),e})}),null==l||l(n))}let iP=()=>{},iA={zoomIn:iP,zoomOut:iP,zoomTo:iP,getZoom:()=>1,setViewport:iP,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:iP,fitBounds:iP,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},iC=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection});function iT(){let e=(()=>{let e=t9(),{d3Zoom:t,d3Selection:n}=t6(iC,w);return(0,d.useMemo)(()=>n&&t?{zoomIn:e=>t.scaleBy(nW(n,null==e?void 0:e.duration),1.2),zoomOut:e=>t.scaleBy(nW(n,null==e?void 0:e.duration),1/1.2),zoomTo:(e,i)=>t.scaleTo(nW(n,null==i?void 0:i.duration),e),getZoom:()=>e.getState().transform[2],setViewport:(i,r)=>{var o,a,s;let[l,u,c]=e.getState().transform,d=tz.translate(null!=(o=i.x)?o:l,null!=(a=i.y)?a:u).scale(null!=(s=i.zoom)?s:c);t.transform(nW(n,null==r?void 0:r.duration),d)},getViewport:()=>{let[t,n,i]=e.getState().transform;return{x:t,y:n,zoom:i}},fitView:t=>i_(e.getState,t),setCenter:(i,r,o)=>{let{width:a,height:s,maxZoom:l}=e.getState(),u=void 0!==(null==o?void 0:o.zoom)?o.zoom:l,c=a/2-i*u,d=s/2-r*u,h=tz.translate(c,d).scale(u);t.transform(nW(n,null==o?void 0:o.duration),h)},fitBounds:(i,r)=>{var o;let{width:a,height:s,minZoom:l,maxZoom:u}=e.getState(),{x:c,y:d,zoom:h}=nK(i,a,s,l,u,null!=(o=null==r?void 0:r.padding)?o:.1),f=tz.translate(c,d).scale(h);t.transform(nW(n,null==r?void 0:r.duration),f)},project:t=>{let{transform:n,snapToGrid:i,snapGrid:r}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),nI(t,n,i,r)},screenToFlowPosition:t=>{let{transform:n,snapToGrid:i,snapGrid:r,domNode:o}=e.getState();if(!o)return t;let{x:a,y:s}=o.getBoundingClientRect();return nI({x:t.x-a,y:t.y-s},n,i,r)},flowToScreenPosition:t=>{let{transform:n,domNode:i}=e.getState();if(!i)return t;let{x:r,y:o}=i.getBoundingClientRect(),a=nB(t,n);return{x:a.x+r,y:a.y+o}},viewportInitialized:!0}:iA,[t,n])})(),t=t9(),n=(0,d.useCallback)(()=>t.getState().getNodes().map(e=>({...e})),[]),i=(0,d.useCallback)(e=>t.getState().nodeInternals.get(e),[]),r=(0,d.useCallback)(()=>{let{edges:e=[]}=t.getState();return e.map(e=>({...e}))},[]),o=(0,d.useCallback)(e=>{let{edges:n=[]}=t.getState();return n.find(t=>t.id===e)},[]),a=(0,d.useCallback)(e=>{let{getNodes:n,setNodes:i,hasDefaultNodes:r,onNodesChange:o}=t.getState(),a=n(),s="function"==typeof e?e(a):e;r?i(s):o&&o(0===s.length?a.map(e=>({type:"remove",id:e.id})):s.map(e=>({item:e,type:"reset"})))},[]),s=(0,d.useCallback)(e=>{let{edges:n=[],setEdges:i,hasDefaultEdges:r,onEdgesChange:o}=t.getState(),a="function"==typeof e?e(n):e;r?i(a):o&&o(0===a.length?n.map(e=>({type:"remove",id:e.id})):a.map(e=>({item:e,type:"reset"})))},[]),l=(0,d.useCallback)(e=>{let n=Array.isArray(e)?e:[e],{getNodes:i,setNodes:r,hasDefaultNodes:o,onNodesChange:a}=t.getState();o?r([...i(),...n]):a&&a(n.map(e=>({item:e,type:"add"})))},[]),u=(0,d.useCallback)(e=>{let n=Array.isArray(e)?e:[e],{edges:i=[],setEdges:r,hasDefaultEdges:o,onEdgesChange:a}=t.getState();o?r([...i,...n]):a&&a(n.map(e=>({item:e,type:"add"})))},[]),c=(0,d.useCallback)(()=>{let{getNodes:e,edges:n=[],transform:i}=t.getState(),[r,o,a]=i;return{nodes:e().map(e=>({...e})),edges:n.map(e=>({...e})),viewport:{x:r,y:o,zoom:a}}},[]),h=(0,d.useCallback)(e=>{let{nodes:n,edges:i}=e,{nodeInternals:r,getNodes:o,edges:a,hasDefaultNodes:s,hasDefaultEdges:l,onNodesDelete:u,onEdgesDelete:c,onNodesChange:d,onEdgesChange:h}=t.getState(),f=(n||[]).map(e=>e.id),p=(i||[]).map(e=>e.id),m=o().reduce((e,t)=>{let n=t.parentNode||t.parentId,i=!f.includes(t.id)&&n&&e.find(e=>e.id===n);return("boolean"!=typeof t.deletable||t.deletable)&&(f.includes(t.id)||i)&&e.push(t),e},[]),g=a.filter(e=>"boolean"!=typeof e.deletable||e.deletable),v=g.filter(e=>p.includes(e.id));if(m||v){let e=[...v,...nH(m,g)],n=e.reduce((e,t)=>(e.includes(t.id)||e.push(t.id),e),[]);(l||s)&&(l&&t.setState({edges:a.filter(e=>!n.includes(e.id))}),s&&(m.forEach(e=>{r.delete(e.id)}),t.setState({nodeInternals:new Map(r)}))),n.length>0&&(null==c||c(e),h&&h(n.map(e=>({id:e,type:"remove"})))),m.length>0&&(null==u||u(m),d&&d(m.map(e=>({id:e.id,type:"remove"}))))}},[]),f=(0,d.useCallback)(e=>{let n=nd(e.width)&&nd(e.height)&&nd(e.x)&&nd(e.y),i=n?null:t.getState().nodeInternals.get(e.id);return n||i?[n?e:nu(i),i,n]:[null,null,n]},[]),p=(0,d.useCallback)(function(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=arguments.length>2?arguments[2]:void 0,[r,o,a]=f(e);return r?(i||t.getState().getNodes()).filter(e=>{if(!a&&(e.id===o.id||!e.positionAbsolute))return!1;let t=nc(nu(e),r);return n&&t>0||t>=r.width*r.height}):[]},[]),m=(0,d.useCallback)(function(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],[i]=f(e);if(!i)return!1;let r=nc(i,t);return n&&r>0||r>=i.width*i.height},[]);return(0,d.useMemo)(()=>({...e,getNodes:n,getNode:i,getEdges:r,getEdge:o,setNodes:a,setEdges:s,addNodes:l,addEdges:u,toObject:c,deleteElements:h,getIntersectingNodes:p,isNodeIntersecting:m}),[e,n,i,r,o,a,s,l,u,c,h,p,m])}let ik={actInsideInputWithModifier:!1},iN={position:"absolute",width:"100%",height:"100%",top:0,left:0},iR=e=>({x:e.x,y:e.y,zoom:e.k}),iD=(e,t)=>e.target.closest(".".concat(t)),ij=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),iO=e=>{let t=e.ctrlKey&&nv()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t},iL=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),iV=e=>{let{onMove:t,onMoveStart:n,onMoveEnd:i,onPaneContextMenu:o,zoomOnScroll:a=!0,zoomOnPinch:s=!0,panOnScroll:l=!1,panOnScrollSpeed:u=.5,panOnScrollMode:c=r.Free,zoomOnDoubleClick:h=!0,elementsSelectable:f,panOnDrag:p=!0,defaultViewport:m,translateExtent:g,minZoom:v,maxZoom:y,zoomActivationKeyCode:x,preventScrolling:b=!0,children:S,noWheelClassName:_,noPanClassName:M}=e,P=(0,d.useRef)(),A=t9(),C=(0,d.useRef)(!1),T=(0,d.useRef)(!1),k=(0,d.useRef)(null),N=(0,d.useRef)({x:0,y:0,zoom:0}),{d3Zoom:R,d3Selection:D,d3ZoomHandler:j,userSelectionActive:O}=t6(iL,w),L=ix(x),V=(0,d.useRef)(0),I=(0,d.useRef)(!1),B=(0,d.useRef)();return!function(e){let t=t9();(0,d.useEffect)(()=>{let n,i=()=>{if(!e.current)return;let n=nn(e.current);if(0===n.height||0===n.width){var i,r;null==(i=(r=t.getState()).onError)||i.call(r,"004",t3.error004())}t.setState({width:n.width||500,height:n.height||500})};return i(),window.addEventListener("resize",i),e.current&&(n=new ResizeObserver(()=>i())).observe(e.current),()=>{window.removeEventListener("resize",i),n&&e.current&&n.unobserve(e.current)}},[])}(k),(0,d.useEffect)(()=>{if(k.current){let e=k.current.getBoundingClientRect(),t=(function(){var e,t,n,i=tK,r=tW,o=tZ,a=tY,s=tq,l=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],c=250,d=ew,h=E("start","zoom","end"),f=0,p=10;function m(e){e.property("__zoom",tX).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",_).on("dblclick.zoom",M).filter(s).on("touchstart.zoom",P).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",C).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new tF(t,e.x,e.y)}function v(e,t,n){var i=t[0]-n[0]*e.k,r=t[1]-n[1]*e.k;return i===e.x&&r===e.y?e:new tF(e.k,i,r)}function y(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function x(e,t,n,i){e.on("start.zoom",function(){b(this,arguments).event(i).start()}).on("interrupt.zoom end.zoom",function(){b(this,arguments).event(i).end()}).tween("zoom",function(){var e=arguments,o=b(this,e).event(i),a=r.apply(this,e),s=null==n?y(a):"function"==typeof n?n.apply(this,e):n,l=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),u=this.__zoom,c="function"==typeof t?t.apply(this,e):t,h=d(u.invert(s).concat(l/u.k),c.invert(s).concat(l/c.k));return function(e){if(1===e)e=c;else{var t=h(e),n=l/t[2];e=new tF(n,s[0]-t[0]*n,s[1]-t[1]*n)}o.zoom(null,e)}})}function b(e,t,n){return!n&&e.__zooming||new w(e,t)}function w(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=r.apply(e,t),this.taps=0}function S(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(i.apply(this,arguments)){var s=b(this,n).event(e),c=this.__zoom,d=Math.max(l[0],Math.min(l[1],c.k*Math.pow(2,a.apply(this,arguments)))),h=eS(e);if(s.wheel)(s.mouse[0][0]!==h[0]||s.mouse[0][1]!==h[1])&&(s.mouse[1]=c.invert(s.mouse[0]=h)),clearTimeout(s.wheel);else{if(c.k===d)return;s.mouse=[h,c.invert(h)],eY(this),s.start()}tH(e),s.wheel=setTimeout(function(){s.wheel=null,s.end()},150),s.zoom("mouse",o(v(g(c,d),s.mouse[0],s.mouse[1]),s.extent,u))}}function _(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];if(!n&&i.apply(this,arguments)){var s=e.currentTarget,l=b(this,r,!0).event(e),c=ef(e.view).on("mousemove.zoom",function(e){if(tH(e),!l.moved){var t=e.clientX-h,n=e.clientY-p;l.moved=t*t+n*n>f}l.event(e).zoom("mouse",o(v(l.that.__zoom,l.mouse[0]=eS(e,s),l.mouse[1]),l.extent,u))},!0).on("mouseup.zoom",function(e){c.on("mousemove.zoom mouseup.zoom",null),ex(e.view,l.moved),tH(e),l.event(e).end()},!0),d=eS(e,s),h=e.clientX,p=e.clientY;ey(e.view),tU(e),l.mouse=[d,this.__zoom.invert(d)],eY(this),l.start()}}function M(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(i.apply(this,arguments)){var s=this.__zoom,l=eS(e.changedTouches?e.changedTouches[0]:e,this),d=s.invert(l),h=s.k*(e.shiftKey?.5:2),f=o(v(g(s,h),l,d),r.apply(this,n),u);tH(e),c>0?ef(this).transition().duration(c).call(x,f,l,e):ef(this).call(m.transform,f,l,e)}}function P(n){for(var r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];if(i.apply(this,arguments)){var s,l,u,c,d=n.touches,h=d.length,f=b(this,o,n.changedTouches.length===h).event(n);for(tU(n),l=0;l<h;++l)c=[c=eS(u=d[l],this),this.__zoom.invert(c),u.identifier],f.touch0?f.touch1||f.touch0[2]===c[2]||(f.touch1=c,f.taps=0):(f.touch0=c,s=!0,f.taps=1+!!e);e&&(e=clearTimeout(e)),s&&(f.taps<2&&(t=c[0],e=setTimeout(function(){e=null},500)),eY(this),f.start())}}function A(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(this.__zooming){var r,a,s,l,c=b(this,n).event(e),d=e.changedTouches,h=d.length;for(tH(e),r=0;r<h;++r)s=eS(a=d[r],this),c.touch0&&c.touch0[2]===a.identifier?c.touch0[0]=s:c.touch1&&c.touch1[2]===a.identifier&&(c.touch1[0]=s);if(a=c.that.__zoom,c.touch1){var f=c.touch0[0],p=c.touch0[1],m=c.touch1[0],y=c.touch1[1],x=(x=m[0]-f[0])*x+(x=m[1]-f[1])*x,w=(w=y[0]-p[0])*w+(w=y[1]-p[1])*w;a=g(a,Math.sqrt(x/w)),s=[(f[0]+m[0])/2,(f[1]+m[1])/2],l=[(p[0]+y[0])/2,(p[1]+y[1])/2]}else{if(!c.touch0)return;s=c.touch0[0],l=c.touch0[1]}c.zoom("touch",o(v(a,s,l),c.extent,u))}}function C(e){for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];if(this.__zooming){var a,s,l=b(this,r).event(e),u=e.changedTouches,c=u.length;for(tU(e),n&&clearTimeout(n),n=setTimeout(function(){n=null},500),a=0;a<c;++a)s=u[a],l.touch0&&l.touch0[2]===s.identifier?delete l.touch0:l.touch1&&l.touch1[2]===s.identifier&&delete l.touch1;if(l.touch1&&!l.touch0&&(l.touch0=l.touch1,delete l.touch1),l.touch0)l.touch0[1]=this.__zoom.invert(l.touch0[0]);else if(l.end(),2===l.taps&&(s=eS(s,this),Math.hypot(t[0]-s[0],t[1]-s[1])<p)){var d=ef(this).on("dblclick.zoom");d&&d.apply(this,arguments)}}}return m.transform=function(e,t,n,i){var r=e.selection?e.selection():e;r.property("__zoom",tX),e!==r?x(e,t,n,i):r.interrupt().each(function(){b(this,arguments).event(i).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},m.scaleBy=function(e,t,n,i){m.scaleTo(e,function(){var e=this.__zoom.k,n="function"==typeof t?t.apply(this,arguments):t;return e*n},n,i)},m.scaleTo=function(e,t,n,i){m.transform(e,function(){var e=r.apply(this,arguments),i=this.__zoom,a=null==n?y(e):"function"==typeof n?n.apply(this,arguments):n,s=i.invert(a),l="function"==typeof t?t.apply(this,arguments):t;return o(v(g(i,l),a,s),e,u)},n,i)},m.translateBy=function(e,t,n,i){m.transform(e,function(){return o(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),u)},null,i)},m.translateTo=function(e,t,n,i,a){m.transform(e,function(){var e=r.apply(this,arguments),a=this.__zoom,s=null==i?y(e):"function"==typeof i?i.apply(this,arguments):i;return o(tz.translate(s[0],s[1]).scale(a.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,u)},i,a)},w.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=ef(this.that).datum();h.call(e,this.that,new tB(e,{sourceEvent:this.sourceEvent,target:m,type:e,transform:this.that.__zoom,dispatch:h}),t)}},m.wheelDelta=function(e){return arguments.length?(a="function"==typeof e?e:tI(+e),m):a},m.filter=function(e){return arguments.length?(i="function"==typeof e?e:tI(!!e),m):i},m.touchable=function(e){return arguments.length?(s="function"==typeof e?e:tI(!!e),m):s},m.extent=function(e){return arguments.length?(r="function"==typeof e?e:tI([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):r},m.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],m):[l[0],l[1]]},m.translateExtent=function(e){return arguments.length?(u[0][0]=+e[0][0],u[1][0]=+e[1][0],u[0][1]=+e[0][1],u[1][1]=+e[1][1],m):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},m.constrain=function(e){return arguments.length?(o=e,m):o},m.duration=function(e){return arguments.length?(c=+e,m):c},m.interpolate=function(e){return arguments.length?(d=e,m):d},m.on=function(){var e=h.on.apply(h,arguments);return e===h?m:e},m.clickDistance=function(e){return arguments.length?(f=(e*=1)*e,m):Math.sqrt(f)},m.tapDistance=function(e){return arguments.length?(p=+e,m):p},m})().scaleExtent([v,y]).translateExtent(g),n=ef(k.current).call(t),i=tz.translate(m.x,m.y).scale(ni(m.zoom,v,y)),r=[[0,0],[e.width,e.height]],o=t.constrain()(i,r,g);t.transform(n,o),t.wheelDelta(iO),A.setState({d3Zoom:t,d3Selection:n,d3ZoomHandler:n.on("wheel.zoom"),transform:[o.x,o.y,o.k],domNode:k.current.closest(".react-flow")})}},[]),(0,d.useEffect)(()=>{D&&R&&(!l||L||O?void 0!==j&&D.on("wheel.zoom",function(e,t){if(!b&&"wheel"===e.type&&!e.ctrlKey||iD(e,_))return null;e.preventDefault(),j.call(this,e,t)},{passive:!1}):D.on("wheel.zoom",e=>{if(iD(e,_))return!1;e.preventDefault(),e.stopImmediatePropagation();let o=D.property("__zoom").k||1;if(e.ctrlKey&&s){let t=eS(e),n=o*Math.pow(2,iO(e));R.scaleTo(D,n,t,e);return}let a=1===e.deltaMode?20:1,l=c===r.Vertical?0:e.deltaX*a,d=c===r.Horizontal?0:e.deltaY*a;!nv()&&e.shiftKey&&c!==r.Vertical&&(l=e.deltaY*a,d=0),R.translateBy(D,-(l/o)*u,-(d/o)*u,{internal:!0});let h=iR(D.property("__zoom")),{onViewportChangeStart:f,onViewportChange:p,onViewportChangeEnd:m}=A.getState();clearTimeout(B.current),I.current||(I.current=!0,null==n||n(e,h),null==f||f(h)),I.current&&(null==t||t(e,h),null==p||p(h),B.current=setTimeout(()=>{null==i||i(e,h),null==m||m(h),I.current=!1},150))},{passive:!1}))},[O,l,c,D,R,j,L,s,b,_,n,t,i]),(0,d.useEffect)(()=>{R&&R.on("start",e=>{var t,i;if(!e.sourceEvent||e.sourceEvent.internal)return null;V.current=null==(t=e.sourceEvent)?void 0:t.button;let{onViewportChangeStart:r}=A.getState(),o=iR(e.transform);C.current=!0,N.current=o,(null==(i=e.sourceEvent)?void 0:i.type)==="mousedown"&&A.setState({paneDragging:!0}),null==r||r(o),null==n||n(e.sourceEvent,o)})},[R,n]),(0,d.useEffect)(()=>{R&&(O&&!C.current?R.on("zoom",null):O||R.on("zoom",e=>{var n,i;let{onViewportChange:r}=A.getState();if(A.setState({transform:[e.transform.x,e.transform.y,e.transform.k]}),T.current=!!(o&&ij(p,null!=(i=V.current)?i:0)),(t||r)&&!(null==(n=e.sourceEvent)?void 0:n.internal)){let n=iR(e.transform);null==r||r(n),null==t||t(e.sourceEvent,n)}}))},[O,R,t,p,o]),(0,d.useEffect)(()=>{R&&R.on("end",e=>{var t;if(!e.sourceEvent||e.sourceEvent.internal)return null;let{onViewportChangeEnd:n}=A.getState();if(C.current=!1,A.setState({paneDragging:!1}),o&&ij(p,null!=(t=V.current)?t:0)&&!T.current&&o(e.sourceEvent),T.current=!1,(i||n)&&((e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k)(N.current,e.transform)){let t=iR(e.transform);N.current=t,clearTimeout(P.current),P.current=setTimeout(()=>{null==n||n(t),null==i||i(e.sourceEvent,t)},150*!!l)}})},[R,l,p,i,o]),(0,d.useEffect)(()=>{R&&R.filter(e=>{let t=L||a,n=s&&e.ctrlKey;if((!0===p||Array.isArray(p)&&p.includes(1))&&1===e.button&&"mousedown"===e.type&&(iD(e,"react-flow__node")||iD(e,"react-flow__edge")))return!0;if(!p&&!t&&!l&&!h&&!s||O||!h&&"dblclick"===e.type||iD(e,_)&&"wheel"===e.type||iD(e,M)&&("wheel"!==e.type||l&&"wheel"===e.type&&!L)||!s&&e.ctrlKey&&"wheel"===e.type||!t&&!l&&!n&&"wheel"===e.type||!p&&("mousedown"===e.type||"touchstart"===e.type)||Array.isArray(p)&&!p.includes(e.button)&&"mousedown"===e.type)return!1;let i=Array.isArray(p)&&p.includes(e.button)||!e.button||e.button<=1;return(!e.ctrlKey||"wheel"===e.type)&&i})},[O,R,a,s,l,h,p,f,L]),d.default.createElement("div",{className:"react-flow__renderer",ref:k,style:iN},S)},iI=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function iB(){let{userSelectionActive:e,userSelectionRect:t}=t6(iI,w);return e&&t?d.default.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:"translate(".concat(t.x,"px, ").concat(t.y,"px)")}}):null}function iF(e,t){let n=t.parentNode||t.parentId,i=e.find(e=>e.id===n);if(i){let e=t.position.x+t.width-i.width,n=t.position.y+t.height-i.height;if(e>0||n>0||t.position.x<0||t.position.y<0){var r,o;if(i.style={...i.style},i.style.width=null!=(r=i.style.width)?r:i.width,i.style.height=null!=(o=i.style.height)?o:i.height,e>0&&(i.style.width+=e),n>0&&(i.style.height+=n),t.position.x<0){let e=Math.abs(t.position.x);i.position.x=i.position.x-e,i.style.width+=e,t.position.x=0}if(t.position.y<0){let e=Math.abs(t.position.y);i.position.y=i.position.y-e,i.style.height+=e,t.position.y=0}i.width=i.style.width,i.height=i.style.height}}}function iz(e,t){if(e.some(e=>"reset"===e.type))return e.filter(e=>"reset"===e.type).map(e=>e.item);let n=e.filter(e=>"add"===e.type).map(e=>e.item);return t.reduce((t,n)=>{let i=e.filter(e=>e.id===n.id);if(0===i.length)return t.push(n),t;let r={...n};for(let e of i)if(e)switch(e.type){case"select":r.selected=e.selected;break;case"position":void 0!==e.position&&(r.position=e.position),void 0!==e.positionAbsolute&&(r.positionAbsolute=e.positionAbsolute),void 0!==e.dragging&&(r.dragging=e.dragging),r.expandParent&&iF(t,r);break;case"dimensions":void 0!==e.dimensions&&(r.width=e.dimensions.width,r.height=e.dimensions.height),void 0!==e.updateStyle&&(r.style={...r.style||{},...e.dimensions}),"boolean"==typeof e.resizing&&(r.resizing=e.resizing),r.expandParent&&iF(t,r);break;case"remove":return t}return t.push(r),t},n)}function iU(e,t){return iz(e,t)}let iH=(e,t)=>({id:e,type:"select",selected:t});function iK(e,t){return e.reduce((e,n)=>{let i=t.includes(n.id);return!n.selected&&i?(n.selected=!0,e.push(iH(n.id,!0))):n.selected&&!i&&(n.selected=!1,e.push(iH(n.id,!1))),e},[])}let iW=(e,t)=>n=>{n.target===t.current&&(null==e||e(n))},iX=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),iY=(0,d.memo)(e=>{let{isSelecting:t,selectionMode:n=o.Full,panOnDrag:i,onSelectionStart:r,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:l,onPaneScroll:u,onPaneMouseEnter:c,onPaneMouseMove:f,onPaneMouseLeave:p,children:m}=e,g=(0,d.useRef)(null),v=t9(),y=(0,d.useRef)(0),x=(0,d.useRef)(0),b=(0,d.useRef)(),{userSelectionActive:S,elementsSelectable:E,dragging:_}=t6(iX,w),M=()=>{v.setState({userSelectionActive:!1,userSelectionRect:null}),y.current=0,x.current=0},P=e=>{null==s||s(e),v.getState().resetSelectedElements(),v.setState({nodesSelectionActive:!1})},A=E&&(t||S);return d.default.createElement("div",{className:h(["react-flow__pane",{dragging:_,selection:t}]),onClick:A?void 0:iW(P,g),onContextMenu:iW(e=>{if(Array.isArray(i)&&(null==i?void 0:i.includes(2)))return void e.preventDefault();null==l||l(e)},g),onWheel:iW(u?e=>u(e):void 0,g),onMouseEnter:A?void 0:c,onMouseDown:A?e=>{let{resetSelectedElements:n,domNode:i}=v.getState();if(b.current=null==i?void 0:i.getBoundingClientRect(),!E||!t||0!==e.button||e.target!==g.current||!b.current)return;let{x:o,y:a}=ng(e,b.current);n(),v.setState({userSelectionRect:{width:0,height:0,startX:o,startY:a,x:o,y:a}}),null==r||r(e)}:void 0,onMouseMove:A?e=>{var i,r;let{userSelectionRect:a,nodeInternals:s,edges:l,transform:u,onNodesChange:c,onEdgesChange:d,nodeOrigin:h,getNodes:f}=v.getState();if(!t||!b.current||!a)return;v.setState({userSelectionActive:!0,nodesSelectionActive:!1});let p=ng(e,b.current),m=null!=(i=a.startX)?i:0,g=null!=(r=a.startY)?r:0,w={...a,x:p.x<m?p.x:m,y:p.y<g?p.y:g,width:Math.abs(p.x-m),height:Math.abs(p.y-g)},S=f(),E=nU(s,w,u,n===o.Partial,!0,h),_=nH(E,l).map(e=>e.id),M=E.map(e=>e.id);if(y.current!==M.length){y.current=M.length;let e=iK(S,M);e.length&&(null==c||c(e))}if(x.current!==_.length){x.current=_.length;let e=iK(l,_);e.length&&(null==d||d(e))}v.setState({userSelectionRect:w})}:f,onMouseUp:A?e=>{if(0!==e.button)return;let{userSelectionRect:t}=v.getState();!S&&t&&e.target===g.current&&(null==P||P(e)),v.setState({nodesSelectionActive:y.current>0}),M(),null==a||a(e)}:void 0,onMouseLeave:A?e=>{S&&(v.setState({nodesSelectionActive:y.current>0}),null==a||a(e)),M()}:p,ref:g,style:iN},m,d.default.createElement(iB,null))});function iq(e,t,n){let i=e;do{if(null==i?void 0:i.matches(t))return!0;if(i===n.current)break;i=i.parentElement}while(i)return!1}function iZ(e,t,n,i){var r;let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0],a=arguments.length>5?arguments[5]:void 0,s=(r=e.extent||i)&&"parent"!==r?[r[0],[r[1][0]-(e.width||0),r[1][1]-(e.height||0)]]:r,l=s,u=e.parentNode||e.parentId;if("parent"!==e.extent||e.expandParent){if(e.extent&&u&&"parent"!==e.extent){let{x:t,y:i}=nF(n.get(u),o).positionAbsolute;l=[[e.extent[0][0]+t,e.extent[0][1]+i],[e.extent[1][0]+t,e.extent[1][1]+i]]}}else if(u&&e.width&&e.height){let t=n.get(u),{x:i,y:r}=nF(t,o).positionAbsolute;l=t&&nd(i)&&nd(r)&&nd(t.width)&&nd(t.height)?[[i+e.width*o[0],r+e.height*o[1]],[i+t.width-e.width+e.width*o[0],r+t.height-e.height+e.height*o[1]]]:l}else null==a||a("005",t3.error005()),l=s;let c={x:0,y:0};u&&(c=nF(n.get(u),o).positionAbsolute);let d=l&&"parent"!==l?nr(t,l):t;return{position:{x:d.x-c.x,y:d.y-c.y},positionAbsolute:d}}function iG(e){let{nodeId:t,dragItems:n,nodeInternals:i}=e,r=n.map(e=>({...i.get(e.id),position:e.position,positionAbsolute:e.positionAbsolute}));return[t?r.find(e=>e.id===t):r[0],r]}iY.displayName="Pane";let i$=(e,t,n,i)=>{let r=t.querySelectorAll(e);if(!r||!r.length)return null;let o=Array.from(r),a=t.getBoundingClientRect(),s={x:a.width*i[0],y:a.height*i[1]};return o.map(e=>{let t=e.getBoundingClientRect();return{id:e.getAttribute("data-handleid"),position:e.getAttribute("data-handlepos"),x:(t.left-a.left-s.x)/n,y:(t.top-a.top-s.y)/n,...nn(e)}})};function iQ(e,t,n){return void 0===n?n:i=>{let r=t().nodeInternals.get(e);r&&n(i,{...r})}}function iJ(e){let{id:t,store:n,unselect:i=!1,nodeRef:r}=e,{addSelectedNodes:o,unselectNodesAndEdges:a,multiSelectionActive:s,nodeInternals:l,onError:u}=n.getState(),c=l.get(t);if(!c){null==u||u("012",t3.error012(t));return}n.setState({nodesSelectionActive:!1}),c.selected?(i||c.selected&&s)&&(a({nodes:[c],edges:[]}),requestAnimationFrame(()=>{var e;return null==r||null==(e=r.current)?void 0:e.blur()})):o([t])}function i0(e){return(t,n,i)=>null==e?void 0:e(t,i)}function i1(e){let{nodeRef:t,disabled:n=!1,noDragClassName:i,handleSelector:r,nodeId:o,isSelectable:a,selectNodesOnDrag:s}=e,l=t9(),[u,c]=(0,d.useState)(!1),h=(0,d.useRef)([]),f=(0,d.useRef)({x:null,y:null}),p=(0,d.useRef)(0),m=(0,d.useRef)(null),g=(0,d.useRef)({x:0,y:0}),v=(0,d.useRef)(null),y=(0,d.useRef)(!1),x=(0,d.useRef)(!1),b=(0,d.useRef)(!1),w=function(){let e=t9();return(0,d.useCallback)(t=>{let{sourceEvent:n}=t,{transform:i,snapGrid:r,snapToGrid:o}=e.getState(),a=n.touches?n.touches[0].clientX:n.clientX,s=n.touches?n.touches[0].clientY:n.clientY,l={x:(a-i[0])/i[2],y:(s-i[1])/i[2]};return{xSnapped:o?r[0]*Math.round(l.x/r[0]):l.x,ySnapped:o?r[1]*Math.round(l.y/r[1]):l.y,...l}},[])}();return(0,d.useEffect)(()=>{if(null==t?void 0:t.current){let e=ef(t.current),u=e=>{let{x:t,y:n}=e,{nodeInternals:i,onNodeDrag:r,onSelectionDrag:a,updateNodePositions:s,nodeExtent:u,snapGrid:d,snapToGrid:p,nodeOrigin:m,onError:g}=l.getState();f.current={x:t,y:n};let y=!1,x={x:0,y:0,x2:0,y2:0};if(h.current.length>1&&u&&(x=nl(nz(h.current,m))),h.current=h.current.map(e=>{let r={x:t-e.distance.x,y:n-e.distance.y};p&&(r.x=d[0]*Math.round(r.x/d[0]),r.y=d[1]*Math.round(r.y/d[1]));let o=[[u[0][0],u[0][1]],[u[1][0],u[1][1]]];if(h.current.length>1&&u&&!e.extent){var a,s;o[0][0]=e.positionAbsolute.x-x.x+u[0][0],o[1][0]=e.positionAbsolute.x+(null!=(a=e.width)?a:0)-x.x2+u[1][0],o[0][1]=e.positionAbsolute.y-x.y+u[0][1],o[1][1]=e.positionAbsolute.y+(null!=(s=e.height)?s:0)-x.y2+u[1][1]}let l=iZ(e,r,i,o,m,g);return y=y||e.position.x!==l.position.x||e.position.y!==l.position.y,e.position=l.position,e.positionAbsolute=l.positionAbsolute,e}),!y)return;s(h.current,!0,!0),c(!0);let b=o?r:i0(a);if(b&&v.current){let[e,t]=iG({nodeId:o,dragItems:h.current,nodeInternals:i});b(v.current,e,t)}},d=()=>{if(!m.current)return;let[e,t]=na(g.current,m.current);if(0!==e||0!==t){var n,i;let{transform:r,panBy:o}=l.getState();f.current.x=(null!=(n=f.current.x)?n:0)-e/r[2],f.current.y=(null!=(i=f.current.y)?i:0)-t/r[2],o({x:e,y:t})&&u(f.current)}p.current=requestAnimationFrame(d)},S=e=>{var n;let{nodeInternals:i,multiSelectionActive:r,nodesDraggable:u,unselectNodesAndEdges:c,onNodeDragStart:d,onSelectionDragStart:p}=l.getState();x.current=!0;let m=o?d:i0(p);(!s||!a)&&!r&&o&&((null==(n=i.get(o))?void 0:n.selected)||c()),o&&a&&s&&iJ({id:o,store:l,nodeRef:t});let g=w(e);if(f.current=g,h.current=Array.from(i.values()).filter(e=>(e.selected||e.id===o)&&(!e.parentNode||e.parentId||!function e(t,n){let i=t.parentNode||t.parentId;if(!i)return!1;let r=n.get(i);return!!r&&(!!r.selected||e(r,n))}(e,i))&&(e.draggable||u&&void 0===e.draggable)).map(e=>{var t,n,i,r;return{id:e.id,position:e.position||{x:0,y:0},positionAbsolute:e.positionAbsolute||{x:0,y:0},distance:{x:g.x-(null!=(i=null==(t=e.positionAbsolute)?void 0:t.x)?i:0),y:g.y-(null!=(r=null==(n=e.positionAbsolute)?void 0:n.y)?r:0)},delta:{x:0,y:0},extent:e.extent,parentNode:e.parentNode||e.parentId,parentId:e.parentNode||e.parentId,width:e.width,height:e.height,expandParent:e.expandParent}}),m&&h.current){let[t,n]=iG({nodeId:o,dragItems:h.current,nodeInternals:i});m(e.sourceEvent,t,n)}};if(n)e.on(".drag",null);else{let n=(function(){var e,t,n,i,r=tQ,o=tJ,a=t0,s=t1,l={},u=E("start","drag","end"),c=0,d=0;function h(e){e.on("mousedown.drag",f).filter(s).on("touchstart.drag",g).on("touchmove.drag",v,ep).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(a,s){if(!i&&r.call(this,a,s)){var l=x(this,o.call(this,a,s),a,s,"mouse");l&&(ef(a.view).on("mousemove.drag",p,em).on("mouseup.drag",m,em),ey(a.view),eg(a),n=!1,e=a.clientX,t=a.clientY,l("start",a))}}function p(i){if(ev(i),!n){var r=i.clientX-e,o=i.clientY-t;n=r*r+o*o>d}l.mouse("drag",i)}function m(e){ef(e.view).on("mousemove.drag mouseup.drag",null),ex(e.view,n),ev(e),l.mouse("end",e)}function g(e,t){if(r.call(this,e,t)){var n,i,a=e.changedTouches,s=o.call(this,e,t),l=a.length;for(n=0;n<l;++n)(i=x(this,s,e,t,a[n].identifier,a[n]))&&(eg(e),i("start",e,a[n]))}}function v(e){var t,n,i=e.changedTouches,r=i.length;for(t=0;t<r;++t)(n=l[i[t].identifier])&&(ev(e),n("drag",e,i[t]))}function y(e){var t,n,r=e.changedTouches,o=r.length;for(i&&clearTimeout(i),i=setTimeout(function(){i=null},500),t=0;t<o;++t)(n=l[r[t].identifier])&&(eg(e),n("end",e,r[t]))}function x(e,t,n,i,r,o){var s,d,f,p=u.copy(),m=eS(o||n,t);if(null!=(f=a.call(e,new t$("beforestart",{sourceEvent:n,target:h,identifier:r,active:c,x:m[0],y:m[1],dx:0,dy:0,dispatch:p}),i)))return s=f.x-m[0]||0,d=f.y-m[1]||0,function n(o,a,u){var g,v=m;switch(o){case"start":l[r]=n,g=c++;break;case"end":delete l[r],--c;case"drag":m=eS(u||a,t),g=c}p.call(o,e,new t$(o,{sourceEvent:a,subject:f,target:h,identifier:r,active:g,x:m[0]+s,y:m[1]+d,dx:m[0]-v[0],dy:m[1]-v[1],dispatch:p}),i)}}return h.filter=function(e){return arguments.length?(r="function"==typeof e?e:tG(!!e),h):r},h.container=function(e){return arguments.length?(o="function"==typeof e?e:tG(e),h):o},h.subject=function(e){return arguments.length?(a="function"==typeof e?e:tG(e),h):a},h.touchable=function(e){return arguments.length?(s="function"==typeof e?e:tG(!!e),h):s},h.on=function(){var e=u.on.apply(u,arguments);return e===u?h:e},h.clickDistance=function(e){return arguments.length?(d=(e*=1)*e,h):Math.sqrt(d)},h})().on("start",e=>{let{domNode:t,nodeDragThreshold:n}=l.getState();0===n&&S(e),b.current=!1,f.current=w(e),m.current=(null==t?void 0:t.getBoundingClientRect())||null,g.current=ng(e.sourceEvent,m.current)}).on("drag",e=>{let t=w(e),{autoPanOnNodeDrag:n,nodeDragThreshold:i}=l.getState();if("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1&&(b.current=!0),!b.current){if(!y.current&&x.current&&n&&(y.current=!0,d()),!x.current){var r,o,a,s;let n=t.xSnapped-(null!=(a=null==f||null==(r=f.current)?void 0:r.x)?a:0),l=t.ySnapped-(null!=(s=null==f||null==(o=f.current)?void 0:o.y)?s:0);Math.sqrt(n*n+l*l)>i&&S(e)}(f.current.x!==t.xSnapped||f.current.y!==t.ySnapped)&&h.current&&x.current&&(v.current=e.sourceEvent,g.current=ng(e.sourceEvent,m.current),u(t))}}).on("end",e=>{if(x.current&&!b.current&&(c(!1),y.current=!1,x.current=!1,cancelAnimationFrame(p.current),h.current)){let{updateNodePositions:t,nodeInternals:n,onNodeDragStop:i,onSelectionDragStop:r}=l.getState(),a=o?i:i0(r);if(t(h.current,!1,!1),a){let[t,i]=iG({nodeId:o,dragItems:h.current,nodeInternals:n});a(e.sourceEvent,t,i)}}}).filter(e=>{let n=e.target;return!e.button&&(!i||!iq(n,".".concat(i),t))&&(!r||iq(n,r,t))});return e.call(n),()=>{e.on(".drag",null)}}}},[t,n,i,r,a,l,o,s,w]),u}function i2(){let e=t9();return(0,d.useCallback)(t=>{let{nodeInternals:n,nodeExtent:i,updateNodePositions:r,getNodes:o,snapToGrid:a,snapGrid:s,onError:l,nodesDraggable:u}=e.getState(),c=o().filter(e=>e.selected&&(e.draggable||u&&void 0===e.draggable)),d=a?s[0]:5,h=a?s[1]:5,f=t.isShiftPressed?4:1,p=t.x*d*f,m=t.y*h*f;r(c.map(e=>{if(e.positionAbsolute){let t={x:e.positionAbsolute.x+p,y:e.positionAbsolute.y+m};a&&(t.x=s[0]*Math.round(t.x/s[0]),t.y=s[1]*Math.round(t.y/s[1]));let{positionAbsolute:r,position:o}=iZ(e,t,n,i,void 0,l);e.position=o,e.positionAbsolute=r}return e}),!0,!1)},[])}let i5={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var i3=e=>{let t=t=>{let{id:n,type:i,data:r,xPos:o,yPos:a,xPosOrigin:s,yPosOrigin:l,selected:u,onClick:c,onMouseEnter:f,onMouseMove:p,onMouseLeave:m,onContextMenu:g,onDoubleClick:v,style:y,className:x,isDraggable:b,isSelectable:w,isConnectable:S,isFocusable:E,selectNodesOnDrag:_,sourcePosition:M,targetPosition:P,hidden:A,resizeObserver:C,dragHandle:T,zIndex:k,isParent:N,noDragClassName:R,noPanClassName:D,initialized:j,disableKeyboardA11y:O,ariaLabel:L,rfId:V,hasHandleBounds:I}=t,B=t9(),F=(0,d.useRef)(null),z=(0,d.useRef)(null),U=(0,d.useRef)(M),H=(0,d.useRef)(P),K=(0,d.useRef)(i),W=w||b||c||f||p||m,X=i2(),Y=iQ(n,B.getState,f),q=iQ(n,B.getState,p),Z=iQ(n,B.getState,m),G=iQ(n,B.getState,g),$=iQ(n,B.getState,v);(0,d.useEffect)(()=>()=>{z.current&&(null==C||C.unobserve(z.current),z.current=null)},[]),(0,d.useEffect)(()=>{if(F.current&&!A){let e=F.current;j&&I&&z.current===e||(z.current&&(null==C||C.unobserve(z.current)),null==C||C.observe(e),z.current=e)}},[A,j,I]),(0,d.useEffect)(()=>{let e=K.current!==i,t=U.current!==M,r=H.current!==P;F.current&&(e||t||r)&&(e&&(K.current=i),t&&(U.current=M),r&&(H.current=P),B.getState().updateNodeDimensions([{id:n,nodeElement:F.current,forceUpdate:!0}]))},[n,i,M,P]);let Q=i1({nodeRef:F,disabled:A||!b,noDragClassName:R,handleSelector:T,nodeId:n,isSelectable:w,selectNodesOnDrag:_});return A?null:d.default.createElement("div",{className:h(["react-flow__node","react-flow__node-".concat(i),{[D]:b},x,{selected:u,selectable:w,parent:N,dragging:Q}]),ref:F,style:{zIndex:k,transform:"translate(".concat(s,"px,").concat(l,"px)"),pointerEvents:W?"all":"none",visibility:j?"visible":"hidden",...y},"data-id":n,"data-testid":"rf__node-".concat(n),onMouseEnter:Y,onMouseMove:q,onMouseLeave:Z,onContextMenu:G,onClick:e=>{let{nodeDragThreshold:t}=B.getState();if(w&&(!_||!b||t>0)&&iJ({id:n,store:B,nodeRef:F}),c){let t=B.getState().nodeInternals.get(n);t&&c(e,{...t})}},onDoubleClick:$,onKeyDown:E?e=>{!nm(e)&&!O&&(nf.includes(e.key)&&w?iJ({id:n,store:B,unselect:"Escape"===e.key,nodeRef:F}):b&&u&&Object.prototype.hasOwnProperty.call(i5,e.key)&&(B.setState({ariaLiveMessage:"Moved selected node ".concat(e.key.replace("Arrow","").toLowerCase(),". New position, x: ").concat(~~o,", y: ").concat(~~a)}),X({x:i5[e.key].x,y:i5[e.key].y,isShiftPressed:e.shiftKey})))}:void 0,tabIndex:E?0:void 0,role:E?"button":void 0,"aria-describedby":O?void 0:"".concat(ip,"-").concat(V),"aria-label":L},d.default.createElement(nL,{value:n},d.default.createElement(e,{id:n,data:r,type:i,xPos:o,yPos:a,selected:u,isConnectable:S,sourcePosition:M,targetPosition:P,dragging:Q,dragHandle:T,zIndex:k})))};return t.displayName="NodeWrapper",(0,d.memo)(t)};let i4=e=>({...nz(e.getNodes().filter(e=>e.selected),e.nodeOrigin),transformString:"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],")"),userSelectionActive:e.userSelectionActive});var i6=(0,d.memo)(function(e){let{onSelectionContextMenu:t,noPanClassName:n,disableKeyboardA11y:i}=e,r=t9(),{width:o,height:a,x:s,y:l,transformString:u,userSelectionActive:c}=t6(i4,w),f=i2(),p=(0,d.useRef)(null);if((0,d.useEffect)(()=>{if(!i){var e;null==(e=p.current)||e.focus({preventScroll:!0})}},[i]),i1({nodeRef:p}),c||!o||!a)return null;let m=t?e=>{t(e,r.getState().getNodes().filter(e=>e.selected))}:void 0;return d.default.createElement("div",{className:h(["react-flow__nodesselection","react-flow__container",n]),style:{transform:u}},d.default.createElement("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:i?void 0:-1,onKeyDown:i?void 0:e=>{Object.prototype.hasOwnProperty.call(i5,e.key)&&f({x:i5[e.key].x,y:i5[e.key].y,isShiftPressed:e.shiftKey})},style:{width:o,height:a,top:l,left:s}}))});let i9=e=>e.nodesSelectionActive,i8=e=>{let{children:t,onPaneClick:n,onPaneMouseEnter:i,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:s,deleteKeyCode:l,onMove:u,onMoveStart:c,onMoveEnd:h,selectionKeyCode:f,selectionOnDrag:p,selectionMode:m,onSelectionStart:g,onSelectionEnd:v,multiSelectionKeyCode:y,panActivationKeyCode:x,zoomActivationKeyCode:b,elementsSelectable:w,zoomOnScroll:S,zoomOnPinch:E,panOnScroll:_,panOnScrollSpeed:M,panOnScrollMode:P,zoomOnDoubleClick:A,panOnDrag:C,defaultViewport:T,translateExtent:k,minZoom:N,maxZoom:R,preventScrolling:D,onSelectionContextMenu:j,noWheelClassName:O,noPanClassName:L,disableKeyboardA11y:V}=e,I=t6(i9),B=ix(f),F=ix(x),z=F||C,U=F||_,H=B||p&&!0!==z;return(e=>{let{deleteKeyCode:t,multiSelectionKeyCode:n}=e,i=t9(),{deleteElements:r}=iT(),o=ix(t,ik),a=ix(n);(0,d.useEffect)(()=>{if(o){let{edges:e,getNodes:t}=i.getState();r({nodes:t().filter(e=>e.selected),edges:e.filter(e=>e.selected)}),i.setState({nodesSelectionActive:!1})}},[o]),(0,d.useEffect)(()=>{i.setState({multiSelectionActive:a})},[a])})({deleteKeyCode:l,multiSelectionKeyCode:y}),d.default.createElement(iV,{onMove:u,onMoveStart:c,onMoveEnd:h,onPaneContextMenu:a,elementsSelectable:w,zoomOnScroll:S,zoomOnPinch:E,panOnScroll:U,panOnScrollSpeed:M,panOnScrollMode:P,zoomOnDoubleClick:A,panOnDrag:!B&&z,defaultViewport:T,translateExtent:k,minZoom:N,maxZoom:R,zoomActivationKeyCode:b,preventScrolling:D,noWheelClassName:O,noPanClassName:L},d.default.createElement(iY,{onSelectionStart:g,onSelectionEnd:v,onPaneClick:n,onPaneMouseEnter:i,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:s,panOnDrag:z,isSelecting:!!H,selectionMode:m},t,I&&d.default.createElement(i6,{onSelectionContextMenu:j,noPanClassName:L,disableKeyboardA11y:V})))};i8.displayName="FlowRenderer";var i7=(0,d.memo)(i8);function re(e){let t={input:i3(e.input||n6),default:i3(e.default||n3),output:i3(e.output||n8),group:i3(e.group||n7)},n=Object.keys(e).filter(e=>!["input","default","output","group"].includes(e)).reduce((t,n)=>(t[n]=i3(e[n]||n3),t),{});return{...t,...n}}let rt=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),rn=e=>{let{nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:r,updateNodeDimensions:o,onError:a}=t6(rt,w),s=function(e){return t6((0,d.useCallback)(t=>e?nU(t.nodeInternals,{x:0,y:0,width:t.width,height:t.height},t.transform,!0):t.getNodes(),[e]))}(e.onlyRenderVisibleElements),u=(0,d.useRef)(),c=(0,d.useMemo)(()=>{if("undefined"==typeof ResizeObserver)return null;let e=new ResizeObserver(e=>{o(e.map(e=>({id:e.target.getAttribute("data-id"),nodeElement:e.target,forceUpdate:!0})))});return u.current=e,e},[]);return(0,d.useEffect)(()=>()=>{var e;null==u||null==(e=u.current)||e.disconnect()},[]),d.default.createElement("div",{className:"react-flow__nodes",style:iN},s.map(o=>{var s,u,h,f,p,m,g,v;let y=o.type||"default";e.nodeTypes[y]||(null==a||a("003",t3.error003(y)),y="default");let x=e.nodeTypes[y]||e.nodeTypes.default,b=!!(o.draggable||t&&void 0===o.draggable),w=!!(o.selectable||r&&void 0===o.selectable),S=!!(o.connectable||n&&void 0===o.connectable),E=!!(o.focusable||i&&void 0===o.focusable),_=e.nodeExtent?nr(o.positionAbsolute,e.nodeExtent):o.positionAbsolute,M=null!=(f=null==_?void 0:_.x)?f:0,P=null!=(p=null==_?void 0:_.y)?p:0,A=(e=>{let{x:t,y:n,width:i,height:r,origin:o}=e;return!i||!r||o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:t,y:n}:{x:t-i*o[0],y:n-r*o[1]}})({x:M,y:P,width:null!=(m=o.width)?m:0,height:null!=(g=o.height)?g:0,origin:e.nodeOrigin});return d.default.createElement(x,{key:o.id,id:o.id,className:o.className,style:o.style,type:y,data:o.data,sourcePosition:o.sourcePosition||l.Bottom,targetPosition:o.targetPosition||l.Top,hidden:o.hidden,xPos:M,yPos:P,xPosOrigin:A.x,yPosOrigin:A.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!o.selected,isDraggable:b,isSelectable:w,isConnectable:S,isFocusable:E,resizeObserver:c,dragHandle:o.dragHandle,zIndex:null!=(v=null==(s=o[nh])?void 0:s.z)?v:0,isParent:!!(null==(u=o[nh])?void 0:u.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!o.width&&!!o.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:o.ariaLabel,hasHandleBounds:!!(null==(h=o[nh])?void 0:h.handleBounds)})}))};rn.displayName="NodeRenderer";var ri=(0,d.memo)(rn);let rr="react-flow__edgeupdater",ro=e=>{let{position:t,centerX:n,centerY:i,radius:r=10,onMouseDown:o,onMouseEnter:a,onMouseOut:s,type:u}=e;return d.default.createElement("circle",{onMouseDown:o,onMouseEnter:a,onMouseOut:s,className:h([rr,"".concat(rr,"-").concat(u)]),cx:((e,t,n)=>n===l.Left?e-t:n===l.Right?e+t:e)(n,r,t),cy:((e,t,n)=>n===l.Top?e-t:n===l.Bottom?e+t:e)(i,r,t),r:r,stroke:"transparent",fill:"transparent"})},ra=()=>!0;var rs=e=>{let t=t=>{let{id:n,className:i,type:r,data:o,onClick:a,onEdgeDoubleClick:s,selected:l,animated:u,label:c,labelStyle:f,labelShowBg:p,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:v,style:y,source:x,target:b,sourceX:w,sourceY:S,targetX:E,targetY:_,sourcePosition:M,targetPosition:P,elementsSelectable:A,hidden:C,sourceHandleId:T,targetHandleId:k,onContextMenu:N,onMouseEnter:R,onMouseMove:D,onMouseLeave:j,reconnectRadius:O,onReconnect:L,onReconnectStart:V,onReconnectEnd:I,markerEnd:B,markerStart:F,rfId:z,ariaLabel:U,isFocusable:H,isReconnectable:K,pathOptions:W,interactionWidth:X,disableKeyboardA11y:Y}=t,q=(0,d.useRef)(null),[Z,G]=(0,d.useState)(!1),[$,Q]=(0,d.useState)(!1),J=t9(),ee=(0,d.useMemo)(()=>"url('#".concat(nV(F,z),"')"),[F,z]),et=(0,d.useMemo)(()=>"url('#".concat(nV(B,z),"')"),[B,z]);if(C)return null;let en=nx(n,J.getState,s),ei=nx(n,J.getState,N),er=nx(n,J.getState,R),eo=nx(n,J.getState,D),ea=nx(n,J.getState,j),es=(e,t)=>{if(0!==e.button)return;let{edges:i,isValidConnection:r}=J.getState(),o=t?b:x,a=(t?k:T)||null,s=t?"target":"source",l=i.find(e=>e.id===n);Q(!0),null==V||V(e,l,s),nQ({event:e,handleId:a,nodeId:o,onConnect:e=>null==L?void 0:L(l,e),isTarget:t,getState:J.getState,setState:J.setState,isValidConnection:r||ra,edgeUpdaterType:s,onReconnectEnd:e=>{Q(!1),null==I||I(e,l,s)}})},el=()=>G(!0),eu=()=>G(!1);return d.default.createElement("g",{className:h(["react-flow__edge","react-flow__edge-".concat(r),i,{selected:l,animated:u,inactive:!A&&!a,updating:Z}]),onClick:e=>{let{edges:t,addSelectedEdges:i,unselectNodesAndEdges:r,multiSelectionActive:o}=J.getState(),s=t.find(e=>e.id===n);if(s){if(A)if(J.setState({nodesSelectionActive:!1}),s.selected&&o){var l;r({nodes:[],edges:[s]}),null==(l=q.current)||l.blur()}else i([n]);a&&a(e,s)}},onDoubleClick:en,onContextMenu:ei,onMouseEnter:er,onMouseMove:eo,onMouseLeave:ea,onKeyDown:H?e=>{if(!Y&&nf.includes(e.key)&&A){let{unselectNodesAndEdges:i,addSelectedEdges:r,edges:o}=J.getState();if("Escape"===e.key){var t;null==(t=q.current)||t.blur(),i({edges:[o.find(e=>e.id===n)]})}else r([n])}}:void 0,tabIndex:H?0:void 0,role:H?"button":"img","data-testid":"rf__edge-".concat(n),"aria-label":null===U?void 0:U||"Edge from ".concat(x," to ").concat(b),"aria-describedby":H?"".concat(im,"-").concat(z):void 0,ref:q},!$&&d.default.createElement(e,{id:n,source:x,target:b,selected:l,animated:u,label:c,labelStyle:f,labelShowBg:p,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:v,data:o,style:y,sourceX:w,sourceY:S,targetX:E,targetY:_,sourcePosition:M,targetPosition:P,sourceHandleId:T,targetHandleId:k,markerStart:ee,markerEnd:et,pathOptions:W,interactionWidth:X}),K&&d.default.createElement(d.default.Fragment,null,("source"===K||!0===K)&&d.default.createElement(ro,{position:M,centerX:w,centerY:S,radius:O,onMouseDown:e=>es(e,!0),onMouseEnter:el,onMouseOut:eu,type:"source"}),("target"===K||!0===K)&&d.default.createElement(ro,{position:P,centerX:E,centerY:_,radius:O,onMouseDown:e=>es(e,!1),onMouseEnter:el,onMouseOut:eu,type:"target"})))};return t.displayName="EdgeWrapper",(0,d.memo)(t)};function rl(e){let t={default:rs(e.default||nj),straight:rs(e.bezier||nk),step:rs(e.step||nT),smoothstep:rs(e.step||nC),simplebezier:rs(e.simplebezier||n_)},n=Object.keys(e).filter(e=>!["default","bezier"].includes(e)).reduce((t,n)=>(t[n]=rs(e[n]||nj),t),{});return{...t,...n}}function ru(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=((null==n?void 0:n.x)||0)+t.x,r=((null==n?void 0:n.y)||0)+t.y,o=(null==n?void 0:n.width)||t.width,a=(null==n?void 0:n.height)||t.height;switch(e){case l.Top:return{x:i+o/2,y:r};case l.Right:return{x:i+o,y:r+a/2};case l.Bottom:return{x:i+o/2,y:r+a};case l.Left:return{x:i,y:r+a/2}}}function rc(e,t){return e?1!==e.length&&t?t&&e.find(e=>e.id===t)||null:e[0]:null}function rd(e){var t,n,i,r,o;let a=(null==e||null==(t=e[nh])?void 0:t.handleBounds)||null,s=a&&(null==e?void 0:e.width)&&(null==e?void 0:e.height)&&void 0!==(null==e||null==(n=e.positionAbsolute)?void 0:n.x)&&void 0!==(null==e||null==(i=e.positionAbsolute)?void 0:i.y);return[{x:(null==e||null==(r=e.positionAbsolute)?void 0:r.x)||0,y:(null==e||null==(o=e.positionAbsolute)?void 0:o.y)||0,width:(null==e?void 0:e.width)||0,height:(null==e?void 0:e.height)||0},a,!!s]}let rh=[{level:0,isMaxLevel:!0,edges:[]}],rf={[s.Arrow]:e=>{let{color:t="none",strokeWidth:n=1}=e;return d.default.createElement("polyline",{style:{stroke:t,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"})},[s.ArrowClosed]:e=>{let{color:t="none",strokeWidth:n=1}=e;return d.default.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})}},rp=e=>{let{id:t,type:n,color:i,width:r=12.5,height:o=12.5,markerUnits:a="strokeWidth",strokeWidth:s,orient:l="auto-start-reverse"}=e,u=function(e){let t=t9();return(0,d.useMemo)(()=>{if(!Object.prototype.hasOwnProperty.call(rf,e)){var n,i;return null==(n=(i=t.getState()).onError)||n.call(i,"009",t3.error009(e)),null}return rf[e]},[e])}(n);return u?d.default.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:"".concat(r),markerHeight:"".concat(o),viewBox:"-10 -10 20 20",markerUnits:a,orient:l,refX:"0",refY:"0"},d.default.createElement(u,{color:i,strokeWidth:s})):null},rm=e=>{let{defaultColor:t,rfId:n}=e,i=t6((0,d.useCallback)((e=>{let{defaultColor:t,rfId:n}=e;return e=>{let i=[];return e.edges.reduce((e,r)=>([r.markerStart,r.markerEnd].forEach(r=>{if(r&&"object"==typeof r){let o=nV(r,n);i.includes(o)||(e.push({id:o,color:r.color||t,...r}),i.push(o))}}),e),[]).sort((e,t)=>e.id.localeCompare(t.id))}})({defaultColor:t,rfId:n}),[t,n]),(e,t)=>!(e.length!==t.length||e.some((e,n)=>e.id!==t[n].id)));return d.default.createElement("defs",null,i.map(e=>d.default.createElement(rp,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient})))};rm.displayName="MarkerDefinitions";var rg=(0,d.memo)(rm);let rv=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),ry=e=>{let{defaultMarkerColor:t,onlyRenderVisibleElements:n,elevateEdgesOnSelect:r,rfId:o,edgeTypes:a,noPanClassName:s,onEdgeContextMenu:u,onEdgeMouseEnter:c,onEdgeMouseMove:f,onEdgeMouseLeave:p,onEdgeClick:m,onEdgeDoubleClick:g,onReconnect:v,onReconnectStart:y,onReconnectEnd:x,reconnectRadius:b,children:S,disableKeyboardA11y:E}=e,{edgesFocusable:_,edgesUpdatable:M,elementsSelectable:P,width:A,height:C,connectionMode:T,nodeInternals:k,onError:N}=t6(rv,w),R=function(e,t,n){return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=-1,r=Object.entries(e.reduce((e,r)=>{let o=nd(r.zIndex),a=o?r.zIndex:0;if(n){var s,l;let e=t.get(r.target),n=t.get(r.source),i=r.selected||(null==e?void 0:e.selected)||(null==n?void 0:n.selected),u=Math.max((null==n||null==(s=n[nh])?void 0:s.z)||0,(null==e||null==(l=e[nh])?void 0:l.z)||0,1e3);a=(o?r.zIndex:0)+(i?u:0)}return e[a]?e[a].push(r):e[a]=[r],i=a>i?a:i,e},{})).map(e=>{let[t,n]=e,r=+t;return{edges:n,level:r,isMaxLevel:r===i}});return 0===r.length?rh:r}(t6((0,d.useCallback)(n=>e?n.edges.filter(e=>{let i=t.get(e.source),r=t.get(e.target);return(null==i?void 0:i.width)&&(null==i?void 0:i.height)&&(null==r?void 0:r.width)&&(null==r?void 0:r.height)&&function(e){let{sourcePos:t,targetPos:n,sourceWidth:i,sourceHeight:r,targetWidth:o,targetHeight:a,width:s,height:l,transform:u}=e,c={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x+i,n.x+o),y2:Math.max(t.y+r,n.y+a)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);let d=nl({x:(0-u[0])/u[2],y:(0-u[1])/u[2],width:s/u[2],height:l/u[2]});return Math.ceil(Math.max(0,Math.min(d.x2,c.x2)-Math.max(d.x,c.x))*Math.max(0,Math.min(d.y2,c.y2)-Math.max(d.y,c.y)))>0}({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:r.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:r.width,targetHeight:r.height,width:n.width,height:n.height,transform:n.transform})}):n.edges,[e,t])),t,n)}(n,k,r);return A?d.default.createElement(d.default.Fragment,null,R.map(e=>{let{level:n,edges:r,isMaxLevel:w}=e;return d.default.createElement("svg",{key:n,style:{zIndex:n},width:A,height:C,className:"react-flow__edges react-flow__container"},w&&d.default.createElement(rg,{defaultColor:t,rfId:o}),d.default.createElement("g",null,r.map(e=>{var t,n;let[r,w,S]=rd(k.get(e.source)),[A,C,R]=rd(k.get(e.target));if(!S||!R)return null;let D=e.type||"default";a[D]||(null==N||N("011",t3.error011(D)),D="default");let j=a[D]||a.default,O=T===i.Strict?C.target:(null!=(t=C.target)?t:[]).concat(null!=(n=C.source)?n:[]),L=rc(w.source,e.sourceHandle),V=rc(O,e.targetHandle),I=(null==L?void 0:L.position)||l.Bottom,B=(null==V?void 0:V.position)||l.Top,F=!!(e.focusable||_&&void 0===e.focusable),z=e.reconnectable||e.updatable;if(!L||!V)return null==N||N("008",t3.error008(L,e)),null;let{sourceX:U,sourceY:H,targetX:K,targetY:W}=((e,t,n,i,r,o)=>{let a=ru(n,e,t),s=ru(o,i,r);return{sourceX:a.x,sourceY:a.y,targetX:s.x,targetY:s.y}})(r,L,I,A,V,B);return d.default.createElement(j,{key:e.id,id:e.id,className:h([e.className,s]),type:D,data:e.data,selected:!!e.selected,animated:!!e.animated,hidden:!!e.hidden,label:e.label,labelStyle:e.labelStyle,labelShowBg:e.labelShowBg,labelBgStyle:e.labelBgStyle,labelBgPadding:e.labelBgPadding,labelBgBorderRadius:e.labelBgBorderRadius,style:e.style,source:e.source,target:e.target,sourceHandleId:e.sourceHandle,targetHandleId:e.targetHandle,markerEnd:e.markerEnd,markerStart:e.markerStart,sourceX:U,sourceY:H,targetX:K,targetY:W,sourcePosition:I,targetPosition:B,elementsSelectable:P,onContextMenu:u,onMouseEnter:c,onMouseMove:f,onMouseLeave:p,onClick:m,onEdgeDoubleClick:g,onReconnect:v,onReconnectStart:y,onReconnectEnd:x,reconnectRadius:b,rfId:o,ariaLabel:e.ariaLabel,isFocusable:F,isReconnectable:void 0!==v&&(z||M&&void 0===z),pathOptions:"pathOptions"in e?e.pathOptions:void 0,interactionWidth:e.interactionWidth,disableKeyboardA11y:E})})))}),S):null};ry.displayName="EdgeRenderer";var rx=(0,d.memo)(ry);let rb=e=>"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],")");function rw(e){let{children:t}=e,n=t6(rb);return d.default.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:n}},t)}let rS={[l.Left]:l.Right,[l.Right]:l.Left,[l.Top]:l.Bottom,[l.Bottom]:l.Top},rE=e=>{var t,n,r,o,s,l,u;let{nodeId:c,handleType:h,style:f,type:p=a.Bezier,CustomComponent:m,connectionStatus:g}=e,{fromNode:v,handleId:y,toX:x,toY:b,connectionMode:S}=t6((0,d.useCallback)(e=>({fromNode:e.nodeInternals.get(c),handleId:e.connectionHandleId,toX:(e.connectionPosition.x-e.transform[0])/e.transform[2],toY:(e.connectionPosition.y-e.transform[1])/e.transform[2],connectionMode:e.connectionMode}),[c]),w),E=null==v||null==(t=v[nh])?void 0:t.handleBounds,_=null==E?void 0:E[h];if(S===i.Loose&&(_=_||(null==E?void 0:E["source"===h?"target":"source"])),!v||!_)return null;let M=y?_.find(e=>e.id===y):_[0],P=M?M.x+M.width/2:(null!=(o=v.width)?o:0)/2,A=M?M.y+M.height/2:null!=(s=v.height)?s:0,C=(null!=(l=null==(n=v.positionAbsolute)?void 0:n.x)?l:0)+P,T=(null!=(u=null==(r=v.positionAbsolute)?void 0:r.y)?u:0)+A,k=null==M?void 0:M.position,N=k?rS[k]:null;if(!k||!N)return null;if(m)return d.default.createElement(m,{connectionLineType:p,connectionLineStyle:f,fromNode:v,fromHandle:M,fromX:C,fromY:T,toX:x,toY:b,fromPosition:k,toPosition:N,connectionStatus:g});let R="",D={sourceX:C,sourceY:T,sourcePosition:k,targetX:x,targetY:b,targetPosition:N};return p===a.Bezier?[R]=nD(D):p===a.Step?[R]=nA({...D,borderRadius:0}):p===a.SmoothStep?[R]=nA(D):p===a.SimpleBezier?[R]=nE(D):R="M".concat(C,",").concat(T," ").concat(x,",").concat(b),d.default.createElement("path",{d:R,fill:"none",className:"react-flow__connection-path",style:f})};rE.displayName="ConnectionLine";let r_=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function rM(e){let{containerStyle:t,style:n,type:i,component:r}=e,{nodeId:o,handleType:a,nodesConnectable:s,width:l,height:u,connectionStatus:c}=t6(r_,w);return o&&a&&l&&s?d.default.createElement("svg",{style:t,width:l,height:u,className:"react-flow__edges react-flow__connectionline react-flow__container"},d.default.createElement("g",{className:h(["react-flow__connection",c])},d.default.createElement(rE,{nodeId:o,handleType:a,style:n,type:i,CustomComponent:r,connectionStatus:c}))):null}function rP(e,t){return(0,d.useRef)(null),t9(),(0,d.useMemo)(()=>t(e),[e])}let rA=e=>{let{nodeTypes:t,edgeTypes:n,onMove:i,onMoveStart:r,onMoveEnd:o,onInit:a,onNodeClick:s,onEdgeClick:l,onNodeDoubleClick:u,onEdgeDoubleClick:c,onNodeMouseEnter:h,onNodeMouseMove:f,onNodeMouseLeave:p,onNodeContextMenu:m,onSelectionContextMenu:g,onSelectionStart:v,onSelectionEnd:y,connectionLineType:x,connectionLineStyle:b,connectionLineComponent:w,connectionLineContainerStyle:S,selectionKeyCode:E,selectionOnDrag:_,selectionMode:M,multiSelectionKeyCode:P,panActivationKeyCode:A,zoomActivationKeyCode:C,deleteKeyCode:T,onlyRenderVisibleElements:k,elementsSelectable:N,selectNodesOnDrag:R,defaultViewport:D,translateExtent:j,minZoom:O,maxZoom:L,preventScrolling:V,defaultMarkerColor:I,zoomOnScroll:B,zoomOnPinch:F,panOnScroll:z,panOnScrollSpeed:U,panOnScrollMode:H,zoomOnDoubleClick:K,panOnDrag:W,onPaneClick:X,onPaneMouseEnter:Y,onPaneMouseMove:q,onPaneMouseLeave:Z,onPaneScroll:G,onPaneContextMenu:$,onEdgeContextMenu:Q,onEdgeMouseEnter:J,onEdgeMouseMove:ee,onEdgeMouseLeave:et,onReconnect:en,onReconnectStart:ei,onReconnectEnd:er,reconnectRadius:eo,noDragClassName:ea,noWheelClassName:es,noPanClassName:el,elevateEdgesOnSelect:eu,disableKeyboardA11y:ec,nodeOrigin:ed,nodeExtent:eh,rfId:ef}=e,ep=rP(t,re),em=rP(n,rl);return!function(e){let t=iT(),n=(0,d.useRef)(!1);(0,d.useEffect)(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}(a),d.default.createElement(i7,{onPaneClick:X,onPaneMouseEnter:Y,onPaneMouseMove:q,onPaneMouseLeave:Z,onPaneContextMenu:$,onPaneScroll:G,deleteKeyCode:T,selectionKeyCode:E,selectionOnDrag:_,selectionMode:M,onSelectionStart:v,onSelectionEnd:y,multiSelectionKeyCode:P,panActivationKeyCode:A,zoomActivationKeyCode:C,elementsSelectable:N,onMove:i,onMoveStart:r,onMoveEnd:o,zoomOnScroll:B,zoomOnPinch:F,zoomOnDoubleClick:K,panOnScroll:z,panOnScrollSpeed:U,panOnScrollMode:H,panOnDrag:W,defaultViewport:D,translateExtent:j,minZoom:O,maxZoom:L,onSelectionContextMenu:g,preventScrolling:V,noDragClassName:ea,noWheelClassName:es,noPanClassName:el,disableKeyboardA11y:ec},d.default.createElement(rw,null,d.default.createElement(rx,{edgeTypes:em,onEdgeClick:l,onEdgeDoubleClick:c,onlyRenderVisibleElements:k,onEdgeContextMenu:Q,onEdgeMouseEnter:J,onEdgeMouseMove:ee,onEdgeMouseLeave:et,onReconnect:en,onReconnectStart:ei,onReconnectEnd:er,reconnectRadius:eo,defaultMarkerColor:I,noPanClassName:el,elevateEdgesOnSelect:!!eu,disableKeyboardA11y:ec,rfId:ef},d.default.createElement(rM,{style:b,type:x,component:w,containerStyle:S})),d.default.createElement("div",{className:"react-flow__edgelabel-renderer"}),d.default.createElement(ri,{nodeTypes:ep,onNodeClick:s,onNodeDoubleClick:u,onNodeMouseEnter:h,onNodeMouseMove:f,onNodeMouseLeave:p,onNodeContextMenu:m,selectNodesOnDrag:R,onlyRenderVisibleElements:k,noPanClassName:el,noDragClassName:ea,disableKeyboardA11y:ec,nodeOrigin:ed,nodeExtent:eh,rfId:ef})))};rA.displayName="GraphView";var rC=(0,d.memo)(rA);let rT=[[-1/0,-1/0],[1/0,1/0]],rk={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:rT,nodeExtent:rT,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:i.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:np,isValidConnection:void 0},rN=e=>{let{children:t}=e,n=(0,d.useRef)(null);return n.current||(n.current=((e,t)=>e?b(e,t):b)((e,t)=>({...rk,setNodes:n=>{let{nodeInternals:i,nodeOrigin:r,elevateNodesOnSelect:o}=t();e({nodeInternals:iE(n,i,r,o)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{let{defaultEdgeOptions:i={}}=t();e({edges:n.map(e=>({...i,...e}))})},setDefaultNodesAndEdges:(n,i)=>{let r=void 0!==n,o=void 0!==i;e({nodeInternals:r?iE(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map,edges:o?i:[],hasDefaultNodes:r,hasDefaultEdges:o})},updateNodeDimensions:n=>{let{onNodesChange:i,nodeInternals:r,fitViewOnInit:o,fitViewOnInitDone:a,fitViewOnInitOptions:s,domNode:l,nodeOrigin:u}=t(),c=null==l?void 0:l.querySelector(".react-flow__viewport");if(!c)return;let d=window.getComputedStyle(c),{m22:h}=new window.DOMMatrixReadOnly(d.transform),f=n.reduce((e,t)=>{let n=r.get(t.id);if(null==n?void 0:n.hidden)r.set(n.id,{...n,[nh]:{...n[nh],handleBounds:void 0}});else if(n){let i=nn(t.nodeElement);i.width&&i.height&&(n.width!==i.width||n.height!==i.height||t.forceUpdate)&&(r.set(n.id,{...n,[nh]:{...n[nh],handleBounds:{source:i$(".source",t.nodeElement,h,u),target:i$(".target",t.nodeElement,h,u)}},...i}),e.push({id:n.id,type:"dimensions",dimensions:i}))}return e},[]);iS(r,u);let p=a||o&&!a&&i_(t,{initial:!0,...s});e({nodeInternals:new Map(r),fitViewOnInitDone:p}),(null==f?void 0:f.length)>0&&(null==i||i(f))},updateNodePositions:function(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{triggerNodeChanges:r}=t();r(e.map(e=>{let t={id:e.id,type:"position",dragging:i};return n&&(t.positionAbsolute=e.positionAbsolute,t.position=e.position),t}))},triggerNodeChanges:n=>{let{onNodesChange:i,nodeInternals:r,hasDefaultNodes:o,nodeOrigin:a,getNodes:s,elevateNodesOnSelect:l}=t();(null==n?void 0:n.length)&&(o&&e({nodeInternals:iE(iU(n,s()),r,a,l)}),null==i||i(n))},addSelectedNodes:n=>{let i,{multiSelectionActive:r,edges:o,getNodes:a}=t(),s=null;r?i=n.map(e=>iH(e,!0)):(i=iK(a(),n),s=iK(o,[])),iM({changedNodes:i,changedEdges:s,get:t,set:e})},addSelectedEdges:n=>{let i,{multiSelectionActive:r,edges:o,getNodes:a}=t(),s=null;r?i=n.map(e=>iH(e,!0)):(i=iK(o,n),s=iK(a(),[])),iM({changedNodes:s,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:function(){let{nodes:n,edges:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{edges:r,getNodes:o}=t();iM({changedNodes:(n||o()).map(e=>(e.selected=!1,iH(e.id,!1))),changedEdges:(i||r).map(e=>iH(e.id,!1)),get:t,set:e})},setMinZoom:n=>{let{d3Zoom:i,maxZoom:r}=t();null==i||i.scaleExtent([n,r]),e({minZoom:n})},setMaxZoom:n=>{let{d3Zoom:i,minZoom:r}=t();null==i||i.scaleExtent([r,n]),e({maxZoom:n})},setTranslateExtent:n=>{var i;null==(i=t().d3Zoom)||i.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{let{edges:n,getNodes:i}=t();iM({changedNodes:i().filter(e=>e.selected).map(e=>iH(e.id,!1)),changedEdges:n.filter(e=>e.selected).map(e=>iH(e.id,!1)),get:t,set:e})},setNodeExtent:n=>{let{nodeInternals:i}=t();i.forEach(e=>{e.positionAbsolute=nr(e.position,n)}),e({nodeExtent:n,nodeInternals:new Map(i)})},panBy:e=>{let{transform:n,width:i,height:r,d3Zoom:o,d3Selection:a,translateExtent:s}=t();if(!o||!a||!e.x&&!e.y)return!1;let l=tz.translate(n[0]+e.x,n[1]+e.y).scale(n[2]),u=null==o?void 0:o.constrain()(l,[[0,0],[i,r]],s);return o.transform(a,u),n[0]!==u.x||n[1]!==u.y||n[2]!==u.k},cancelConnection:()=>e({connectionNodeId:rk.connectionNodeId,connectionHandleId:rk.connectionHandleId,connectionHandleType:rk.connectionHandleType,connectionStatus:rk.connectionStatus,connectionStartHandle:rk.connectionStartHandle,connectionEndHandle:rk.connectionEndHandle}),reset:()=>e({...rk})}),Object.is)),d.default.createElement(t5,{value:n.current},t)};rN.displayName="ReactFlowProvider";let rR=e=>{let{children:t}=e;return(0,d.useContext)(t2)?d.default.createElement(d.default.Fragment,null,t):d.default.createElement(rN,null,t)};rR.displayName="ReactFlowWrapper";let rD={input:n6,default:n3,output:n8,group:n7},rj={default:nj,straight:nk,step:nT,smoothstep:nC,simplebezier:n_},rO=[0,0],rL=[15,15],rV={x:0,y:0,zoom:1},rI={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},rB=(0,d.forwardRef)((e,t)=>{let{nodes:n,edges:s,defaultNodes:l,defaultEdges:u,className:c,nodeTypes:f=rD,edgeTypes:p=rj,onNodeClick:m,onEdgeClick:g,onInit:v,onMove:y,onMoveStart:x,onMoveEnd:b,onConnect:w,onConnectStart:S,onConnectEnd:E,onClickConnectStart:_,onClickConnectEnd:M,onNodeMouseEnter:P,onNodeMouseMove:A,onNodeMouseLeave:C,onNodeContextMenu:T,onNodeDoubleClick:k,onNodeDragStart:N,onNodeDrag:R,onNodeDragStop:D,onNodesDelete:j,onEdgesDelete:O,onSelectionChange:L,onSelectionDragStart:V,onSelectionDrag:I,onSelectionDragStop:B,onSelectionContextMenu:F,onSelectionStart:z,onSelectionEnd:U,connectionMode:H=i.Strict,connectionLineType:K=a.Bezier,connectionLineStyle:W,connectionLineComponent:X,connectionLineContainerStyle:Y,deleteKeyCode:q="Backspace",selectionKeyCode:Z="Shift",selectionOnDrag:G=!1,selectionMode:$=o.Full,panActivationKeyCode:Q="Space",multiSelectionKeyCode:J=nv()?"Meta":"Control",zoomActivationKeyCode:ee=nv()?"Meta":"Control",snapToGrid:et=!1,snapGrid:en=rL,onlyRenderVisibleElements:ei=!1,selectNodesOnDrag:er=!0,nodesDraggable:eo,nodesConnectable:ea,nodesFocusable:es,nodeOrigin:el=rO,edgesFocusable:eu,edgesUpdatable:ec,elementsSelectable:ed,defaultViewport:eh=rV,minZoom:ef=.5,maxZoom:ep=2,translateExtent:em=rT,preventScrolling:eg=!0,nodeExtent:ev,defaultMarkerColor:ey="#b1b1b7",zoomOnScroll:ex=!0,zoomOnPinch:eb=!0,panOnScroll:ew=!1,panOnScrollSpeed:eS=.5,panOnScrollMode:eE=r.Free,zoomOnDoubleClick:e_=!0,panOnDrag:eM=!0,onPaneClick:eP,onPaneMouseEnter:eA,onPaneMouseMove:eC,onPaneMouseLeave:eT,onPaneScroll:ek,onPaneContextMenu:eN,children:eR,onEdgeContextMenu:eD,onEdgeDoubleClick:ej,onEdgeMouseEnter:eO,onEdgeMouseMove:eL,onEdgeMouseLeave:eV,onEdgeUpdate:eI,onEdgeUpdateStart:eB,onEdgeUpdateEnd:eF,onReconnect:ez,onReconnectStart:eU,onReconnectEnd:eH,reconnectRadius:eK=10,edgeUpdaterRadius:eW=10,onNodesChange:eX,onEdgesChange:eY,noDragClassName:eq="nodrag",noWheelClassName:eZ="nowheel",noPanClassName:eG="nopan",fitView:e$=!1,fitViewOptions:eQ,connectOnClick:eJ=!0,attributionPosition:e0,proOptions:e1,defaultEdgeOptions:e2,elevateNodesOnSelect:e5=!0,elevateEdgesOnSelect:e3=!1,disableKeyboardA11y:e4=!1,autoPanOnConnect:e6=!0,autoPanOnNodeDrag:e9=!0,connectionRadius:e8=20,isValidConnection:e7,onError:te,style:tt,id:tn,nodeDragThreshold:ti,...tr}=e,to=tn||"1";return d.default.createElement("div",{...tr,style:{...tt,...rI},ref:t,className:h(["react-flow",c]),"data-testid":"rf__wrapper",id:tn},d.default.createElement(rR,null,d.default.createElement(rC,{onInit:v,onMove:y,onMoveStart:x,onMoveEnd:b,onNodeClick:m,onEdgeClick:g,onNodeMouseEnter:P,onNodeMouseMove:A,onNodeMouseLeave:C,onNodeContextMenu:T,onNodeDoubleClick:k,nodeTypes:f,edgeTypes:p,connectionLineType:K,connectionLineStyle:W,connectionLineComponent:X,connectionLineContainerStyle:Y,selectionKeyCode:Z,selectionOnDrag:G,selectionMode:$,deleteKeyCode:q,multiSelectionKeyCode:J,panActivationKeyCode:Q,zoomActivationKeyCode:ee,onlyRenderVisibleElements:ei,selectNodesOnDrag:er,defaultViewport:eh,translateExtent:em,minZoom:ef,maxZoom:ep,preventScrolling:eg,zoomOnScroll:ex,zoomOnPinch:eb,zoomOnDoubleClick:e_,panOnScroll:ew,panOnScrollSpeed:eS,panOnScrollMode:eE,panOnDrag:eM,onPaneClick:eP,onPaneMouseEnter:eA,onPaneMouseMove:eC,onPaneMouseLeave:eT,onPaneScroll:ek,onPaneContextMenu:eN,onSelectionContextMenu:F,onSelectionStart:z,onSelectionEnd:U,onEdgeContextMenu:eD,onEdgeDoubleClick:ej,onEdgeMouseEnter:eO,onEdgeMouseMove:eL,onEdgeMouseLeave:eV,onReconnect:null!=ez?ez:eI,onReconnectStart:null!=eU?eU:eB,onReconnectEnd:null!=eH?eH:eF,reconnectRadius:null!=eK?eK:eW,defaultMarkerColor:ey,noDragClassName:eq,noWheelClassName:eZ,noPanClassName:eG,elevateEdgesOnSelect:e3,rfId:to,disableKeyboardA11y:e4,nodeOrigin:el,nodeExtent:ev}),d.default.createElement(ic,{nodes:n,edges:s,defaultNodes:l,defaultEdges:u,onConnect:w,onConnectStart:S,onConnectEnd:E,onClickConnectStart:_,onClickConnectEnd:M,nodesDraggable:eo,nodesConnectable:ea,nodesFocusable:es,edgesFocusable:eu,edgesUpdatable:ec,elementsSelectable:ed,elevateNodesOnSelect:e5,minZoom:ef,maxZoom:ep,nodeExtent:ev,onNodesChange:eX,onEdgesChange:eY,snapToGrid:et,snapGrid:en,connectionMode:H,translateExtent:em,connectOnClick:eJ,defaultEdgeOptions:e2,fitView:e$,fitViewOptions:eQ,onNodesDelete:j,onEdgesDelete:O,onNodeDragStart:N,onNodeDrag:R,onNodeDragStop:D,onSelectionDrag:I,onSelectionDragStart:V,onSelectionDragStop:B,noPanClassName:eG,nodeOrigin:el,rfId:to,autoPanOnConnect:e6,autoPanOnNodeDrag:e9,onError:te,connectionRadius:e8,isValidConnection:e7,nodeDragThreshold:ti}),d.default.createElement(ia,{onSelectionChange:L}),eR,d.default.createElement(ne,{proOptions:e1,position:e0}),d.default.createElement(iy,{rfId:to,disableKeyboardA11y:e4})))});function rF(e){return t=>{let[n,i]=(0,d.useState)(t),r=(0,d.useCallback)(t=>i(n=>e(t,n)),[]);return[n,i,r]}}function rz(e){let{color:t,dimensions:n,lineWidth:i}=e;return d.default.createElement("path",{stroke:t,strokeWidth:i,d:"M".concat(n[0]/2," 0 V").concat(n[1]," M0 ").concat(n[1]/2," H").concat(n[0])})}function rU(e){let{color:t,radius:n}=e;return d.default.createElement("circle",{cx:n,cy:n,r:n,fill:t})}rB.displayName="ReactFlow",rF(iU),rF(function(e,t){return iz(e,t)}),!function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"}(u||(u={}));let rH={[u.Dots]:"#91919a",[u.Lines]:"#eee",[u.Cross]:"#e2e2e2"},rK={[u.Dots]:1,[u.Lines]:1,[u.Cross]:6},rW=e=>({transform:e.transform,patternId:"pattern-".concat(e.rfId)});function rX(e){let{id:t,variant:n=u.Dots,gap:i=20,size:r,lineWidth:o=1,offset:a=2,color:s,style:l,className:c}=e,f=(0,d.useRef)(null),{transform:p,patternId:m}=t6(rW,w),g=s||rH[n],v=r||rK[n],y=n===u.Dots,x=n===u.Cross,b=Array.isArray(i)?i:[i,i],S=[b[0]*p[2]||1,b[1]*p[2]||1],E=v*p[2],_=x?[E,E]:S,M=y?[E/a,E/a]:[_[0]/a,_[1]/a];return d.default.createElement("svg",{className:h(["react-flow__background",c]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:f,"data-testid":"rf__background"},d.default.createElement("pattern",{id:m+t,x:p[0]%S[0],y:p[1]%S[1],width:S[0],height:S[1],patternUnits:"userSpaceOnUse",patternTransform:"translate(-".concat(M[0],",-").concat(M[1],")")},y?d.default.createElement(rU,{color:g,radius:E/a}):d.default.createElement(rz,{dimensions:_,color:g,lineWidth:o})),d.default.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#".concat(m+t,")")}))}rX.displayName="Background";var rY=(0,d.memo)(rX),rq=e.i(18566),rZ=e.i(32527);let rG={person:(0,d.memo)(function(e){var t;let{data:n}=e,i=null==(t=n.spouses)?void 0:t.map(e=>e.fullname).filter(Boolean).join(", "),r=!!n.father||!!n.mother,o=n.children.length>0,a=n.person,s=a.hasFullname()?a.fullname:"Person [".concat(a.id,"]")+(a.hasIsMale()?" (".concat(a.is_male?"Male":"Female",")"):a.hasIsAlive()?" (".concat(a.is_alive?"Alive":"Deceased",")"):"");return(0,c.jsxs)("div",{id:n.person.id,className:"rf-node",children:[r&&(0,c.jsx)(n2,{type:"target",position:l.Top,id:"top"}),(0,c.jsx)("p",{className:"fullname",children:s}),a.hasLifespan()&&(0,c.jsx)("p",{className:"lifespan",children:a.lifespan}),i&&(0,c.jsx)("p",{className:"spouses",children:i}),o&&(0,c.jsx)(n2,{type:"source",position:l.Bottom,id:"bottom"})]})})};var r$=e.i(75157),rQ={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},rJ=d.default.createContext&&d.default.createContext(rQ),r0=["attr","size","title"];function r1(){return(r1=Object.assign.bind()).apply(this,arguments)}function r2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function r5(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r2(Object(n),!0).forEach(function(t){var i,r,o;i=e,r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in i?Object.defineProperty(i,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r2(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function r3(e){return t=>d.default.createElement(r4,r1({attr:r5({},e.attr)},t),function e(t){return t&&t.map((t,n)=>d.default.createElement(t.tag,r5({key:n},t.attr),e(t.child)))}(e.child))}function r4(e){var t=t=>{var n,{attr:i,size:r,title:o}=e,a=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,r0),s=r||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),d.default.createElement("svg",r1({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,a,{className:n,style:r5(r5({color:e.color||t.color},t.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),o&&d.default.createElement("title",null,o),e.children)};return void 0!==rJ?d.default.createElement(rJ.Consumer,null,e=>t(e)):t(rQ)}function r6(e){return r3({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},child:[]}]})(e)}function r9(e){return r3({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(e)}function r8(e){return r3({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"},child:[]},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"},child:[]},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"},child:[]},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"},child:[]}]})(e)}function r7(e){return r3({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(e)}var oe=e.i(42174),ot=e.i(22016);function on(e){let{id:t,className:n,title:i,children:r}=e,o=(0,rq.useRouter)(),{appGraph:a}=(0,oe.useAppGraph)(),{requestFocus:s}=(0,rZ.useFocus)(),l=(0,d.useCallback)(e=>{e.preventDefault(),s(t),a&&!a.nodes.some(e=>e.id===t)&&o.push("/canvas?focus=".concat(encodeURIComponent(t)))},[a,t,s,o]);return(0,c.jsx)(ot.default,{href:"/canvas?focus=".concat(encodeURIComponent(t)),onClick:l,className:n,title:i,children:r})}var oi=e.i(92104);function or(e){let{limit:t=30,placeholder:n="Search name..."}=e,{appGraph:i}=(0,oe.useAppGraph)(),[r,o]=(0,d.useState)([]),[a,s]=(0,d.useState)(-1),l=(0,d.useRef)(null),u=(0,d.useRef)(null),h=(0,d.useMemo)(()=>r.length>0,[r]),f=(0,d.useCallback)(e=>{if(!(null==i?void 0:i.searchIndices))return o([]);let n=e.target.value.trim().toLowerCase();n?o(i.searchIndices.filter(e=>e.label.toLowerCase().startsWith(n)||e.searchBy.toLowerCase().startsWith(n)).slice(0,t)):o([]),s(r.length?0:-1)},[i,r,t]);return(0,c.jsxs)("div",{ref:l,className:oi.default.wrap,children:[(0,c.jsxs)("div",{className:oi.default.inputWrap,children:[(0,c.jsx)("input",{ref:u,className:oi.default.input,placeholder:n,onChange:f,onBlur:()=>o([]),"aria-autocomplete":"both","aria-expanded":h,"aria-controls":"searchbox-listbox",role:"combobox"}),(0,c.jsx)("button",{type:"button",className:oi.default.searchBtn,"aria-label":"Search",onMouseDown:e=>e.preventDefault(),onClick:()=>{s(a>=0?a:0)},title:"Search",children:(0,c.jsx)(r9,{})})]}),h&&(0,c.jsx)("div",{id:"searchbox-listbox",className:oi.default.drop,role:"listbox",children:r.map((e,t)=>{var n,i,r;let l=null!=(n=e.searchBy)?n:"",u=t===a;return(0,c.jsx)("div",{role:"option","aria-selected":u,className:"".concat(oi.default.option," ").concat(u?oi.default.isActive:""),onMouseEnter:()=>s(t),onMouseDown:()=>{o([]),s(-1)},children:(0,c.jsx)(on,{id:e.resolveId,className:oi.default.optionLink,title:l||e.label,children:l&&(0,c.jsx)("div",{className:oi.default.itemNote,children:l})})},"".concat(null!=(r=null!=(i=e.resolveId)?i:e.id)?r:l,"::").concat(t))})})]})}let oo={flow:(0,d.memo)(function(e){let{id:t,sourceX:n,sourceY:i,targetX:r,targetY:o,sourcePosition:a,targetPosition:s}=e,[l]=nD({sourceX:n,sourceY:i,targetX:r,targetY:o,sourcePosition:a,targetPosition:s});return(0,c.jsx)("path",{id:t,d:l,className:"rf-edge",fill:"none",vectorEffect:"non-scaling-stroke"})})};var oa=e.i(75144);let os=(0,d.createContext)({});function ol(e){let t=(0,d.useRef)(null);return null===t.current&&(t.current=e()),t.current}let ou="undefined"!=typeof window,oc=ou?d.useLayoutEffect:d.useEffect,od=(0,d.createContext)(null);function oh(e){return"object"==typeof e&&null!==e}function of(e){return oh(e)&&"offsetHeight"in e}var op=d;let om=(0,d.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class og extends op.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,n=of(e)&&e.offsetWidth||0,i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft,i.right=n-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function ov(e){let{children:t,isPresent:n,anchorX:i,root:r}=e,o=(0,op.useId)(),a=(0,op.useRef)(null),s=(0,op.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=(0,op.useContext)(om);return(0,op.useInsertionEffect)(()=>{let{width:e,height:t,top:u,left:c,right:d}=s.current;if(n||!a.current||!e||!t)return;a.current.dataset.motionPopId=o;let h=document.createElement("style");l&&(h.nonce=l);let f=null!=r?r:document.head;return f.appendChild(h),h.sheet&&h.sheet.insertRule('\n          [data-motion-pop-id="'.concat(o,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===i?"left: ".concat(c):"right: ".concat(d),"px !important;\n            top: ").concat(u,"px !important;\n          }\n        ")),()=>{f.contains(h)&&f.removeChild(h)}},[n]),(0,c.jsx)(og,{isPresent:n,childRef:a,sizeRef:s,children:op.cloneElement(t,{ref:a})})}let oy=e=>{let{children:t,initial:n,isPresent:i,onExitComplete:r,custom:o,presenceAffectsLayout:a,mode:s,anchorX:l,root:u}=e,h=ol(ox),f=(0,d.useId)(),p=!0,m=(0,d.useMemo)(()=>(p=!1,{id:f,initial:n,isPresent:i,custom:o,onExitComplete:e=>{for(let t of(h.set(e,!0),h.values()))if(!t)return;r&&r()},register:e=>(h.set(e,!1),()=>h.delete(e))}),[i,h,r]);return a&&p&&(m={...m}),(0,d.useMemo)(()=>{h.forEach((e,t)=>h.set(t,!1))},[i]),d.useEffect(()=>{i||h.size||!r||r()},[i]),"popLayout"===s&&(t=(0,c.jsx)(ov,{isPresent:i,anchorX:l,root:u,children:t})),(0,c.jsx)(od.Provider,{value:m,children:t})};function ox(){return new Map}function ob(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=(0,d.useContext)(od);if(null===t)return[!0,null];let{isPresent:n,onExitComplete:i,register:r}=t,o=(0,d.useId)();(0,d.useEffect)(()=>{if(e)return r(o)},[e]);let a=(0,d.useCallback)(()=>e&&i&&i(o),[o,i,e]);return!n&&i?[!1,a]:[!0]}let ow=e=>e.key||"";function oS(e){let t=[];return d.Children.forEach(e,e=>{(0,d.isValidElement)(e)&&t.push(e)}),t}let oE=e=>{let{children:t,custom:n,initial:i=!0,onExitComplete:r,presenceAffectsLayout:o=!0,mode:a="sync",propagate:s=!1,anchorX:l="left",root:u}=e,[h,f]=ob(s),p=(0,d.useMemo)(()=>oS(t),[t]),m=s&&!h?[]:p.map(ow),g=(0,d.useRef)(!0),v=(0,d.useRef)(p),y=ol(()=>new Map),[x,b]=(0,d.useState)(p),[w,S]=(0,d.useState)(p);oc(()=>{g.current=!1,v.current=p;for(let e=0;e<w.length;e++){let t=ow(w[e]);m.includes(t)?y.delete(t):!0!==y.get(t)&&y.set(t,!1)}},[w,m.length,m.join("-")]);let E=[];if(p!==x){let e=[...p];for(let t=0;t<w.length;t++){let n=w[t],i=ow(n);m.includes(i)||(e.splice(t,0,n),E.push(n))}return"wait"===a&&E.length&&(e=E),S(oS(e)),b(p),null}let{forceRender:_}=(0,d.useContext)(os);return(0,c.jsx)(c.Fragment,{children:w.map(e=>{let t=ow(e),d=(!s||!!h)&&(p===w||m.includes(t));return(0,c.jsx)(oy,{isPresent:d,initial:(!g.current||!!i)&&void 0,custom:n,presenceAffectsLayout:o,mode:a,root:u,onExitComplete:d?void 0:()=>{if(!y.has(t))return;y.set(t,!0);let e=!0;y.forEach(t=>{t||(e=!1)}),e&&(null==_||_(),S(v.current),s&&(null==f||f()),r&&r())},anchorX:l,children:e},t)})})},o_=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],oM=new Set(o_),oP=e=>180*e/Math.PI,oA=e=>oT(oP(Math.atan2(e[1],e[0]))),oC={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:oA,rotateZ:oA,skewX:e=>oP(Math.atan(e[1])),skewY:e=>oP(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},oT=e=>((e%=360)<0&&(e+=360),e),ok=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),oN=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),oR={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:ok,scaleY:oN,scale:e=>(ok(e)+oN(e))/2,rotateX:e=>oT(oP(Math.atan2(e[6],e[5]))),rotateY:e=>oT(oP(Math.atan2(-e[2],e[0]))),rotateZ:oA,rotate:oA,skewX:e=>oP(Math.atan(e[4])),skewY:e=>oP(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function oD(e){return+!!e.includes("scale")}function oj(e,t){let n,i;if(!e||"none"===e)return oD(t);let r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);if(r)n=oR,i=r;else{let t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=oC,i=t}if(!i)return oD(t);let o=n[t],a=i[1].split(",").map(oO);return"function"==typeof o?o(a):a[o]}function oO(e){return parseFloat(e.trim())}let oL=e=>t=>"string"==typeof t&&t.startsWith(e),oV=oL("--"),oI=oL("var(--"),oB=e=>!!oI(e)&&oF.test(e.split("/*")[0].trim()),oF=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function oz(e){let{top:t,left:n,right:i,bottom:r}=e;return{x:{min:n,max:i},y:{min:t,max:r}}}let oU=(e,t,n)=>e+(t-e)*n;function oH(e){return void 0===e||1===e}function oK(e){let{scale:t,scaleX:n,scaleY:i}=e;return!oH(t)||!oH(n)||!oH(i)}function oW(e){return oK(e)||oX(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function oX(e){var t,n;return(t=e.x)&&"0%"!==t||(n=e.y)&&"0%"!==n}function oY(e,t,n,i,r){return void 0!==r&&(e=i+r*(e-i)),i+n*(e-i)+t}function oq(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;e.min=oY(e.min,t,n,i,r),e.max=oY(e.max,t,n,i,r)}function oZ(e,t){let{x:n,y:i}=t;oq(e.x,n.translate,n.scale,n.originPoint),oq(e.y,i.translate,i.scale,i.originPoint)}function oG(e,t){e.min=e.min+t,e.max=e.max+t}function o$(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,o=oU(e.min,e.max,r);oq(e,t,n,o,i)}function oQ(e,t){o$(e.x,t.x,t.scaleX,t.scale,t.originX),o$(e.y,t.y,t.scaleY,t.scale,t.originY)}function oJ(e,t){return oz(function(e,t){if(!t)return e;let n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}(e.getBoundingClientRect(),t))}let o0=new Set(["width","height","top","left","right","bottom",...o_]),o1=(e,t,n)=>n>t?t:n<e?e:n,o2={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},o5={...o2,transform:e=>o1(0,1,e)},o3={...o2,default:1},o4=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),o6=o4("deg"),o9=o4("%"),o8=o4("px"),o7=o4("vh"),ae=o4("vw"),at={...o9,parse:e=>o9.parse(e)/100,transform:e=>o9.transform(100*e)},an=e=>t=>t.test(e),ai=[o2,o8,o9,o6,ae,o7,{test:e=>"auto"===e,parse:e=>e}],ar=e=>ai.find(an(e)),ao=()=>{},aa=()=>{},as=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),al=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u,au=e=>e===o2||e===o8,ac=new Set(["x","y","z"]),ad=o_.filter(e=>!ac.has(e)),ah={width:(e,t)=>{let{x:n}=e,{paddingLeft:i="0",paddingRight:r="0"}=t;return n.max-n.min-parseFloat(i)-parseFloat(r)},height:(e,t)=>{let{y:n}=e,{paddingTop:i="0",paddingBottom:r="0"}=t;return n.max-n.min-parseFloat(i)-parseFloat(r)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:i}=t;return parseFloat(i)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:i}=t;return parseFloat(i)+(n.max-n.min)},x:(e,t)=>{let{transform:n}=t;return oj(n,"x")},y:(e,t)=>{let{transform:n}=t;return oj(n,"y")}};ah.translateX=ah.x,ah.translateY=ah.y;let af=e=>e,ap={},am=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],ag={value:null,addProjectionMetrics:null};function av(e,t){let n=!1,i=!0,r={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,a=am.reduce((e,n)=>(e[n]=function(e,t){let n=new Set,i=new Set,r=!1,o=!1,a=new WeakSet,s={delta:0,timestamp:0,isProcessing:!1},l=0;function u(t){a.has(t)&&(c.schedule(t),e()),l++,t(s)}let c={schedule:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=o&&r?n:i;return t&&a.add(e),s.has(e)||s.add(e),e},cancel:e=>{i.delete(e),a.delete(e)},process:e=>{if(s=e,r){o=!0;return}r=!0,[n,i]=[i,n],n.forEach(u),t&&ag.value&&ag.value.frameloop[t].push(l),l=0,n.clear(),r=!1,o&&(o=!1,c.process(e))}};return c}(o,t?n:void 0),e),{}),{setup:s,read:l,resolveKeyframes:u,preUpdate:c,update:d,preRender:h,render:f,postRender:p}=a,m=()=>{let o=ap.useManualTiming?r.timestamp:performance.now();n=!1,ap.useManualTiming||(r.delta=i?1e3/60:Math.max(Math.min(o-r.timestamp,40),1)),r.timestamp=o,r.isProcessing=!0,s.process(r),l.process(r),u.process(r),c.process(r),d.process(r),h.process(r),f.process(r),p.process(r),r.isProcessing=!1,n&&t&&(i=!1,e(m))};return{schedule:am.reduce((t,o)=>{let s=a[o];return t[o]=function(t){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!n&&(n=!0,i=!0,r.isProcessing||e(m)),s.schedule(t,o,a)},t},{}),cancel:e=>{for(let t=0;t<am.length;t++)a[am[t]].cancel(e)},state:r,steps:a}}let{schedule:ay,cancel:ax,state:ab,steps:aw}=av("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:af,!0),aS=new Set,aE=!1,a_=!1,aM=!1;function aP(){if(a_){let e=Array.from(aS).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{let t=function(e){let t=[];return ad.forEach(n=>{let i=e.getValue(n);void 0!==i&&(t.push([n,i.get()]),i.set(+!!n.startsWith("scale")))}),t}(e);t.length&&(n.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();let t=n.get(e);t&&t.forEach(t=>{var n;let[i,r]=t;null==(n=e.getValue(i))||n.set(r)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}a_=!1,aE=!1,aS.forEach(e=>e.complete(aM)),aS.clear()}function aA(){aS.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(a_=!0)})}class aC{scheduleResolve(){this.state="scheduled",this.isAsync?(aS.add(this),aE||(aE=!0,ay.read(aA),ay.resolveKeyframes(aP))):(this.readKeyframes(),this.complete())}readKeyframes(){let{unresolvedKeyframes:e,name:t,element:n,motionValue:i}=this;if(null===e[0]){let r=null==i?void 0:i.get(),o=e[e.length-1];if(void 0!==r)e[0]=r;else if(n&&t){let i=n.readValue(t,o);null!=i&&(e[0]=i)}void 0===e[0]&&(e[0]=o),i&&void 0===r&&i.set(e[0])}for(let t=1;t<e.length;t++)null!=e[t]||(e[t]=e[t-1])}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),aS.delete(this)}cancel(){"scheduled"===this.state&&(aS.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}constructor(e,t,n,i,r,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=i,this.element=r,this.isAsync=o}}let aT=e=>/^0[^.\s]+$/u.test(e),ak=e=>Math.round(1e5*e)/1e5,aN=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,aR=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,aD=(e,t)=>n=>!!("string"==typeof n&&aR.test(n)&&n.startsWith(e)||t&&null!=n&&Object.prototype.hasOwnProperty.call(n,t)),aj=(e,t,n)=>i=>{if("string"!=typeof i)return i;let[r,o,a,s]=i.match(aN);return{[e]:parseFloat(r),[t]:parseFloat(o),[n]:parseFloat(a),alpha:void 0!==s?parseFloat(s):1}},aO={...o2,transform:e=>Math.round(o1(0,255,e))},aL={test:aD("rgb","red"),parse:aj("red","green","blue"),transform:e=>{let{red:t,green:n,blue:i,alpha:r=1}=e;return"rgba("+aO.transform(t)+", "+aO.transform(n)+", "+aO.transform(i)+", "+ak(o5.transform(r))+")"}},aV={test:aD("#"),parse:function(e){let t="",n="",i="",r="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),r=e.substring(4,5),t+=t,n+=n,i+=i,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}},transform:aL.transform},aI={test:aD("hsl","hue"),parse:aj("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:i,alpha:r=1}=e;return"hsla("+Math.round(t)+", "+o9.transform(ak(n))+", "+o9.transform(ak(i))+", "+ak(o5.transform(r))+")"}},aB={test:e=>aL.test(e)||aV.test(e)||aI.test(e),parse:e=>aL.test(e)?aL.parse(e):aI.test(e)?aI.parse(e):aV.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?aL.transform(e):aI.transform(e),getAnimatableNone:e=>{let t=aB.parse(e);return t.alpha=0,aB.transform(t)}},aF=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,az="number",aU="color",aH=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function aK(e){let t=e.toString(),n=[],i={color:[],number:[],var:[]},r=[],o=0,a=t.replace(aH,e=>(aB.test(e)?(i.color.push(o),r.push(aU),n.push(aB.parse(e))):e.startsWith("var(")?(i.var.push(o),r.push("var"),n.push(e)):(i.number.push(o),r.push(az),n.push(parseFloat(e))),++o,"${}")).split("${}");return{values:n,split:a,indexes:i,types:r}}function aW(e){return aK(e).values}function aX(e){let{split:t,types:n}=aK(e),i=t.length;return e=>{let r="";for(let o=0;o<i;o++)if(r+=t[o],void 0!==e[o]){let t=n[o];t===az?r+=ak(e[o]):t===aU?r+=aB.transform(e[o]):r+=e[o]}return r}}let aY=e=>"number"==typeof e?0:aB.test(e)?aB.getAnimatableNone(e):e,aq={test:function(e){var t,n;return isNaN(e)&&"string"==typeof e&&((null==(t=e.match(aN))?void 0:t.length)||0)+((null==(n=e.match(aF))?void 0:n.length)||0)>0},parse:aW,createTransformer:aX,getAnimatableNone:function(e){let t=aW(e);return aX(e)(t.map(aY))}},aZ=new Set(["brightness","contrast","saturate","opacity"]);function aG(e){let[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;let[i]=n.match(aN)||[];if(!i)return e;let r=n.replace(i,""),o=+!!aZ.has(t);return i!==n&&(o*=100),t+"("+o+r+")"}let a$=/\b([a-z-]*)\(.*?\)/gu,aQ={...aq,getAnimatableNone:e=>{let t=e.match(a$);return t?t.map(aG).join(" "):e}},aJ={...o2,transform:Math.round},a0={borderWidth:o8,borderTopWidth:o8,borderRightWidth:o8,borderBottomWidth:o8,borderLeftWidth:o8,borderRadius:o8,radius:o8,borderTopLeftRadius:o8,borderTopRightRadius:o8,borderBottomRightRadius:o8,borderBottomLeftRadius:o8,width:o8,maxWidth:o8,height:o8,maxHeight:o8,top:o8,right:o8,bottom:o8,left:o8,padding:o8,paddingTop:o8,paddingRight:o8,paddingBottom:o8,paddingLeft:o8,margin:o8,marginTop:o8,marginRight:o8,marginBottom:o8,marginLeft:o8,backgroundPositionX:o8,backgroundPositionY:o8,rotate:o6,rotateX:o6,rotateY:o6,rotateZ:o6,scale:o3,scaleX:o3,scaleY:o3,scaleZ:o3,skew:o6,skewX:o6,skewY:o6,distance:o8,translateX:o8,translateY:o8,translateZ:o8,x:o8,y:o8,z:o8,perspective:o8,transformPerspective:o8,opacity:o5,originX:at,originY:at,originZ:o8,zIndex:aJ,fillOpacity:o5,strokeOpacity:o5,numOctaves:aJ},a1={...a0,color:aB,backgroundColor:aB,outlineColor:aB,fill:aB,stroke:aB,borderColor:aB,borderTopColor:aB,borderRightColor:aB,borderBottomColor:aB,borderLeftColor:aB,filter:aQ,WebkitFilter:aQ},a2=e=>a1[e];function a5(e,t){let n=a2(e);return n!==aQ&&(n=aq),n.getAnimatableNone?n.getAnimatableNone(t):void 0}let a3=new Set(["auto","none","0"]);class a4 extends aC{readKeyframes(){let{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let n=0;n<e.length;n++){let i=e[n];if("string"==typeof i&&oB(i=i.trim())){let r=function e(t,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;aa(i<=4,'Max CSS variable fallback depth detected in property "'.concat(t,'". This may indicate a circular fallback dependency.'),"max-css-var-depth");let[r,o]=function(e){let t=al.exec(e);if(!t)return[,];let[,n,i,r]=t;return["--".concat(null!=n?n:i),r]}(t);if(!r)return;let a=window.getComputedStyle(n).getPropertyValue(r);if(a){let e=a.trim();return as(e)?parseFloat(e):e}return oB(o)?e(o,n,i+1):o}(i,t.current);void 0!==r&&(e[n]=r),n===e.length-1&&(this.finalKeyframe=i)}}if(this.resolveNoneKeyframes(),!o0.has(n)||2!==e.length)return;let[i,r]=e,o=ar(i),a=ar(r);if(o!==a)if(au(o)&&au(a))for(let t=0;t<e.length;t++){let n=e[t];"string"==typeof n&&(e[t]=parseFloat(n))}else ah[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){let{unresolvedKeyframes:e,name:t}=this,n=[];for(let t=0;t<e.length;t++){var i;(null===e[t]||("number"==typeof(i=e[t])?0===i:null===i||"none"===i||"0"===i||aT(i)))&&n.push(t)}n.length&&function(e,t,n){let i,r=0;for(;r<e.length&&!i;){let t=e[r];"string"==typeof t&&!a3.has(t)&&aK(t).values.length&&(i=e[r]),r++}if(i&&n)for(let r of t)e[r]=a5(n,i)}(e,n,t)}measureInitialState(){let{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ah[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;let i=t[t.length-1];void 0!==i&&e.getValue(n,i).jump(i,!1)}measureEndState(){var e;let{element:t,name:n,unresolvedKeyframes:i}=this;if(!t||!t.current)return;let r=t.getValue(n);r&&r.jump(this.measuredOrigin,!1);let o=i.length-1,a=i[o];i[o]=ah[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==a&&void 0===this.finalKeyframe&&(this.finalKeyframe=a),(null==(e=this.removedTransforms)?void 0:e.length)&&this.removedTransforms.forEach(e=>{let[n,i]=e;t.getValue(n).set(i)}),this.resolveNoneKeyframes()}constructor(e,t,n,i,r){super(e,t,n,i,r,!0)}}let a6=e=>!!(e&&e.getVelocity);function a9(){t=void 0}let a8={now:()=>(void 0===t&&a8.set(ab.isProcessing||ap.useManualTiming?ab.timestamp:performance.now()),t),set:e=>{t=e,queueMicrotask(a9)}};function a7(e,t){-1===e.indexOf(t)&&e.push(t)}function se(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}class st{add(e){return a7(this.subscriptions,e),()=>se(this.subscriptions,e)}notify(e,t,n){let i=this.subscriptions.length;if(i)if(1===i)this.subscriptions[0](e,t,n);else for(let r=0;r<i;r++){let i=this.subscriptions[r];i&&i(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}constructor(){this.subscriptions=[]}}let sn={current:void 0};class si{setCurrent(e){this.current=e,this.updatedAt=a8.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=!isNaN(parseFloat(this.current)))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new st);let n=this.events[e].add(t);return"change"===e?()=>{n(),ay.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(let e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;null==(e=this.events.change)||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return sn.current&&sn.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){var e;let t=a8.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||t-this.updatedAt>30)return 0;let n=Math.min(this.updatedAt-this.prevUpdatedAt,30);return e=parseFloat(this.current)-parseFloat(this.prevFrameValue),n?1e3/n*e:0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;null==(e=this.dependents)||e.clear(),null==(t=this.events.destroy)||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{let t=a8.now();if(this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev){var n;if(null==(n=this.events.change)||n.notify(this.current),this.dependents)for(let e of this.dependents)e.dirty()}},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}}function sr(e,t){return new si(e,t)}let so=[...ai,aB,aq],{schedule:sa}=av(queueMicrotask,!1),ss={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},sl={};for(let e in ss)sl[e]={isEnabled:t=>ss[e].some(e=>!!t[e])};let su=()=>({translate:0,scale:1,origin:0,originPoint:0}),sc=()=>({x:su(),y:su()}),sd=()=>({min:0,max:0}),sh=()=>({x:sd(),y:sd()}),sf={current:null},sp={current:!1},sm=new WeakMap;function sg(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}function sv(e){return"string"==typeof e||Array.isArray(e)}let sy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],sx=["initial",...sy];function sb(e){return sg(e.animate)||sx.some(t=>sv(e[t]))}function sw(e){return!!(sb(e)||e.variants)}function sS(e){let t=[{},{}];return null==e||e.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function sE(e,t,n,i){if("function"==typeof t){let[r,o]=sS(i);t=t(void 0!==n?n:e.custom,r,o)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){let[r,o]=sS(i);t=t(void 0!==n?n:e.custom,r,o)}return t}let s_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class sM{scrapeMotionValuesFromProps(e,t,n){return{}}mount(e){var t;this.current=e,sm.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),sp.current||function(){if(sp.current=!0,ou)if(window.matchMedia){let e=window.matchMedia("(prefers-reduced-motion)"),t=()=>sf.current=e.matches;e.addEventListener("change",t),t()}else sf.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||sf.current),null==(t=this.parent)||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;for(let t in this.projection&&this.projection.unmount(),ax(this.notifyUpdate),ax(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),null==(e=this.parent)||e.removeChild(this),this.events)this.events[t].clear();for(let e in this.features){let t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),null!=this.enteringChildren||(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){let n;this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();let i=oM.has(e);i&&this.onBindTransform&&this.onBindTransform();let r=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&ay.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});window.MotionCheckAppearSync&&(n=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),n&&n(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in sl){let t=sl[e];if(!t)continue;let{isEnabled:n,Feature:i}=t;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){let t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):sh()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let t=0;t<s_.length;t++){let n=s_[t];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);let i=e["on"+n];i&&(this.propEventSubscriptions[n]=this.on(n,i))}this.prevMotionValues=function(e,t,n){for(let i in t){let r=t[i],o=n[i];if(a6(r))e.addValue(i,r);else if(a6(o))e.addValue(i,sr(r,{owner:e}));else if(o!==r)if(e.hasValue(i)){let t=e.getValue(i);!0===t.liveStyle?t.jump(r):t.hasAnimated||t.set(r)}else{let t=e.getStaticValue(i);e.addValue(i,sr(void 0!==t?t:r,{owner:e}))}}for(let i in n)void 0===t[i]&&e.removeValue(i);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){let t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){let n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);let t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=sr(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let i=void 0===this.latestValues[e]&&this.current?null!=(n=this.getBaseTargetFromProps(this.props,e))?n:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];if(null!=i){if("string"==typeof i&&(as(i)||aT(i)))i=parseFloat(i);else{let n;n=i,!so.find(an(n))&&aq.test(t)&&(i=a5(e,t))}this.setBaseTarget(e,a6(i)?i.get():i)}return a6(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){let t,{initial:n}=this.props;if("string"==typeof n||"object"==typeof n){var i;let r=sE(this.props,n,null==(i=this.presenceContext)?void 0:i.custom);r&&(t=r[e])}if(n&&void 0!==t)return t;let r=this.getBaseTargetFromProps(this.props,e);return void 0===r||a6(r)?void 0!==this.initialValues[e]&&void 0===t?void 0:this.baseTarget[e]:r}on(e,t){return this.events[e]||(this.events[e]=new st),this.events[e].add(t)}notify(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){sa.render(this.render)}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:r,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=aC,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{let e=a8.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,ay.render(this.render,!1,!0))};let{latestValues:s,renderState:l}=o;this.latestValues=s,this.baseTarget={...s},this.initialValues=t.initial?{...s}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!r,this.isControllingVariants=sb(t),this.isVariantNode=sw(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);let{willChange:u,...c}=this.scrapeMotionValuesFromProps(t,{},this);for(let e in c){let t=c[e];void 0!==s[e]&&a6(t)&&t.set(s[e])}}}class sP extends sM{sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:i}=t;delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:e}=this.props;a6(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent="".concat(e))}))}constructor(){super(...arguments),this.KeyframeResolver=a4}}let sA=(e,t)=>t&&"number"==typeof e?t.transform(e):e,sC={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},sT=o_.length;function sk(e,t,n){let{style:i,vars:r,transformOrigin:o}=e,a=!1,s=!1;for(let e in t){let n=t[e];if(oM.has(e)){a=!0;continue}if(oV(e)){r[e]=n;continue}{let t=sA(n,a0[e]);e.startsWith("origin")?(s=!0,o[e]=t):i[e]=t}}if(!t.transform&&(a||n?i.transform=function(e,t,n){let i="",r=!0;for(let o=0;o<sT;o++){let a=o_[o],s=e[a];if(void 0===s)continue;let l=!0;if(!(l="number"==typeof s?s===+!!a.startsWith("scale"):0===parseFloat(s))||n){let e=sA(s,a0[a]);if(!l){r=!1;let t=sC[a]||a;i+="".concat(t,"(").concat(e,") ")}n&&(t[a]=e)}}return i=i.trim(),n?i=n(t,r?"":i):r&&(i="none"),i}(t,e.transform,n):i.transform&&(i.transform="none")),s){let{originX:e="50%",originY:t="50%",originZ:n=0}=o;i.transformOrigin="".concat(e," ").concat(t," ").concat(n)}}function sN(e,t,n,i){let r,{style:o,vars:a}=t,s=e.style;for(r in o)s[r]=o[r];for(r in null==i||i.applyProjectionStyles(s,n),a)s.setProperty(r,a[r])}let sR={};function sD(e,t){let{layout:n,layoutId:i}=t;return oM.has(e)||e.startsWith("origin")||(n||void 0!==i)&&(!!sR[e]||"opacity"===e)}function sj(e,t,n){let{style:i}=e,r={};for(let a in i){var o;(a6(i[a])||t.style&&a6(t.style[a])||sD(a,e)||(null==n||null==(o=n.getValue(a))?void 0:o.liveStyle)!==void 0)&&(r[a]=i[a])}return r}class sO extends sP{readValueFromInstance(e,t){var n;if(oM.has(t))return(null==(n=this.projection)?void 0:n.isProjecting)?oD(t):((e,t)=>{let{transform:n="none"}=getComputedStyle(e);return oj(n,t)})(e,t);{let n=window.getComputedStyle(e),i=(oV(t)?n.getPropertyValue(t):n[t])||0;return"string"==typeof i?i.trim():i}}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return oJ(e,n)}build(e,t,n){sk(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return sj(e,t,n)}constructor(){super(...arguments),this.type="html",this.renderInstance=sN}}let sL=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),sV={offset:"stroke-dashoffset",array:"stroke-dasharray"},sI={offset:"strokeDashoffset",array:"strokeDasharray"};function sB(e,t,n,i,r){var o,a;let{attrX:s,attrY:l,attrScale:u,pathLength:c,pathSpacing:d=1,pathOffset:h=0,...f}=t;if(sk(e,f,i),n){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};let{attrs:p,style:m}=e;p.transform&&(m.transform=p.transform,delete p.transform),(m.transform||p.transformOrigin)&&(m.transformOrigin=null!=(o=p.transformOrigin)?o:"50% 50%",delete p.transformOrigin),m.transform&&(m.transformBox=null!=(a=null==r?void 0:r.transformBox)?a:"fill-box",delete p.transformBox),void 0!==s&&(p.x=s),void 0!==l&&(p.y=l),void 0!==u&&(p.scale=u),void 0!==c&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=!(arguments.length>4)||void 0===arguments[4]||arguments[4];e.pathLength=1;let o=r?sV:sI;e[o.offset]=o8.transform(-i);let a=o8.transform(t),s=o8.transform(n);e[o.array]="".concat(a," ").concat(s)}(p,c,d,h,!1)}let sF=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),sz=e=>"string"==typeof e&&"svg"===e.toLowerCase();function sU(e,t,n){let i=sj(e,t,n);for(let n in e)(a6(e[n])||a6(t[n]))&&(i[-1!==o_.indexOf(n)?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n]=e[n]);return i}class sH extends sP{getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(oM.has(t)){let e=a2(t);return e&&e.default||0}return t=sF.has(t)?t:sL(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return sU(e,t,n)}build(e,t,n){sB(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,i){for(let n in sN(e,t,void 0,i),t.attrs)e.setAttribute(sF.has(n)?n:sL(n),t.attrs[n])}mount(e){this.isSVGTag=sz(e.tagName),super.mount(e)}constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=sh}}let sK=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function sW(e){if("string"!=typeof e||e.includes("-"));else if(sK.indexOf(e)>-1||/[A-Z]/u.test(e))return!0;return!1}let sX=(0,d.createContext)({strict:!1}),sY=(0,d.createContext)({});function sq(e){return Array.isArray(e)?e.join(" "):e}let sZ=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function sG(e,t,n){for(let i in t)a6(t[i])||sD(i,n)||(e[i]=t[i])}let s$=()=>({...sZ(),attrs:{}}),sQ=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function sJ(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||sQ.has(e)}let s0=e=>!sJ(e);try{!function(e){"function"==typeof e&&(s0=t=>t.startsWith("on")?!sJ(t):e(t))}((()=>{let e=Error("Cannot find module '@emotion/is-prop-valid'");throw e.code="MODULE_NOT_FOUND",e})().default)}catch(e){}function s1(e){return a6(e)?e.get():e}let s2=e=>(t,n)=>{let i=(0,d.useContext)(sY),r=(0,d.useContext)(od),o=()=>(function(e,t,n,i){let{scrapeMotionValuesFromProps:r,createRenderState:o}=e;return{latestValues:function(e,t,n,i){let r={},o=i(e,{});for(let e in o)r[e]=s1(o[e]);let{initial:a,animate:s}=e,l=sb(e),u=sw(e);t&&u&&!l&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===s&&(s=t.animate));let c=!!n&&!1===n.initial,d=(c=c||!1===a)?s:a;if(d&&"boolean"!=typeof d&&!sg(d)){let t=Array.isArray(d)?d:[d];for(let n=0;n<t.length;n++){let i=sE(e,t[n]);if(i){let{transitionEnd:e,transition:t,...n}=i;for(let e in n){let t=n[e];if(Array.isArray(t)){let e=c?t.length-1:0;t=t[e]}null!==t&&(r[e]=t)}for(let t in e)r[t]=e[t]}}}return r}(t,n,i,r),renderState:o()}})(e,t,i,r);return n?o():ol(o)},s5=s2({scrapeMotionValuesFromProps:sj,createRenderState:sZ}),s3=s2({scrapeMotionValuesFromProps:sU,createRenderState:s$}),s4=Symbol.for("motionComponentSymbol");function s6(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}let s9="data-"+sL("framerAppearId"),s8=(0,d.createContext)({});function s7(e){var t,n;let{forwardMotionProps:i=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;r&&function(e){for(let t in e)sl[t]={...sl[t],...e[t]}}(r);let a=sW(e)?s3:s5;function s(t,n){var r;let s,l={...(0,d.useContext)(om),...t,layoutId:function(e){let{layoutId:t}=e,n=(0,d.useContext)(os).id;return n&&void 0!==t?n+"-"+t:t}(t)},{isStatic:u}=l,h=function(e){let{initial:t,animate:n}=function(e,t){if(sb(e)){let{initial:t,animate:n}=e;return{initial:!1===t||sv(t)?t:void 0,animate:sv(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,d.useContext)(sY));return(0,d.useMemo)(()=>({initial:t,animate:n}),[sq(t),sq(n)])}(t),f=a(t,u);if(!u&&ou){(0,d.useContext)(sX).strict;let t=function(e){let{drag:t,layout:n}=sl;if(!t&&!n)return{};let i={...t,...n};return{MeasureLayout:(null==t?void 0:t.isEnabled(e))||(null==n?void 0:n.isEnabled(e))?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}(l);s=t.MeasureLayout,h.visualElement=function(e,t,n,i,r){var o,a,s,l;let{visualElement:u}=(0,d.useContext)(sY),c=(0,d.useContext)(sX),h=(0,d.useContext)(od),f=(0,d.useContext)(om).reducedMotion,p=(0,d.useRef)(null);i=i||c.renderer,!p.current&&i&&(p.current=i(e,{visualState:t,parent:u,props:n,presenceContext:h,blockInitialAnimation:!!h&&!1===h.initial,reducedMotionConfig:f}));let m=p.current,g=(0,d.useContext)(s8);m&&!m.projection&&r&&("html"===m.type||"svg"===m.type)&&function(e,t,n,i){let{layoutId:r,layout:o,drag:a,dragConstraints:s,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:function e(t){if(t)return!1!==t.options.allowProjection?t.projection:e(t.parent)}(e.parent)),e.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:!!a||s&&s6(s),visualElement:e,animationType:"string"==typeof o?o:"both",initialPromotionConfig:i,crossfade:c,layoutScroll:l,layoutRoot:u})}(p.current,n,r,g);let v=(0,d.useRef)(!1);(0,d.useInsertionEffect)(()=>{m&&v.current&&m.update(n,h)});let y=n[s9],x=(0,d.useRef)(!!y&&!(null==(o=(a=window).MotionHandoffIsComplete)?void 0:o.call(a,y))&&(null==(s=(l=window).MotionHasOptimisedAnimation)?void 0:s.call(l,y)));return oc(()=>{m&&(v.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),x.current&&m.animationState&&m.animationState.animateChanges())}),(0,d.useEffect)(()=>{m&&(!x.current&&m.animationState&&m.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var e,t;null==(e=(t=window).MotionHandoffMarkAsComplete)||e.call(t,y)}),x.current=!1),m.enteringChildren=void 0)}),m}(e,f,l,o,t.ProjectionNode)}return(0,c.jsxs)(sY.Provider,{value:h,children:[s&&h.visualElement?(0,c.jsx)(s,{visualElement:h.visualElement,...l}):null,function(e,t,n,i,r){let{latestValues:o}=i,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=(sW(e)?function(e,t,n,i){let r=(0,d.useMemo)(()=>{let n=s$();return sB(n,t,sz(i),e.transformTemplate,e.style),{...n.attrs,style:{...n.style}}},[t]);if(e.style){let t={};sG(t,e.style,e),r.style={...t,...r.style}}return r}:function(e,t){let n={},i=function(e,t){let n=e.style||{},i={};return sG(i,n,e),Object.assign(i,function(e,t){let{transformTemplate:n}=e;return(0,d.useMemo)(()=>{let e=sZ();return sk(e,t,n),Object.assign({},e.vars,e.style)},[t])}(e,t)),i}(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=i,n})(t,o,r,e),l=function(e,t,n){let i={};for(let r in e)("values"!==r||"object"!=typeof e.values)&&(s0(r)||!0===n&&sJ(r)||!t&&!sJ(r)||e.draggable&&r.startsWith("onDrag"))&&(i[r]=e[r]);return i}(t,"string"==typeof e,a),u=e!==d.Fragment?{...l,...s,ref:n}:{},{children:c}=t,h=(0,d.useMemo)(()=>a6(c)?c.get():c,[c]);return(0,d.createElement)(e,{...u,children:h})}(e,t,(r=h.visualElement,(0,d.useCallback)(e=>{e&&f.onMount&&f.onMount(e),r&&(e?r.mount(e):r.unmount()),n&&("function"==typeof n?n(e):s6(n)&&(n.current=e))},[r])),f,u,i)]})}s.displayName="motion.".concat("string"==typeof e?e:"create(".concat(null!=(n=null!=(t=e.displayName)?t:e.name)?n:"",")"));let l=(0,d.forwardRef)(s);return l[s4]=e,l}function le(e,t,n){let i=e.getProps();return sE(i,t,void 0!==n?n:i.custom,e)}function lt(e,t){var n,i;return null!=(i=null!=(n=null==e?void 0:e[t])?n:null==e?void 0:e.default)?i:e}let ln=e=>Array.isArray(e);function li(e,t){let n=e.getValue("willChange");if(a6(n)&&n.add)return n.add(t);if(!n&&ap.WillChange){let n=new ap.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function lr(e){e.duration=0,e.type}let lo=(e,t)=>n=>t(e(n)),la=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(lo)},ls=e=>1e3*e,ll={layout:0,mainThread:0,waapi:0};function lu(e,t,n){return(n<0&&(n+=1),n>1&&(n-=1),n<1/6)?e+(t-e)*6*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function lc(e,t){return n=>n>0?t:e}let ld=(e,t,n)=>{let i=e*e,r=n*(t*t-i)+i;return r<0?0:Math.sqrt(r)},lh=[aV,aL,aI];function lf(e){let t=lh.find(t=>t.test(e));if(ao(!!t,"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."),"color-not-animatable"),!t)return!1;let n=t.parse(e);return t===aI&&(n=function(e){let{hue:t,saturation:n,lightness:i,alpha:r}=e;t/=360,i/=100;let o=0,a=0,s=0;if(n/=100){let e=i<.5?i*(1+n):i+n-i*n,r=2*i-e;o=lu(r,e,t+1/3),a=lu(r,e,t),s=lu(r,e,t-1/3)}else o=a=s=i;return{red:Math.round(255*o),green:Math.round(255*a),blue:Math.round(255*s),alpha:r}}(n)),n}let lp=(e,t)=>{let n=lf(e),i=lf(t);if(!n||!i)return lc(e,t);let r={...n};return e=>(r.red=ld(n.red,i.red,e),r.green=ld(n.green,i.green,e),r.blue=ld(n.blue,i.blue,e),r.alpha=oU(n.alpha,i.alpha,e),aL.transform(r))},lm=new Set(["none","hidden"]);function lg(e,t){return n=>oU(e,t,n)}function lv(e){return"number"==typeof e?lg:"string"==typeof e?oB(e)?lc:aB.test(e)?lp:lb:Array.isArray(e)?ly:"object"==typeof e?aB.test(e)?lp:lx:lc}function ly(e,t){let n=[...e],i=n.length,r=e.map((e,n)=>lv(e)(e,t[n]));return e=>{for(let t=0;t<i;t++)n[t]=r[t](e);return n}}function lx(e,t){let n={...e,...t},i={};for(let r in n)void 0!==e[r]&&void 0!==t[r]&&(i[r]=lv(e[r])(e[r],t[r]));return e=>{for(let t in i)n[t]=i[t](e);return n}}let lb=(e,t)=>{let n=aq.createTransformer(t),i=aK(e),r=aK(t);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?lm.has(e)&&!r.values.length||lm.has(t)&&!i.values.length?function(e,t){return lm.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):la(ly(function(e,t){let n=[],i={color:0,var:0,number:0};for(let o=0;o<t.values.length;o++){var r;let a=t.types[o],s=e.indexes[a][i[a]],l=null!=(r=e.values[s])?r:0;n[o]=l,i[a]++}return n}(i,r),r.values),n):(ao(!0,"Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition."),"complex-values-different"),lc(e,t))};function lw(e,t,n){return"number"==typeof e&&"number"==typeof t&&"number"==typeof n?oU(e,t,n):lv(e)(e,t)}let lS=e=>{let t=t=>{let{timestamp:n}=t;return e(n)};return{start:function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return ay.update(t,e)},stop:()=>ax(t),now:()=>ab.isProcessing?ab.timestamp:a8.now()}},lE=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i="",r=Math.max(Math.round(t/n),2);for(let t=0;t<r;t++)i+=Math.round(1e4*e(t/(r-1)))/1e4+", ";return"linear(".concat(i.substring(0,i.length-2),")")};function l_(e){let t=0,n=e.next(t);for(;!n.done&&t<2e4;)t+=50,n=e.next(t);return t>=2e4?1/0:t}function lM(e,t,n){var i,r;let o=Math.max(t-5,0);return i=n-e(o),(r=t-o)?1e3/r*i:0}let lP={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1};function lA(e,t){return e*Math.sqrt(1-t*t)}let lC=["duration","bounce"],lT=["stiffness","damping","mass"];function lk(e,t){return t.some(t=>void 0!==e[t])}function lN(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lP.visualDuration,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lP.bounce,i="object"!=typeof t?{visualDuration:t,keyframes:[0,1],bounce:n}:t,{restSpeed:r,restDelta:o}=i,a=i.keyframes[0],s=i.keyframes[i.keyframes.length-1],l={done:!1,value:a},{stiffness:u,damping:c,mass:d,duration:h,velocity:f,isResolvedFromDuration:p}=function(e){let t={velocity:lP.velocity,stiffness:lP.stiffness,damping:lP.damping,mass:lP.mass,isResolvedFromDuration:!1,...e};if(!lk(e,lT)&&lk(e,lC))if(e.visualDuration){let n=2*Math.PI/(1.2*e.visualDuration),i=n*n,r=2*o1(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:lP.mass,stiffness:i,damping:r}}else{let n=function(e){let t,n,{duration:i=lP.duration,bounce:r=lP.bounce,velocity:o=lP.velocity,mass:a=lP.mass}=e;ao(i<=ls(lP.maxDuration),"Spring duration must be 10 seconds or less","spring-duration-limit");let s=1-r;s=o1(lP.minDamping,lP.maxDamping,s),i=o1(lP.minDuration,lP.maxDuration,i/1e3),s<1?(t=e=>{let t=e*s,n=t*i;return .001-(t-o)/lA(e,s)*Math.exp(-n)},n=e=>{let n=e*s*i,r=Math.pow(s,2)*Math.pow(e,2)*i,a=Math.exp(-n),l=lA(Math.pow(e,2),s);return(n*o+o-r)*a*(-t(e)+.001>0?-1:1)/l}):(t=e=>-.001+Math.exp(-e*i)*((e-o)*i+1),n=e=>i*i*(o-e)*Math.exp(-e*i));let l=function(e,t,n){let i=n;for(let n=1;n<12;n++)i-=e(i)/t(i);return i}(t,n,5/i);if(i=ls(i),isNaN(l))return{stiffness:lP.stiffness,damping:lP.damping,duration:i};{let e=Math.pow(l,2)*a;return{stiffness:e,damping:2*s*Math.sqrt(a*e),duration:i}}}(e);(t={...t,...n,mass:lP.mass}).isResolvedFromDuration=!0}return t}({...i,velocity:-((i.velocity||0)/1e3)}),m=f||0,g=c/(2*Math.sqrt(u*d)),v=s-a,y=Math.sqrt(u/d)/1e3,x=5>Math.abs(v);if(r||(r=x?lP.restSpeed.granular:lP.restSpeed.default),o||(o=x?lP.restDelta.granular:lP.restDelta.default),g<1){let t=lA(y,g);e=e=>s-Math.exp(-g*y*e)*((m+g*y*v)/t*Math.sin(t*e)+v*Math.cos(t*e))}else if(1===g)e=e=>s-Math.exp(-y*e)*(v+(m+y*v)*e);else{let t=y*Math.sqrt(g*g-1);e=e=>{let n=Math.exp(-g*y*e),i=Math.min(t*e,300);return s-n*((m+g*y*v)*Math.sinh(i)+t*v*Math.cosh(i))/t}}let b={calculatedDuration:p&&h||null,next:t=>{let n=e(t);if(p)l.done=t>=h;else{let i=0===t?m:0;g<1&&(i=0===t?ls(m):lM(e,t,n));let a=Math.abs(s-n)<=o;l.done=Math.abs(i)<=r&&a}return l.value=l.done?s:n,l},toString:()=>{let e=Math.min(l_(b),2e4),t=lE(t=>b.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return b}function lR(e){let t,n,{keyframes:i,velocity:r=0,power:o=.8,timeConstant:a=325,bounceDamping:s=10,bounceStiffness:l=500,modifyTarget:u,min:c,max:d,restDelta:h=.5,restSpeed:f}=e,p=i[0],m={done:!1,value:p},g=o*r,v=p+g,y=void 0===u?v:u(v);y!==v&&(g=y-p);let x=e=>-g*Math.exp(-e/a),b=e=>y+x(e),w=e=>{let t=x(e),n=b(e);m.done=Math.abs(t)<=h,m.value=m.done?y:n},S=e=>{let i;if(i=m.value,void 0!==c&&i<c||void 0!==d&&i>d){var r;t=e,n=lN({keyframes:[m.value,(r=m.value,void 0===c?d:void 0===d||Math.abs(c-r)<Math.abs(d-r)?c:d)],velocity:lM(b,e,m.value),damping:s,stiffness:l,restDelta:h,restSpeed:f})}};return S(0),{calculatedDuration:null,next:e=>{let i=!1;return(n||void 0!==t||(i=!0,w(e),S(e)),void 0!==t&&e>=t)?n.next(e-t):(i||w(e),m)}}}lN.applyToOptions=e=>{let t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2?arguments[2]:void 0,i=n({...e,keyframes:[0,t]}),r=Math.min(l_(i),2e4);return{type:"keyframes",ease:e=>i.next(r*e).value/t,duration:r/1e3}}(e,100,lN);return e.ease=t.ease,e.duration=ls(t.duration),e.type="keyframes",e};let lD=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function lj(e,t,n,i){return e===t&&n===i?af:r=>0===r||1===r?r:lD(function(e,t,n,i,r){let o,a,s=0;do(o=lD(a=t+(n-t)/2,i,r)-e)>0?n=a:t=a;while(Math.abs(o)>1e-7&&++s<12)return a}(r,0,1,e,n),t,i)}let lO=lj(.42,0,1,1),lL=lj(0,0,.58,1),lV=lj(.42,0,.58,1),lI=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,lB=e=>t=>1-e(1-t),lF=lj(.33,1.53,.69,.99),lz=lB(lF),lU=lI(lz),lH=e=>(e*=2)<1?.5*lz(e):.5*(2-Math.pow(2,-10*(e-1))),lK=e=>1-Math.sin(Math.acos(e)),lW=lB(lK),lX=lI(lK),lY=e=>Array.isArray(e)&&"number"==typeof e[0],lq={linear:af,easeIn:lO,easeInOut:lV,easeOut:lL,circIn:lK,circInOut:lX,circOut:lW,backIn:lz,backInOut:lU,backOut:lF,anticipate:lH},lZ=e=>{if(lY(e)){aa(4===e.length,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");let[t,n,i,r]=e;return lj(t,n,i,r)}return"string"==typeof e?(aa(void 0!==lq[e],"Invalid easing type '".concat(e,"'"),"invalid-easing-type"),lq[e]):e},lG=(e,t,n)=>{let i=t-e;return 0===i?1:(n-e)/i};function l$(e){var t;let{duration:n=300,keyframes:i,times:r,ease:o="easeInOut"}=e,a=Array.isArray(o)&&"number"!=typeof o[0]?o.map(lZ):lZ(o),s={done:!1,value:i[0]},l=function(e,t){let{clamp:n=!0,ease:i,mixer:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=e.length;if(aa(o===t.length,"Both input and output ranges must be the same length","range-length"),1===o)return()=>t[0];if(2===o&&t[0]===t[1])return()=>t[1];let a=e[0]===e[1];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());let s=function(e,t,n){let i=[],r=n||ap.mix||lw,o=e.length-1;for(let n=0;n<o;n++){let o=r(e[n],e[n+1]);t&&(o=la(Array.isArray(t)?t[n]||af:t,o)),i.push(o)}return i}(t,i,r),l=s.length,u=n=>{if(a&&n<e[0])return t[0];let i=0;if(l>1)for(;i<e.length-2&&!(n<e[i+1]);i++);let r=lG(e[i],e[i+1],n);return s[i](r)};return n?t=>u(o1(e[0],e[o-1],t)):u}((t=r&&r.length===i.length?r:function(e){let t=[0];return!function(e,t){let n=e[e.length-1];for(let i=1;i<=t;i++){let r=lG(0,t,i);e.push(oU(n,1,r))}}(t,e.length-1),t}(i),t.map(e=>e*n)),i,{ease:Array.isArray(a)?a:i.map(()=>a||lV).splice(0,i.length-1)});return{calculatedDuration:n,next:e=>(s.value=l(e),s.done=e>=n,s)}}let lQ=e=>null!==e;function lJ(e,t,n){let{repeat:i,repeatType:r="loop"}=t,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=e.filter(lQ),s=o<0||i&&"loop"!==r&&i%2==1?0:a.length-1;return s&&void 0!==n?n:a[s]}let l0={decay:lR,inertia:lR,tween:l$,keyframes:l$,spring:lN};function l1(e){"string"==typeof e.type&&(e.type=l0[e.type])}class l2{get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}constructor(){this.updateFinished()}}let l5=e=>e/100;class l3 extends l2{initAnimation(){let{options:e}=this;l1(e);let{type:t=l$,repeat:n=0,repeatDelay:i=0,repeatType:r,velocity:o=0}=e,{keyframes:a}=e,s=t||l$;s!==l$&&"number"!=typeof a[0]&&(this.mixKeyframes=la(l5,lw(a[0],a[1])),a=[0,100]);let l=s({...e,keyframes:a});"mirror"===r&&(this.mirroredGenerator=s({...e,keyframes:[...a].reverse(),velocity:-o})),null===l.calculatedDuration&&(l.calculatedDuration=l_(l));let{calculatedDuration:u}=l;this.calculatedDuration=u,this.resolvedDuration=u+i,this.totalDuration=this.resolvedDuration*(n+1)-i,this.generator=l}updateTime(e){let t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{generator:n,totalDuration:i,mixKeyframes:r,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:s}=this;if(null===this.startTime)return n.next(0);let{delay:l=0,keyframes:u,repeat:c,repeatType:d,repeatDelay:h,type:f,onUpdate:p,finalKeyframe:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);let g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?g<0:g>i;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=i);let y=this.currentTime,x=n;if(c){let e=Math.min(this.currentTime,i)/a,t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,(t=Math.min(t,c+1))%2&&("reverse"===d?(n=1-n,h&&(n-=h/a)):"mirror"===d&&(x=o)),y=o1(0,1,n)*a}let b=v?{done:!1,value:u[0]}:x.next(y);r&&(b.value=r(b.value));let{done:w}=b;v||null===s||(w=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);let S=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return S&&f!==lR&&(b.value=lJ(u,this.options,m,this.speed)),p&&p(b.value),S&&this.finish(),b}then(e,t){return this.finished.then(e,t)}get duration(){return this.calculatedDuration/1e3}get time(){return this.currentTime/1e3}set time(e){var t;e=ls(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null==(t=this.driver)||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(a8.now());let t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=this.currentTime/1e3)}play(){var e,t;if(this.isStopped)return;let{driver:n=lS,startTime:i}=this.options;this.driver||(this.driver=n(e=>this.tick(e))),null==(e=(t=this.options).onPlay)||e.call(t);let r=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=r):null!==this.holdTime?this.startTime=r-this.holdTime:this.startTime||(this.startTime=null!=i?i:r),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(a8.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",null==(e=(t=this.options).onComplete)||e.call(t)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null==(e=(t=this.options).onCancel)||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,ll.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null==(t=this.driver)||t.stop(),e.observe(this)}constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var e,t;let{motionValue:n}=this.options;n&&n.updatedAt!==a8.now()&&this.tick(a8.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),null==(e=(t=this.options).onStop)||e.call(t))},ll.mainThread++,this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}}function l4(e){let t;return()=>(void 0===t&&(t=e()),t)}let l6=l4(()=>void 0!==window.ScrollTimeline),l9={},l8=function(e,t){let n=l4(e);return()=>{var e;return null!=(e=l9[t])?e:n()}}(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0},"linearEasing"),l7=e=>{let[t,n,i,r]=e;return"cubic-bezier(".concat(t,", ").concat(n,", ").concat(i,", ").concat(r,")")},ue={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:l7([0,.65,.55,1]),circOut:l7([.55,0,1,.45]),backIn:l7([.31,.01,.66,-.59]),backOut:l7([.33,1.53,.69,.99])};function ut(e){return"function"==typeof e&&"applyToOptions"in e}class un extends l2{play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;null==(e=(t=this.animation).finish)||e.call(t)}cancel(){try{this.animation.cancel()}catch(e){}}stop(){if(this.isStopped)return;this.isStopped=!0;let{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){if(!this.isPseudoElement){var e,t;null==(e=(t=this.animation).commitStyles)||e.call(t)}}get duration(){var e,t;return Number((null==(t=this.animation.effect)||null==(e=t.getComputedTiming)?void 0:e.call(t).duration)||0)/1e3}get time(){return(Number(this.animation.currentTime)||0)/1e3}set time(e){this.finishedTime=null,this.animation.currentTime=ls(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline(e){let{timeline:t,observe:n}=e;if(this.allowFlatten){var i;null==(i=this.animation.effect)||i.updateTiming({easing:"linear"})}return(this.animation.onfinish=null,t&&l6())?(this.animation.timeline=t,af):n(this)}constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;let{element:t,name:n,keyframes:i,pseudoElement:r,allowFlatten:o=!1,finalKeyframe:a,onComplete:s}=e;this.isPseudoElement=!!r,this.allowFlatten=o,this.options=e,aa("string"!=typeof e.type,'Mini animate() doesn\'t support "type" as a string.',"mini-spring");let l=function(e){let{type:t,...n}=e;return ut(t)&&l8()?t.applyToOptions(n):(null!=n.duration||(n.duration=300),null!=n.ease||(n.ease="easeOut"),n)}(e);this.animation=function(e,t,n){let{delay:i=0,duration:r=300,repeat:o=0,repeatType:a="loop",ease:s="easeOut",times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,c={[t]:n};l&&(c.offset=l);let d=function e(t,n){if(t)return"function"==typeof t?l8()?lE(t,n):"ease-out":lY(t)?l7(t):Array.isArray(t)?t.map(t=>e(t,n)||ue.easeOut):ue[t]}(s,r);Array.isArray(d)&&(c.easing=d),ag.value&&ll.waapi++;let h={delay:i,duration:r,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:o+1,direction:"reverse"===a?"alternate":"normal"};u&&(h.pseudoElement=u);let f=e.animate(c,h);return ag.value&&f.finished.finally(()=>{ll.waapi--}),f}(t,n,i,l,r),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){let e=lJ(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,n){t.startsWith("--")?e.style.setProperty(t,n):e.style[t]=n}(t,n,e),this.animation.cancel()}null==s||s(),this.notifyFinished()}}}let ui={anticipate:lH,backInOut:lU,circInOut:lX};class ur extends un{updateMotionValue(e){var t;let{motionValue:n,onUpdate:i,onComplete:r,element:o,...a}=this.options;if(!n)return;if(void 0!==e)return void n.set(e);let s=new l3({...a,autoplay:!1}),l=ls(null!=(t=this.finishedTime)?t:this.time);n.setWithVelocity(s.sample(l-10).value,s.sample(l).value,10),s.stop()}constructor(e){!function(e){"string"==typeof e.ease&&e.ease in ui&&(e.ease=ui[e.ease])}(e),l1(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}}let uo=(e,t)=>"zIndex"!==t&&!!("number"==typeof e||Array.isArray(e)||"string"==typeof e&&(aq.test(e)||"0"===e)&&!e.startsWith("url(")),ua=new Set(["opacity","clipPath","filter","transform"]),us=l4(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class ul extends l2{onKeyframesResolved(e,t,n,i){this.keyframeResolver=void 0;let{name:r,type:o,velocity:a,delay:s,isHandoff:l,onUpdate:u}=n;this.resolvedAt=a8.now(),!function(e,t,n,i){let r=e[0];if(null===r)return!1;if("display"===t||"visibility"===t)return!0;let o=e[e.length-1],a=uo(r,t),s=uo(o,t);return ao(a===s,"You are trying to animate ".concat(t,' from "').concat(r,'" to "').concat(o,'". "').concat(a?o:r,'" is not an animatable value.'),"value-not-animatable"),!!a&&!!s&&(function(e){let t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||ut(n))&&i)}(e,r,o,a)&&((ap.instantAnimations||!s)&&(null==u||u(lJ(e,n,t))),e[0]=e[e.length-1],lr(n),n.repeat=0);let c={startTime:i?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},d=!l&&function(e){var t;let{motionValue:n,name:i,repeatDelay:r,repeatType:o,damping:a,type:s}=e;if(!((null==n||null==(t=n.owner)?void 0:t.current)instanceof HTMLElement))return!1;let{onUpdate:l,transformTemplate:u}=n.owner.getProps();return us()&&i&&ua.has(i)&&("transform"!==i||!u)&&!l&&!r&&"mirror"!==o&&0!==a&&"inertia"!==s}(c)?new ur({...c,element:c.motionValue.owner.current}):new l3(c);d.finished.then(()=>this.notifyFinished()).catch(af),this.pendingTimeline&&(this.stopTimeline=d.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=d}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){if(!this._animation){var e;null==(e=this.keyframeResolver)||e.resume(),aM=!0,aA(),aP(),aM=!1}return this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),null==(e=this.keyframeResolver)||e.cancel()}constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:o="loop",keyframes:a,name:s,motionValue:l,element:u,...c}){var d;super(),this.stop=()=>{var e,t;this._animation&&(this._animation.stop(),null==(t=this.stopTimeline)||t.call(this)),null==(e=this.keyframeResolver)||e.cancel()},this.createdAt=a8.now();let h={autoplay:e,delay:t,type:n,repeat:i,repeatDelay:r,repeatType:o,name:s,motionValue:l,element:u,...c},f=(null==u?void 0:u.KeyframeResolver)||aC;this.keyframeResolver=new f(a,(e,t,n)=>this.onKeyframesResolved(e,t,h,!n),s,l,u),null==(d=this.keyframeResolver)||d.scheduleResolve()}}let uu=e=>null!==e,uc={type:"spring",stiffness:500,damping:25,restSpeed:10},ud={type:"keyframes",duration:.8},uh={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},uf=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;return a=>{let s=lt(i,e)||{},l=s.delay||i.delay||0,{elapsed:u=0}=i;u-=ls(l);let c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...s,delay:-u,onUpdate:e=>{t.set(e),s.onUpdate&&s.onUpdate(e)},onComplete:()=>{a(),s.onComplete&&s.onComplete()},name:e,motionValue:t,element:o?void 0:r};!function(e){let{when:t,delay:n,delayChildren:i,staggerChildren:r,staggerDirection:o,repeat:a,repeatType:s,repeatDelay:l,from:u,elapsed:c,...d}=e;return!!Object.keys(d).length}(s)&&Object.assign(c,((e,t)=>{let{keyframes:n}=t;return n.length>2?ud:oM.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:uc:uh})(e,c)),c.duration&&(c.duration=ls(c.duration)),c.repeatDelay&&(c.repeatDelay=ls(c.repeatDelay)),void 0!==c.from&&(c.keyframes[0]=c.from);let d=!1;if(!1!==c.type&&(0!==c.duration||c.repeatDelay)||(lr(c),0===c.delay&&(d=!0)),(ap.instantAnimations||ap.skipAnimations)&&(d=!0,lr(c),c.delay=0),c.allowFlatten=!s.type&&!s.ease,d&&!o&&void 0!==t.get()){let e=function(e,t,n){let{repeat:i,repeatType:r="loop"}=t,o=e.filter(uu),a=i&&"loop"!==r&&i%2==1?0:o.length-1;return o[a]}(c.keyframes,s);if(void 0!==e)return void ay.update(()=>{c.onUpdate(e),c.onComplete()})}return s.isSync?new l3(c):new ul(c)}};function up(e,t){let{delay:n=0,transitionOverride:i,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:o=e.getDefaultTransition(),transitionEnd:a,...s}=t;i&&(o=i);let l=[],u=r&&e.animationState&&e.animationState.getState()[r];for(let t in s){var c;let i=e.getValue(t,null!=(c=e.latestValues[t])?c:null),r=s[t];if(void 0===r||u&&function(e,t){let{protectedKeys:n,needsAnimating:i}=e,r=n.hasOwnProperty(t)&&!0!==i[t];return i[t]=!1,r}(u,t))continue;let a={delay:n,...lt(o||{},t)},d=i.get();if(void 0!==d&&!i.isAnimating&&!Array.isArray(r)&&r===d&&!a.velocity)continue;let h=!1;if(window.MotionHandoffAnimation){let n=e.props[s9];if(n){let e=window.MotionHandoffAnimation(n,t,ay);null!==e&&(a.startTime=e,h=!0)}}li(e,t),i.start(uf(t,i,r,e.shouldReduceMotion&&o0.has(t)?{type:!1}:a,e,h));let f=i.animation;f&&l.push(f)}return a&&Promise.all(l).then(()=>{ay.update(()=>{a&&function(e,t){let{transitionEnd:n={},transition:i={},...r}=le(e,t)||{};for(let t in r={...r,...n}){var o;let n=ln(o=r[t])?o[o.length-1]||0:o;e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,sr(n))}}(e,a)})}),l}function um(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),a=e.size,s=(a-1)*i;return"function"==typeof n?n(o,a):1===r?o*i:s-o*i}function ug(e,t){var n;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=le(e,t,"exit"===i.type?null==(n=e.presenceContext)?void 0:n.custom:void 0),{transition:o=e.getDefaultTransition()||{}}=r||{};i.transitionOverride&&(o=i.transitionOverride);let a=r?()=>Promise.all(up(e,r,i)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,{delayChildren:r=0,staggerChildren:a,staggerDirection:s}=o;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6?arguments[6]:void 0,s=[];for(let l of e.variantChildren)l.notify("AnimationStart",t),s.push(ug(l,t,{...a,delay:n+("function"==typeof i?0:i)+um(e.variantChildren,l,i,r,o)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(s)}(e,t,n,r,a,s,i)}:()=>Promise.resolve(),{when:l}=o;if(!l)return Promise.all([a(),s(i.delay)]);{let[e,t]="beforeChildren"===l?[a,s]:[s,a];return e().then(()=>t())}}function uv(e,t){if(!Array.isArray(t))return!1;let n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}let uy=sx.length,ux=[...sy].reverse(),ub=sy.length;function uw(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function uS(){return{animate:uw(!0),whileInView:uw(),whileHover:uw(),whileTap:uw(),whileDrag:uw(),whileFocus:uw(),exit:uw()}}class uE{update(){}constructor(e){this.isMounted=!1,this.node=e}}let u_=0,uM={x:!1,y:!1};function uP(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}let uA=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary;function uC(e){return{point:{x:e.pageX,y:e.pageY}}}function uT(e,t,n,i){return uP(e,t,e=>uA(e)&&n(e,uC(e)),i)}function uk(e){return e.max-e.min}function uN(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=i,e.originPoint=oU(t.min,t.max,e.origin),e.scale=uk(n)/uk(t),e.translate=oU(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function uR(e,t,n,i){uN(e.x,t.x,n.x,i?i.originX:void 0),uN(e.y,t.y,n.y,i?i.originY:void 0)}function uD(e,t,n){e.min=n.min+t.min,e.max=e.min+uk(t)}function uj(e,t,n){e.min=t.min-n.min,e.max=e.min+uk(t)}function uO(e,t,n){uj(e.x,t.x,n.x),uj(e.y,t.y,n.y)}function uL(e){return[e("x"),e("y")]}let uV=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},uI=(e,t)=>Math.abs(e-t);class uB{updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ax(this.updatePoint)}constructor(e,t,{transformPagePoint:n,contextWindow:i=window,dragSnapToOrigin:r=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let e=uU(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){return Math.sqrt(uI(e.x,t.x)**2+uI(e.y,t.y)**2)}(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!n)return;let{point:i}=e,{timestamp:r}=ab;this.history.push({...i,timestamp:r});let{onStart:o,onMove:a}=this.handlers;t||(o&&o(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),a&&a(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=uF(t,this.transformPagePoint),ay.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();let{onEnd:n,onSessionEnd:i,resumeAnimation:r}=this.handlers;if(this.dragSnapToOrigin&&r&&r(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let o=uU("pointercancel"===e.type?this.lastMoveEventInfo:uF(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,o),i&&i(e,o)},!uA(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=i||window;let a=uF(uC(e),this.transformPagePoint),{point:s}=a,{timestamp:l}=ab;this.history=[{...s,timestamp:l}];let{onSessionStart:u}=t;u&&u(e,uU(a,this.history)),this.removeListeners=la(uT(this.contextWindow,"pointermove",this.handlePointerMove),uT(this.contextWindow,"pointerup",this.handlePointerUp),uT(this.contextWindow,"pointercancel",this.handlePointerUp))}}function uF(e,t){return t?{point:t(e.point)}:e}function uz(e,t){return{x:e.x-t.x,y:e.y-t.y}}function uU(e,t){let{point:n}=e;return{point:n,delta:uz(n,uH(t)),offset:uz(n,t[0]),velocity:function(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null,r=uH(e);for(;n>=0&&(i=e[n],!(r.timestamp-i.timestamp>ls(.1)));)n--;if(!i)return{x:0,y:0};let o=(r.timestamp-i.timestamp)/1e3;if(0===o)return{x:0,y:0};let a={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}(t,.1)}}function uH(e){return e[e.length-1]}function uK(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function uW(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}function uX(e,t,n){return{min:uY(e,t),max:uY(e,n)}}function uY(e,t){return"number"==typeof e?e:e[t]||0}let uq=new WeakMap;class uZ{start(e){let{snapToCursor:t=!1,distanceThreshold:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{presenceContext:i}=this.visualElement;if(i&&!1===i.isPresent)return;let r=e=>{let{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(uC(e).point)},o=(e,t)=>{let{drag:n,dragPropagation:i,onDragStart:r}=this.getProps();if(n&&!i&&(this.openDragLock&&this.openDragLock(),this.openDragLock=function(e){if("x"===e||"y"===e)if(uM[e])return null;else return uM[e]=!0,()=>{uM[e]=!1};return uM.x||uM.y?null:(uM.x=uM.y=!0,()=>{uM.x=uM.y=!1})}(n),!this.openDragLock))return;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),uL(e=>{let t=this.getAxisMotionValue(e).get()||0;if(o9.test(t)){let{projection:n}=this.visualElement;if(n&&n.layout){let i=n.layout.layoutBox[e];i&&(t=uk(i)*(parseFloat(t)/100))}}this.originPoint[e]=t}),r&&ay.postRender(()=>r(e,t)),li(this.visualElement,"transform");let{animationState:o}=this.visualElement;o&&o.setActive("whileDrag",!0)},a=(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;let{dragPropagation:n,dragDirectionLock:i,onDirectionLock:r,onDrag:o}=this.getProps();if(!n&&!this.openDragLock)return;let{offset:a}=t;if(i&&null===this.currentDirection){this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}(a),null!==this.currentDirection&&r&&r(this.currentDirection);return}this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),o&&o(e,t)},s=(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},l=()=>uL(e=>{var t;return"paused"===this.getAnimationState(e)&&(null==(t=this.getAxisMotionValue(e).animation)?void 0:t.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new uB(e,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:s,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:n,contextWindow:uV(this.visualElement)})}stop(e,t){let n=e||this.latestPointerEvent,i=t||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!i||!n)return;let{velocity:o}=i;this.startAnimation(o);let{onDragEnd:a}=this.getProps();a&&ay.postRender(()=>a(n,i))}cancel(){this.isDragging=!1;let{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;let{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){let{drag:i}=this.getProps();if(!n||!uG(e,i,this.currentDirection))return;let r=this.getAxisMotionValue(e),o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=function(e,t,n){let{min:i,max:r}=t;return void 0!==i&&e<i?e=n?oU(i,e,n.min):Math.max(e,i):void 0!==r&&e>r&&(e=n?oU(r,e,n.max):Math.min(e,r)),e}(o,this.constraints[e],this.elastic[e])),r.set(o)}resolveConstraints(){var e;let{dragConstraints:t,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null==(e=this.visualElement.projection)?void 0:e.layout,r=this.constraints;t&&s6(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=function(e,t){let{top:n,left:i,bottom:r,right:o}=t;return{x:uK(e.x,i,o),y:uK(e.y,n,r)}}(i.layoutBox,t):this.constraints=!1,this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.35;return!1===e?e=0:!0===e&&(e=.35),{x:uX(e,"left","right"),y:uX(e,"top","bottom")}}(n),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&uL(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){let n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(i.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){var e;let{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!s6(t))return!1;let i=t.current;aa(null!==i,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");let{projection:r}=this.visualElement;if(!r||!r.layout)return!1;let o=function(e,t,n){let i=oJ(e,n),{scroll:r}=t;return r&&(oG(i.x,r.offset.x),oG(i.y,r.offset.y)),i}(i,r.root,this.visualElement.getTransformPagePoint()),a=(e=r.layout.layoutBox,{x:uW(e.x,o.x),y:uW(e.y,o.y)});if(n){let e=n(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(a));this.hasMutatedConstraints=!!e,e&&(a=oz(e))}return a}startAnimation(e){let{drag:t,dragMomentum:n,dragElastic:i,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),s=this.constraints||{};return Promise.all(uL(a=>{if(!uG(a,t,this.currentDirection))return;let l=s&&s[a]||{};o&&(l={min:0,max:0});let u={type:"inertia",velocity:n?e[a]:0,bounceStiffness:i?200:1e6,bounceDamping:i?40:1e7,timeConstant:750,restDelta:1,restSpeed:10,...r,...l};return this.startAxisValueAnimation(a,u)})).then(a)}startAxisValueAnimation(e,t){let n=this.getAxisMotionValue(e);return li(this.visualElement,e),n.start(uf(e,n,0,t,this.visualElement,!1))}stopAnimation(){uL(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){uL(e=>{var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.pause()})}getAnimationState(e){var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.state}getAxisMotionValue(e){let t="_drag".concat(e.toUpperCase()),n=this.visualElement.getProps();return n[t]||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){uL(t=>{let{drag:n}=this.getProps();if(!uG(t,n,this.currentDirection))return;let{projection:i}=this.visualElement,r=this.getAxisMotionValue(t);if(i&&i.layout){let{min:n,max:o}=i.layout.layoutBox[t];r.set(e[t]-oU(n,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!s6(t)||!n||!this.constraints)return;this.stopAnimation();let i={x:0,y:0};uL(e=>{let t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){let n=t.get();i[e]=function(e,t){let n=.5,i=uk(e),r=uk(t);return r>i?n=lG(t.min,t.max-i,e.min):i>r&&(n=lG(e.min,e.max-r,t.min)),o1(0,1,n)}({min:n,max:n},this.constraints[e])}});let{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),uL(t=>{if(!uG(t,e,null))return;let n=this.getAxisMotionValue(t),{min:r,max:o}=this.constraints[t];n.set(oU(r,o,i[t]))})}addListeners(){if(!this.visualElement.current)return;uq.set(this.visualElement,this);let e=uT(this.visualElement.current,"pointerdown",e=>{let{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{let{dragConstraints:e}=this.getProps();s6(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,i=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),ay.read(t);let r=uP(window,"resize",()=>this.scalePositionWithinConstraints()),o=n.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(uL(e=>{let n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))}),this.visualElement.render())});return()=>{r(),e(),i(),o&&o()}}getProps(){let e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:r=!1,dragElastic:o=.35,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:i,dragConstraints:r,dragElastic:o,dragMomentum:a}}constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=sh(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}}function uG(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}let u$=e=>(t,n)=>{e&&ay.postRender(()=>e(t,n))};var uQ=d;let uJ={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function u0(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}let u1={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e)if(!o8.test(e))return e;else e=parseFloat(e);let n=u0(e,t.target.x),i=u0(e,t.target.y);return"".concat(n,"% ").concat(i,"%")}},u2=!1;class u5 extends uQ.Component{componentDidMount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:i}=this.props,{projection:r}=e;for(let e in u4)sR[e]=u4[e],oV(e)&&(sR[e].isCSSVariable=!0);r&&(t.group&&t.group.add(r),n&&n.register&&i&&n.register(r),u2&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),uJ.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){let{layoutDependency:t,visualElement:n,drag:i,isPresent:r}=this.props,{projection:o}=n;return o&&(o.isPresent=r,u2=!0,i||e.layoutDependency!==t||void 0===t||e.isPresent!==r?o.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?o.promote():o.relegate()||ay.postRender(()=>{let e=o.getStack();e&&e.members.length||this.safeToRemove()}))),null}componentDidUpdate(){let{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),sa.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:i}=e;u2=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){let{safeToRemove:e}=this.props;e&&e()}render(){return null}}function u3(e){let[t,n]=ob(),i=(0,uQ.useContext)(os);return(0,c.jsx)(u5,{...e,layoutGroup:i,switchLayoutGroup:(0,uQ.useContext)(s8),isPresent:t,safeToRemove:n})}let u4={borderRadius:{...u1,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:u1,borderTopRightRadius:u1,borderBottomLeftRadius:u1,borderBottomRightRadius:u1,boxShadow:{correct:(e,t)=>{let{treeScale:n,projectionDelta:i}=t,r=aq.parse(e);if(r.length>5)return e;let o=aq.createTransformer(e),a=+("number"!=typeof r[0]),s=i.x.scale*n.x,l=i.y.scale*n.y;r[0+a]/=s,r[1+a]/=l;let u=oU(s,l,.5);return"number"==typeof r[2+a]&&(r[2+a]/=u),"number"==typeof r[3+a]&&(r[3+a]/=u),o(r)}}};function u6(e){return oh(e)&&"ownerSVGElement"in e}let u9=(e,t)=>e.depth-t.depth;class u8{add(e){a7(this.children,e),this.isDirty=!0}remove(e){se(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(u9),this.isDirty=!1,this.children.forEach(e)}constructor(){this.children=[],this.isDirty=!1}}let u7=["TopLeft","TopRight","BottomLeft","BottomRight"],ce=u7.length,ct=e=>"string"==typeof e?parseFloat(e):e,cn=e=>"number"==typeof e||o8.test(e);function ci(e,t){return void 0!==e[t]?e[t]:e.borderRadius}let cr=ca(0,.5,lW),co=ca(.5,.95,af);function ca(e,t,n){return i=>i<e?0:i>t?1:n(lG(e,t,i))}function cs(e,t){e.min=t.min,e.max=t.max}function cl(e,t){cs(e.x,t.x),cs(e.y,t.y)}function cu(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function cc(e,t,n,i,r){return e-=t,e=i+1/n*(e-i),void 0!==r&&(e=i+1/r*(e-i)),e}function cd(e,t,n,i,r){let[o,a,s]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;if(o9.test(t)&&(t=parseFloat(t),t=oU(a.min,a.max,t/100)-a.min),"number"!=typeof t)return;let s=oU(o.min,o.max,i);e===o&&(s-=t),e.min=cc(e.min,t,n,s,r),e.max=cc(e.max,t,n,s,r)}(e,t[o],t[a],t[s],t.scale,i,r)}let ch=["x","scaleX","originX"],cf=["y","scaleY","originY"];function cp(e,t,n,i){cd(e.x,t,ch,n?n.x:void 0,i?i.x:void 0),cd(e.y,t,cf,n?n.y:void 0,i?i.y:void 0)}function cm(e){return 0===e.translate&&1===e.scale}function cg(e){return cm(e.x)&&cm(e.y)}function cv(e,t){return e.min===t.min&&e.max===t.max}function cy(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function cx(e,t){return cy(e.x,t.x)&&cy(e.y,t.y)}function cb(e){return uk(e.x)/uk(e.y)}function cw(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class cS{add(e){a7(this.members,e),e.scheduleRender()}remove(e){if(se(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){let e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){let t,n=this.members.findIndex(t=>e===t);if(0===n)return!1;for(let e=n;e>=0;e--){let n=this.members[e];if(!1!==n.isPresent){t=n;break}}return!!t&&(this.promote(t),!0)}promote(e,t){let n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);let{crossfade:i}=e.options;!1===i&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{let{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}constructor(){this.members=[]}}let cE={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},c_=["","X","Y","Z"],cM=0;function cP(e,t,n,i){let{latestValues:r}=t;r[e]&&(n[e]=r[e],t.setStaticValue(e,0),i&&(i[e]=0))}function cA(e){let{attachResizeListener:t,defaultParent:n,measureScroll:i,checkIsScrollRoot:r,resetTransform:o}=e;return class{addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new st),this.eventHandlers.get(e).add(t)}notifyListeners(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];let r=this.eventHandlers.get(e);r&&r.notify(...n)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){if(this.instance)return;this.isSVG=u6(e)&&!(u6(e)&&"svg"===e.tagName),this.instance=e;let{layoutId:n,layout:i,visualElement:r}=this.options;if(r&&!r.current&&r.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(i||n)&&(this.isLayoutDirty=!0),t){let n,i=0,r=()=>this.root.updateBlockedByResize=!1;ay.read(()=>{i=window.innerWidth}),t(e,()=>{let e=window.innerWidth;e!==i&&(i=e,this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){let n=a8.now(),i=t=>{let{timestamp:r}=t,o=r-n;o>=250&&(ax(i),e(o-250))};return ay.setup(i,!0),()=>ax(i)}(r,250),uJ.hasAnimatedSinceResize&&(uJ.hasAnimatedSinceResize=!1,this.nodes.forEach(cL)))})}n&&this.root.registerSharedNode(n,this),!1!==this.options.animate&&r&&(n||i)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n,hasRelativeLayoutChanged:i,layout:o}=e;if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let a=this.options.transition||r.getDefaultTransition()||cK,{onLayoutAnimationStart:s,onLayoutAnimationComplete:l}=r.getProps(),u=!this.targetLayout||!cx(this.targetLayout,o),c=!n&&i;if(this.options.layoutRoot||this.resumeFrom||c||n&&(u||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);let e={...lt(a,"layout"),onPlay:s,onComplete:l};(r.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e),this.setAnimationOrigin(t,c)}else n||cL(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=o})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ax(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){!this.isUpdateBlocked()&&(this.isUpdating=!0,this.nodes&&this.nodes.forEach(cB),this.animationId++)}getTransformTemplate(){let{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&function e(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;let{visualElement:n}=t.options;if(!n)return;let i=n.props[s9];if(window.MotionHasOptimisedAnimation(i,"transform")){let{layout:e,layoutId:n}=t.options;window.MotionCancelOptimisedAnimation(i,"transform",ay,!(e||n))}let{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&e(r)}(this),this.root.isUpdating||this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let e=0;e<this.path.length;e++){let t=this.path[e];t.shouldResetTransform=!0,t.updateScroll("snapshot"),t.options.layoutRoot&&t.willUpdate(!1)}let{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;let i=this.getTransformTemplate();this.prevTransformTemplateValue=i?i(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(cD);return}if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(cj);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(cO),this.nodes.forEach(cC),this.nodes.forEach(cT)):this.nodes.forEach(cj),this.clearAllSnapshots();let e=a8.now();ab.delta=o1(0,1e3/60,e-ab.timestamp),ab.timestamp=e,ab.isProcessing=!0,aw.update.process(ab),aw.preRender.process(ab),aw.render.process(ab),ab.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,sa.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(cR),this.sharedNodes.forEach(cF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ay.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ay.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||uk(this.snapshot.measuredBox.x)||uk(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let e=0;e<this.path.length;e++)this.path[e].updateScroll();let e=this.layout;this.layout=this.measure(!1),this.layoutCorrected=sh(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);let{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){let t=r(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!o)return;let e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!cg(this.projectionDelta),n=this.getTransformTemplate(),i=n?n(this.latestValues,""):void 0,r=i!==this.prevTransformTemplateValue;e&&this.instance&&(t||oW(this.latestValues)||r)&&(o(this.instance,i),this.shouldResetTransform=!1,this.scheduleRender())}measure(){var e;let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0],n=this.measurePageBox(),i=this.removeElementScroll(n);return t&&(i=this.removeTransform(i)),cY((e=i).x),cY(e.y),{animationId:this.root.animationId,measuredBox:n,layoutBox:i,latestValues:{},source:this.id}}measurePageBox(){var e;let{visualElement:t}=this.options;if(!t)return sh();let n=t.measureViewportBox();if(!((null==(e=this.scroll)?void 0:e.wasRoot)||this.path.some(cZ))){let{scroll:e}=this.root;e&&(oG(n.x,e.offset.x),oG(n.y,e.offset.y))}return n}removeElementScroll(e){var t;let n=sh();if(cl(n,e),null==(t=this.scroll)?void 0:t.wasRoot)return n;for(let t=0;t<this.path.length;t++){let i=this.path[t],{scroll:r,options:o}=i;i!==this.root&&r&&o.layoutScroll&&(r.wasRoot&&cl(n,e),oG(n.x,r.offset.x),oG(n.y,r.offset.y))}return n}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=sh();cl(n,e);for(let e=0;e<this.path.length;e++){let i=this.path[e];!t&&i.options.layoutScroll&&i.scroll&&i!==i.root&&oQ(n,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),oW(i.latestValues)&&oQ(n,i.latestValues)}return oW(this.latestValues)&&oQ(n,this.latestValues),n}removeTransform(e){let t=sh();cl(t,e);for(let e=0;e<this.path.length;e++){let n=this.path[e];if(!n.instance||!oW(n.latestValues))continue;oK(n.latestValues)&&n.updateSnapshot();let i=sh();cl(i,n.measurePageBox()),cp(t,n.latestValues,n.snapshot?n.snapshot.layoutBox:void 0,i)}return oW(this.latestValues)&&cp(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ab.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){var e,t,n,i;let r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);let a=!!this.resumingFrom||this!==o;if(!(r||a&&this.isSharedProjectionDirty||this.isProjectionDirty||(null==(e=this.parent)?void 0:e.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;let{layout:s,layoutId:l}=this.options;if(this.layout&&(s||l)){if(this.resolvedRelativeTargetAt=ab.timestamp,!this.targetDelta&&!this.relativeTarget){let e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=sh(),this.relativeTargetOrigin=sh(),uO(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),cl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){if((this.target||(this.target=sh(),this.targetWithTransforms=sh()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target)?(this.forceRelativeParentToResolveTarget(),t=this.target,n=this.relativeTarget,i=this.relativeParent.target,uD(t.x,n.x,i.x),uD(t.y,n.y,i.y)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):cl(this.target,this.layout.layoutBox),oZ(this.target,this.targetDelta)):cl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;let e=this.getClosestProjectingParent();e&&!!e.resumingFrom==!!this.resumingFrom&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=sh(),this.relativeTargetOrigin=sh(),uO(this.relativeTargetOrigin,this.target,e.target),cl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ag.value&&cE.calculatedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||oK(this.parent.latestValues)||oX(this.parent.latestValues)))if(this.parent.isProjecting())return this.parent;else return this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;let t=this.getLead(),n=!!this.resumingFrom||this!==t,i=!0;if((this.isProjectionDirty||(null==(e=this.parent)?void 0:e.isProjectionDirty))&&(i=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(i=!1),this.resolvedRelativeTargetAt===ab.timestamp&&(i=!1),i)return;let{layout:r,layoutId:o}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(r||o))return;cl(this.layoutCorrected,this.layout.layoutBox);let a=this.treeScale.x,s=this.treeScale.y;!function(e,t,n){let i,r,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=n.length;if(a){t.x=t.y=1;for(let s=0;s<a;s++){r=(i=n[s]).projectionDelta;let{visualElement:a}=i.options;(!a||!a.props.style||"contents"!==a.props.style.display)&&(o&&i.options.layoutScroll&&i.scroll&&i!==i.root&&oQ(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),r&&(t.x*=r.x.scale,t.y*=r.y.scale,oZ(e,r)),o&&oW(i.latestValues)&&oQ(e,i.latestValues))}t.x<1.0000000000001&&t.x>.999999999999&&(t.x=1),t.y<1.0000000000001&&t.y>.999999999999&&(t.y=1)}}(this.layoutCorrected,this.treeScale,this.path,n),t.layout&&!t.target&&(1!==this.treeScale.x||1!==this.treeScale.y)&&(t.target=t.layout.layoutBox,t.targetWithTransforms=sh());let{target:l}=t;if(!l){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}this.projectionDelta&&this.prevProjectionDelta?(cu(this.prevProjectionDelta.x,this.projectionDelta.x),cu(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),uR(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===a&&this.treeScale.y===s&&cw(this.projectionDelta.x,this.prevProjectionDelta.x)&&cw(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),ag.value&&cE.calculatedProjections++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){var e;let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];if(null==(e=this.options.visualElement)||e.scheduleRender(),t){let e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=sc(),this.projectionDelta=sc(),this.projectionDeltaWithTransform=sc()}setAnimationOrigin(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.snapshot,r=i?i.latestValues:{},o={...this.latestValues},a=sc();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!n;let s=sh(),l=(i?i.source:void 0)!==(this.layout?this.layout.source:void 0),u=this.getStack(),c=!u||u.members.length<=1,d=!!(l&&!c&&!0===this.options.crossfade&&!this.path.some(cH));this.animationProgress=0,this.mixTargetDelta=n=>{let i=n/1e3;if(cz(a.x,e.x,i),cz(a.y,e.y,i),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout){var u,h,f,p,m,g;uO(s,this.layout.layoutBox,this.relativeParent.layout.layoutBox),f=this.relativeTarget,p=this.relativeTargetOrigin,m=s,g=i,cU(f.x,p.x,m.x,g),cU(f.y,p.y,m.y,g),t&&(u=this.relativeTarget,h=t,cv(u.x,h.x)&&cv(u.y,h.y))&&(this.isProjectionDirty=!1),t||(t=sh()),cl(t,this.relativeTarget)}l&&(this.animationValues=o,function(e,t,n,i,r,o){var a,s,l,u;r?(e.opacity=oU(0,null!=(a=n.opacity)?a:1,cr(i)),e.opacityExit=oU(null!=(s=t.opacity)?s:1,0,co(i))):o&&(e.opacity=oU(null!=(l=t.opacity)?l:1,null!=(u=n.opacity)?u:1,i));for(let r=0;r<ce;r++){let o="border".concat(u7[r],"Radius"),a=ci(t,o),s=ci(n,o);(void 0!==a||void 0!==s)&&(a||(a=0),s||(s=0),0===a||0===s||cn(a)===cn(s)?(e[o]=Math.max(oU(ct(a),ct(s),i),0),(o9.test(s)||o9.test(a))&&(e[o]+="%")):e[o]=s)}(t.rotate||n.rotate)&&(e.rotate=oU(t.rotate||0,n.rotate||0,i))}(o,r,this.latestValues,i,d,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=i},this.mixTargetDelta(1e3*!!this.options.layoutRoot)}startAnimation(e){var t,n,i;this.notifyListeners("animationStart"),null==(t=this.currentAnimation)||t.stop(),null==(i=this.resumingFrom)||null==(n=i.currentAnimation)||n.stop(),this.pendingAnimation&&(ax(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ay.update(()=>{uJ.hasAnimatedSinceResize=!0,ll.layout++,this.motionValue||(this.motionValue=sr(0)),this.currentAnimation=function(e,t,n){let i=a6(e)?e:sr(e);return i.start(uf("",i,t,n)),i.animation}(this.motionValue,[0,1e3],{...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{ll.layout--},onComplete:()=>{ll.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let e=this.getLead(),{targetWithTransforms:t,target:n,layout:i,latestValues:r}=e;if(t&&n&&i){if(this!==e&&this.layout&&i&&cq(this.options.animationType,this.layout.layoutBox,i.layoutBox)){n=this.target||sh();let t=uk(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;let i=uk(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+i}cl(t,n),oQ(t,r),uR(this.projectionDeltaWithTransform,this.layoutCorrected,t,r)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new cS),this.sharedNodes.get(e).add(t);let n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){let e=this.getStack();return!e||e.lead===this}getLead(){var e;let{layoutId:t}=this.options;return t&&(null==(e=this.getStack())?void 0:e.lead)||this}getPrevLead(){var e;let{layoutId:t}=this.options;return t?null==(e=this.getStack())?void 0:e.prevLead:void 0}getStack(){let{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this.getStack();i&&i.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){let e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){let{visualElement:e}=this.options;if(!e)return;let t=!1,{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;let i={};n.z&&cP("z",e,i,this.animationValues);for(let t=0;t<c_.length;t++)cP("rotate".concat(c_[t]),e,i,this.animationValues),cP("skew".concat(c_[t]),e,i,this.animationValues);for(let t in e.render(),i)e.setStaticValue(t,i[t]),this.animationValues&&(this.animationValues[t]=i[t]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible){e.visibility="hidden";return}let n=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=s1(null==t?void 0:t.pointerEvents)||"",e.transform=n?n(this.latestValues,""):"none";return}let i=this.getLead();if(!this.projectionDelta||!this.layout||!i.target){this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=s1(null==t?void 0:t.pointerEvents)||""),this.hasProjected&&!oW(this.latestValues)&&(e.transform=n?n({},""):"none",this.hasProjected=!1);return}e.visibility="";let r=i.animationValues||i.latestValues;this.applyTransformsToTarget();let o=function(e,t,n){let i="",r=e.x.translate/t.x,o=e.y.translate/t.y,a=(null==n?void 0:n.z)||0;if((r||o||a)&&(i="translate3d(".concat(r,"px, ").concat(o,"px, ").concat(a,"px) ")),(1!==t.x||1!==t.y)&&(i+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){let{transformPerspective:e,rotate:t,rotateX:r,rotateY:o,skewX:a,skewY:s}=n;e&&(i="perspective(".concat(e,"px) ").concat(i)),t&&(i+="rotate(".concat(t,"deg) ")),r&&(i+="rotateX(".concat(r,"deg) ")),o&&(i+="rotateY(".concat(o,"deg) ")),a&&(i+="skewX(".concat(a,"deg) ")),s&&(i+="skewY(".concat(s,"deg) "))}let s=e.x.scale*t.x,l=e.y.scale*t.y;return(1!==s||1!==l)&&(i+="scale(".concat(s,", ").concat(l,")")),i||"none"}(this.projectionDeltaWithTransform,this.treeScale,r);n&&(o=n(r,o)),e.transform=o;let{x:a,y:s}=this.projectionDelta;if(e.transformOrigin="".concat(100*a.origin,"% ").concat(100*s.origin,"% 0"),i.animationValues){var l,u;e.opacity=i===this?null!=(u=null!=(l=r.opacity)?l:this.latestValues.opacity)?u:1:this.preserveOpacity?this.latestValues.opacity:r.opacityExit}else e.opacity=i===this?void 0!==r.opacity?r.opacity:"":void 0!==r.opacityExit?r.opacityExit:0;for(let t in sR){if(void 0===r[t])continue;let{correct:n,applyTo:a,isCSSVariable:s}=sR[t],l="none"===o?r[t]:n(r[t],i);if(a){let t=a.length;for(let n=0;n<t;n++)e[a[n]]=l}else s?this.options.visualElement.renderState.vars[t]=l:e[t]=l}this.options.layoutId&&(e.pointerEvents=i===this?s1(null==t?void 0:t.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null==(t=e.currentAnimation)?void 0:t.stop()}),this.root.nodes.forEach(cD),this.root.sharedNodes.clear()}constructor(e={},t=null==n?void 0:n()){this.id=cM++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ag.value&&(cE.nodes=cE.calculatedTargetDeltas=cE.calculatedProjections=0),this.nodes.forEach(ck),this.nodes.forEach(cV),this.nodes.forEach(cI),this.nodes.forEach(cN),ag.addProjectionMetrics&&ag.addProjectionMetrics(cE)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new u8)}}}function cC(e){e.updateLayout()}function cT(e){var t;let n=(null==(t=e.resumeFrom)?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){let{layoutBox:t,measuredBox:i}=e.layout,{animationType:r}=e.options,o=n.source!==e.layout.source;"size"===r?uL(e=>{let i=o?n.measuredBox[e]:n.layoutBox[e],r=uk(i);i.min=t[e].min,i.max=i.min+r}):cq(r,n.layoutBox,t)&&uL(i=>{let r=o?n.measuredBox[i]:n.layoutBox[i],a=uk(t[i]);r.max=r.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[i].max=e.relativeTarget[i].min+a)});let a=sc();uR(a,t,n.layoutBox);let s=sc();o?uR(s,e.applyTransform(i,!0),n.measuredBox):uR(s,t,n.layoutBox);let l=!cg(a),u=!1;if(!e.resumeFrom){let i=e.getClosestProjectingParent();if(i&&!i.resumeFrom){let{snapshot:r,layout:o}=i;if(r&&o){let a=sh();uO(a,n.layoutBox,r.layoutBox);let s=sh();uO(s,t,o.layoutBox),cx(a,s)||(u=!0),i.options.layoutRoot&&(e.relativeTarget=s,e.relativeTargetOrigin=a,e.relativeParent=i)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:s,layoutDelta:a,hasLayoutChanged:l,hasRelativeLayoutChanged:u})}else if(e.isLead()){let{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function ck(e){ag.value&&cE.nodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function cN(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function cR(e){e.clearSnapshot()}function cD(e){e.clearMeasurements()}function cj(e){e.isLayoutDirty=!1}function cO(e){let{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function cL(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function cV(e){e.resolveTargetDelta()}function cI(e){e.calcProjection()}function cB(e){e.resetSkewAndRotation()}function cF(e){e.removeLeadSnapshot()}function cz(e,t,n){e.translate=oU(t.translate,0,n),e.scale=oU(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function cU(e,t,n,i){e.min=oU(t.min,n.min,i),e.max=oU(t.max,n.max,i)}function cH(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}let cK={duration:.45,ease:[.4,0,.1,1]},cW=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),cX=cW("applewebkit/")&&!cW("chrome/")?Math.round:af;function cY(e){e.min=cX(e.min),e.max=cX(e.max)}function cq(e,t,n){return"position"===e||"preserve-aspect"===e&&!(.2>=Math.abs(cb(t)-cb(n)))}function cZ(e){var t;return e!==e.root&&(null==(t=e.scroll)?void 0:t.wasRoot)}let cG=cA({attachResizeListener:(e,t)=>uP(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),c$={current:void 0},cQ=cA({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!c$.current){let e=new cG({});e.mount(window),e.setOptions({layoutScroll:!0}),c$.current=e}return c$.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>"fixed"===window.getComputedStyle(e).position});function cJ(e,t){let n=function(e,t,n){if(e instanceof EventTarget)return[e];if("string"==typeof e){let t=document.querySelectorAll(e);return t?Array.from(t):[]}return Array.from(e)}(e),i=new AbortController;return[n,{passive:!0,...t,signal:i.signal},()=>i.abort()]}function c0(e){return!("touch"===e.pointerType||uM.x||uM.y)}function c1(e,t,n){let{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover","Start"===n);let r=i["onHover"+n];r&&ay.postRender(()=>r(t,uC(t)))}let c2=(e,t)=>!!t&&(e===t||c2(e,t.parentElement)),c5=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]),c3=new WeakSet;function c4(e){return t=>{"Enter"===t.key&&e(t)}}function c6(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function c9(e){return uA(e)&&!(uM.x||uM.y)}function c8(e,t,n){let{props:i}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap","Start"===n);let r=i["onTap"+("End"===n?"":n)];r&&ay.postRender(()=>r(t,uC(t)))}let c7=new WeakMap,de=new WeakMap,dt=e=>{let t=c7.get(e.target);t&&t(e)},dn=e=>{e.forEach(dt)},di={some:0,all:1},dr=function(e,t){if("undefined"==typeof Proxy)return s7;let n=new Map,i=(n,i)=>s7(n,i,e,t);return new Proxy((e,t)=>i(e,t),{get:(r,o)=>"create"===o?i:(n.has(o)||n.set(o,s7(o,void 0,e,t)),n.get(o))})}({animation:{Feature:class extends uE{updateAnimationControlsSubscription(){let{animate:e}=this.node.getProps();sg(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null==(e=this.unmountControls)||e.call(this)}constructor(e){super(e),e.animationState||(e.animationState=function(e){let t=t=>Promise.all(t.map(t=>{let{animation:n,options:i}=t;return function(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t))n=Promise.all(t.map(t=>ug(e,t,i)));else if("string"==typeof t)n=ug(e,t,i);else{let r="function"==typeof t?le(e,t,i.custom):t;n=Promise.all(up(e,r,i))}return n.then(()=>{e.notify("AnimationComplete",t)})}(e,n,i)})),n=uS(),i=!0,r=t=>(n,i)=>{var r;let o=le(e,i,"exit"===t?null==(r=e.presenceContext)?void 0:r.custom:void 0);if(o){let{transition:e,transitionEnd:t,...i}=o;n={...n,...i,...t}}return n};function o(o){let{props:a}=e,s=function e(t){if(!t)return;if(!t.isControllingVariants){let n=t.parent&&e(t.parent)||{};return void 0!==t.props.initial&&(n.initial=t.props.initial),n}let n={};for(let e=0;e<uy;e++){let i=sx[e],r=t.props[i];(sv(r)||!1===r)&&(n[i]=r)}return n}(e.parent)||{},l=[],u=new Set,c={},d=1/0;for(let t=0;t<ub;t++){var h,f;let p=ux[t],m=n[p],g=void 0!==a[p]?a[p]:s[p],v=sv(g),y=p===o?m.isActive:null;!1===y&&(d=t);let x=g===s[p]&&g!==a[p]&&v;if(x&&i&&e.manuallyAnimateOnMount&&(x=!1),m.protectedKeys={...c},!m.isActive&&null===y||!g&&!m.prevProp||sg(g)||"boolean"==typeof g)continue;let b=(h=m.prevProp,"string"==typeof(f=g)?f!==h:!!Array.isArray(f)&&!uv(f,h)),w=b||p===o&&m.isActive&&!x&&v||t>d&&v,S=!1,E=Array.isArray(g)?g:[g],_=E.reduce(r(p),{});!1===y&&(_={});let{prevResolvedValues:M={}}=m,P={...M,..._},A=t=>{w=!0,u.has(t)&&(S=!0,u.delete(t)),m.needsAnimating[t]=!0;let n=e.getValue(t);n&&(n.liveStyle=!1)};for(let e in P){let t=_[e],n=M[e];if(!c.hasOwnProperty(e))(ln(t)&&ln(n)?uv(t,n):t===n)?void 0!==t&&u.has(e)?A(e):m.protectedKeys[e]=!0:null!=t?A(e):u.add(e)}m.prevProp=g,m.prevResolvedValues=_,m.isActive&&(c={...c,..._}),i&&e.blockInitialAnimation&&(w=!1);let C=x&&b,T=!C||S;w&&T&&l.push(...E.map(t=>{let n={type:p};if("string"==typeof t&&i&&!C&&e.manuallyAnimateOnMount&&e.parent){let{parent:i}=e,r=le(i,t);if(i.enteringChildren&&r){let{delayChildren:t}=r.transition||{};n.delay=um(i.enteringChildren,e,t)}}return{animation:t,options:n}}))}if(u.size){let t={};if("boolean"!=typeof a.initial){let n=le(e,Array.isArray(a.initial)?a.initial[0]:a.initial);n&&n.transition&&(t.transition=n.transition)}u.forEach(n=>{let i=e.getBaseTarget(n),r=e.getValue(n);r&&(r.liveStyle=!0),t[n]=null!=i?i:null}),l.push({animation:t})}let p=!!l.length;return i&&(!1===a.initial||a.initial===a.animate)&&!e.manuallyAnimateOnMount&&(p=!1),i=!1,p?t(l):Promise.resolve()}return{animateChanges:o,setActive:function(t,i){var r;if(n[t].isActive===i)return Promise.resolve();null==(r=e.variantChildren)||r.forEach(e=>{var n;return null==(n=e.animationState)?void 0:n.setActive(t,i)}),n[t].isActive=i;let a=o(t);for(let e in n)n[e].protectedKeys={};return a},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=uS(),i=!0}}}(e))}}},exit:{Feature:class extends uE{update(){if(!this.node.presenceContext)return;let{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;let i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){let{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}constructor(){super(...arguments),this.id=u_++}}},inView:{Feature:class extends uE{startObserver(){this.unmount();let{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:i="some",once:r}=e,o={root:t?t.current:void 0,rootMargin:n,threshold:"number"==typeof i?i:di[i]},a=e=>{let{isIntersecting:t}=e;if(this.isInView===t||(this.isInView=t,r&&!t&&this.hasEnteredView))return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);let{onViewportEnter:n,onViewportLeave:i}=this.node.getProps(),o=t?n:i;o&&o(e)};var s=this.node.current;let l=function(e){let{root:t,...n}=e,i=t||document;de.has(i)||de.set(i,{});let r=de.get(i),o=JSON.stringify(n);return r[o]||(r[o]=new IntersectionObserver(dn,{root:t,...n})),r[o]}(o);return c7.set(s,a),l.observe(s),()=>{c7.delete(s),l.unobserve(s)}}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;let{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t))&&this.startObserver()}unmount(){}constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}}},tap:{Feature:class extends uE{mount(){let{current:e}=this.node;e&&(this.unmount=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},[i,r,o]=cJ(e,n),a=e=>{let i=e.currentTarget;if(!c9(e))return;c3.add(i);let o=t(i,e),a=(e,t)=>{window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",l),c3.has(i)&&c3.delete(i),c9(e)&&"function"==typeof o&&o(e,{success:t})},s=e=>{a(e,i===window||i===document||n.useGlobalTarget||c2(i,e.target))},l=e=>{a(e,!1)};window.addEventListener("pointerup",s,r),window.addEventListener("pointercancel",l,r)};return i.forEach(e=>{((n.useGlobalTarget?window:e).addEventListener("pointerdown",a,r),of(e))&&(e.addEventListener("focus",e=>((e,t)=>{let n=e.currentTarget;if(!n)return;let i=c4(()=>{if(c3.has(n))return;c6(n,"down");let e=c4(()=>{c6(n,"up")});n.addEventListener("keyup",e,t),n.addEventListener("blur",()=>c6(n,"cancel"),t)});n.addEventListener("keydown",i,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),t)})(e,r)),c5.has(e.tagName)||-1!==e.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))}),o}(e,(e,t)=>(c8(this.node,t,"Start"),(e,t)=>{let{success:n}=t;return c8(this.node,e,n?"End":"Cancel")}),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends uE{onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=la(uP(this.node.current,"focus",()=>this.onFocus()),uP(this.node.current,"blur",()=>this.onBlur()))}unmount(){}constructor(){super(...arguments),this.isActive=!1}}},hover:{Feature:class extends uE{mount(){let{current:e}=this.node;e&&(this.unmount=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},[i,r,o]=cJ(e,n),a=e=>{if(!c0(e))return;let{target:n}=e,i=t(n,e);if("function"!=typeof i||!n)return;let o=e=>{c0(e)&&(i(e),n.removeEventListener("pointerleave",o))};n.addEventListener("pointerleave",o,r)};return i.forEach(e=>{e.addEventListener("pointerenter",a,r)}),o}(e,(e,t)=>(c1(this.node,t,"Start"),e=>c1(this.node,e,"End"))))}unmount(){}}},pan:{Feature:class extends uE{onPointerDown(e){this.session=new uB(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:uV(this.node)})}createPanHandlers(){let{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:u$(e),onStart:u$(t),onMove:n,onEnd:(e,t)=>{delete this.session,i&&ay.postRender(()=>i(e,t))}}}mount(){this.removePointerDownListener=uT(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}constructor(){super(...arguments),this.removePointerDownListener=af}}},drag:{Feature:class extends uE{mount(){let{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||af}unmount(){this.removeGroupControls(),this.removeListeners()}constructor(e){super(e),this.removeGroupControls=af,this.removeListeners=af,this.controls=new uZ(e)}},ProjectionNode:cQ,MeasureLayout:u3},layout:{ProjectionNode:cQ,MeasureLayout:u3}},(e,t)=>sW(e)?new sH(t):new sO(t,{allowProjection:e!==d.Fragment}));var da=e.i(13993);function ds(e,t,n){return Math.max(t,Math.min(n,e))}let dl=new Date().getFullYear();function du(e){return!0===e?"Male":!1===e?"Female":"—"}function dc(e){var t,n,i,r,o,a,s,l,u,h,f,p;let{open:m,data:g,onClose:v,onSelectPerson:y}=e,x=(0,d.useRef)(null),[b,w]=(0,d.useState)({x:16,y:16}),S=(0,d.useRef)(null),E=(0,d.useCallback)(e=>{let t=S.current,n=x.current;if(!t||!n)return;let i=e.clientX-t.mx,r=e.clientY-t.my,o=window.innerWidth,a=window.innerHeight,s=n.getBoundingClientRect(),l=s.width,u=s.height;w({x:ds(t.x+i,6,Math.max(6,o-l-6)),y:ds(t.y+r,6,Math.max(6,a-u-6))})},[]),_=(0,d.useCallback)(()=>{S.current=null,window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",_)},[E]),M=(0,d.useCallback)(e=>{var t;if(!(null==(t=e.target)?void 0:t.closest('[data-drag-handle="true"]')))return;let n=x.current;if(!n)return;let i=n.getBoundingClientRect();S.current={x:i.left,y:i.top,mx:e.clientX,my:e.clientY},window.addEventListener("mousemove",E),window.addEventListener("mouseup",_)},[E,_]);(0,d.useEffect)(()=>()=>{window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",_)},[E,_]),(0,d.useEffect)(()=>{function e(e){"Escape"===e.key&&v()}return m&&window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[m,v]);let P=g.person,A=(0,d.useMemo)(()=>(function(e){var t,n;if(!e)return null;let i=null!=(t=e.birth_year)?t:null,r=null!=(n=e.death_year)?n:null;if(!i&&!r||!i)return null;let o=(null!=r?r:dl)-i;return o>=0?o:null})(P),[P]),C=(0,d.useMemo)(()=>{var e,t;let n=null!=(e=P.birth_year)?e:null,i=null!=(t=P.death_year)?t:null;return n&&i?"".concat(n," – ").concat(i):n&&!i?"".concat(n):!n&&i?"– ".concat(i):null},[P]),T=!!(g.father||g.mother),k=(null!=(i=null==(t=g.spouses)?void 0:t.length)?i:0)>0,N=(null!=(r=null==(n=g.children)?void 0:n.length)?r:0)>0;return(0,c.jsx)(oE,{children:m&&g&&(0,c.jsxs)(dr.aside,{ref:x,className:da.default.panel,style:{left:b.x,top:b.y},initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{type:"tween",duration:.2},onMouseDown:M,role:"dialog","aria-modal":"true",children:[(0,c.jsxs)("div",{className:da.default.header,dir:"auto","data-drag-handle":"true",children:[(0,c.jsxs)("div",{className:da.default.titleBlock,children:[(0,c.jsxs)("strong",{className:da.default.title,children:[null!=(o=P.firstname)?o:"—"," ",null!=(a=P.lastname)?a:""]}),(0,c.jsxs)("div",{className:da.default.subTitle,children:[(0,c.jsx)("span",{className:da.default.badge,children:du(P.is_male)}),(0,c.jsx)("span",{className:da.default.dot}),(0,c.jsx)("span",{className:da.default.badge,children:!0===P.is_alive?"Alive":!1===P.is_alive?"Deceased":"Unknown"}),null!=A&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:da.default.dot}),(0,c.jsxs)("span",{className:da.default.badge,children:[A," yrs"]})]})]})]}),(0,c.jsx)("button",{className:da.default.close,onClick:v,"aria-label":"Close",children:(0,c.jsx)(r7,{})})]}),(0,c.jsxs)("div",{className:da.default.content,dir:"auto",children:[(0,c.jsxs)("section",{className:da.default.section,children:[(0,c.jsxs)("div",{className:da.default.kv,children:[(0,c.jsx)("div",{className:da.default.label,children:"Years"}),(0,c.jsx)("div",{className:da.default.value,children:null!=C?C:"—"})]}),(0,c.jsxs)("div",{className:da.default.kv,children:[(0,c.jsx)("div",{className:da.default.label,children:"Birth place"}),(0,c.jsxs)("div",{className:da.default.value,children:[P.birth_place||"—",P.birth_country?", ".concat(P.birth_country):""]})]})]}),T&&(0,c.jsxs)("section",{className:da.default.section,children:[(0,c.jsx)("div",{className:da.default.sectionHeader,children:(0,c.jsx)("span",{className:da.default.sectionTitle,children:"Parents"})}),(0,c.jsxs)("div",{className:da.default.chips,children:[g.father&&(0,c.jsxs)("button",{className:da.default.chip,onClick:()=>null==y?void 0:y(g.father),children:[(0,c.jsx)("span",{className:da.default.chipAvatar,children:(null!=(s=g.father.firstname)?s:"?")[0]}),(0,c.jsxs)("span",{className:da.default.chipText,children:[null!=(l=g.father.firstname)?l:"—"," ",null!=(u=g.father.lastname)?u:""]}),(0,c.jsx)("span",{className:da.default.chipMeta,children:"Father"})]}),g.mother&&(0,c.jsxs)("button",{className:da.default.chip,onClick:()=>null==y?void 0:y(g.mother),children:[(0,c.jsx)("span",{className:da.default.chipAvatar,children:(null!=(h=g.mother.firstname)?h:"?")[0]}),(0,c.jsxs)("span",{className:da.default.chipText,children:[null!=(f=g.mother.firstname)?f:"—"," ",null!=(p=g.mother.lastname)?p:""]}),(0,c.jsx)("span",{className:da.default.chipMeta,children:"Mother"})]})]})]}),k&&(0,c.jsxs)("section",{className:da.default.section,children:[(0,c.jsxs)("div",{className:da.default.sectionHeader,children:[(0,c.jsxs)("span",{className:da.default.sectionTitle,children:["Spouse",g.spouses.length>1?"s":""]}),(0,c.jsx)("span",{className:da.default.count,children:g.spouses.length})]}),(0,c.jsx)("div",{className:da.default.chips,children:g.spouses.map(e=>{var t,n,i;return(0,c.jsxs)("button",{className:da.default.chip,onClick:()=>null==y?void 0:y(e),children:[(0,c.jsx)("span",{className:da.default.chipAvatar,children:(null!=(t=e.firstname)?t:"?")[0]}),(0,c.jsxs)("span",{className:da.default.chipText,children:[null!=(n=e.firstname)?n:"—"," ",null!=(i=e.lastname)?i:""]})]},e.id)})})]}),N&&(0,c.jsxs)("section",{className:da.default.section,children:[(0,c.jsxs)("div",{className:da.default.sectionHeader,children:[(0,c.jsx)("span",{className:da.default.sectionTitle,children:"Children"}),(0,c.jsx)("span",{className:da.default.count,children:g.children.length})]}),(0,c.jsx)("ul",{className:da.default.childList,children:g.children.map(e=>{var t,n,i;return(0,c.jsx)("li",{children:(0,c.jsxs)("button",{className:da.default.childRow,onClick:()=>null==y?void 0:y(e),children:[(0,c.jsx)("span",{className:da.default.childAvatar,children:(null!=(t=e.firstname)?t:"?")[0]}),(0,c.jsxs)("span",{className:da.default.childName,children:[null!=(n=e.firstname)?n:"—"," ",null!=(i=e.lastname)?i:""]}),(0,c.jsxs)("span",{className:da.default.childMeta,children:[du(e.is_male)," • ",!0===e.is_alive?"Alive":!1===e.is_alive?"Deceased":"Unknown"]})]})},e.id)})})]})]})]})})}function dd(e){let{className:t}=e;return(0,c.jsx)(ot.default,{className:t,href:"/auth/email",children:"Sign In"})}var dh=e.i(7471);function df(e){let{className:t,callbackURL:n}=e,i=(0,dh.createClient)(),r=(0,rq.useRouter)(),[o,a]=(0,d.useState)(!1);async function s(){try{a(!0),await i.auth.signOut(),localStorage.removeItem("supabase.auth.token"),r.replace(n),r.refresh()}finally{a(!1)}}return(0,c.jsx)("button",{className:t,onClick:s,disabled:o,children:"Log Out"})}let dp=(e,t)=>{let n=e.ancestorsIdOf(t),i=new Set(n),r=n.pop(),o=n.pop();for(;o&&r;)i.add((0,r$.EPCID)(r,o)),r=o,o=n.pop();return i};function dm(e){let{appGraph:t}=e,{requestFocus:n}=(0,rZ.useFocus)(),i=(0,rq.useSearchParams)(),{theme:r,toggle:o}=(0,oa.useTheme)(),a=(0,d.useRef)(null),[s,l]=(0,d.useState)(null),u=(0,d.useRef)(new Set),h=(0,d.useRef)(null);(0,d.useEffect)(()=>{let e=i.get("focus");if(e){n(e);let t=new URL(window.location.href);t.searchParams.delete("focus"),window.history.replaceState({},"",t.toString())}},[i,n]),(0,d.useEffect)(()=>{var e,n;s&&a.current&&(!function(e,t){var n,i;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=e.getNode(t);if(!a)return;let s=a.position.x+(null!=(n=a.width)?n:0)/2,l=a.position.y+(null!=(i=a.height)?i:0)/2;e.setCenter(s,l,{zoom:o,duration:r})}(a.current,s),h.current=null!=(n=null==(e=t.nodes.find(e=>e.id===s))?void 0:e.data.data)?n:null)},[s,t.nodes]);let f=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(let t of e){let e=document.getElementById(t);e&&e.classList.add(...n)}},p=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(let t of e){let e=document.getElementById(t);e&&e.classList.remove(...n)}},m=(0,d.useCallback)(e=>{f(dp(t.graph,e).difference(u.current),"is-highlighted")},[t.graph]),g=(0,d.useCallback)(e=>{p(dp(t.graph,e).difference(u.current),"is-highlighted")},[t.graph]);return(0,c.jsxs)("div",{className:"canvas",children:[(0,c.jsxs)("div",{className:"canvas-toolbar",children:[(0,c.jsx)(or,{limit:30,placeholder:"Search name..."}),(0,c.jsx)("button",{className:"canvas-button",onClick:()=>{var e;return null==(e=a.current)?void 0:e.fitView({padding:.2,duration:300})},children:"Fit"}),(0,c.jsx)("button",{className:"canvas-button",onClick:o,"aria-label":"Toggle theme",title:"Toggle theme",children:"dark"===r?(0,c.jsx)(r8,{}):(0,c.jsx)(r6,{})}),null===t.role?(0,c.jsx)(dd,{className:"canvas-button"}):(0,c.jsx)(df,{callbackURL:"/canvas",className:"canvas-button"})]}),h.current&&(0,c.jsx)(dc,{open:!!s,data:h.current,onClose:()=>{s&&(p(dp(t.graph,s),"is-highlighted","is-selected"),l(null))}}),(0,c.jsx)(rB,{edgesFocusable:!1,edgesUpdatable:!1,elementsSelectable:!0,nodes:t.nodes,edges:t.edges,nodeTypes:rG,edgeTypes:oo,onInit:e=>{a.current=e,requestAnimationFrame(()=>{try{e.fitView({padding:.2,duration:300})}catch(e){}})},fitView:!0,proOptions:{hideAttribution:!0},minZoom:.1,maxZoom:6,onNodeMouseEnter:(e,n)=>{t.graph.has(n.id)&&m(n.id)},onNodeMouseLeave:(e,n)=>{t.graph.has(n.id)&&g(n.id)},onNodeClick:(e,n)=>{s&&p(dp(t.graph,s),"is-highlighted","is-selected"),t.graph.has(n.id)?(f(dp(t.graph,n.id),"is-highlighted","is-selected"),l(n.id)):l(null)},onPaneClick:()=>{s&&(p(dp(t.graph,s),"is-highlighted","is-selected"),l(null))},children:(0,c.jsx)(rY,{})})]})}function dg(){let{appGraph:e,loading:t,error:n,refresh:i}=(0,oe.useAppGraph)();return t?(0,c.jsx)("div",{className:"canvas-state",children:"Loading family map..."}):n||!e?(0,c.jsxs)("div",{className:"canvas-state",children:["Failed to load family graph.",(0,c.jsx)("button",{className:"button",onClick:i,children:"Retry"})]}):(0,c.jsx)(dm,{appGraph:e})}}]);