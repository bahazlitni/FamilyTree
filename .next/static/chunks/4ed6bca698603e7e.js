(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6085,e=>{"use strict";e.s(["Headers",()=>r,"Request",()=>i,"Response",()=>n,"default",()=>s,"fetch",()=>a]);var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:e.g;let a=t.fetch,s=t.fetch.bind(t),r=t.Headers,i=t.Request,n=t.Response},53795,e=>{"use strict";e.s(["default",()=>r]);var t=e.i(43476),a=e.i(71645),s=e.i(7471);function r(){let e=(0,s.createClient)(),[r,i]=(0,a.useState)("Processingâ€¦"),[n,o]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async()=>{let t=new URL(window.location.href),{data:a}=await e.auth.getSession();if(a.session)i("Session already active.");else{let{access_token:a,refresh_token:s,error:r}=function(e){let t=new URLSearchParams(e.replace(/^#/,""));return{access_token:t.get("access_token"),refresh_token:t.get("refresh_token"),error:t.get("error_description")||t.get("error")}}(t.hash);if(r)i("Auth error: ".concat(r));else if(a&&s){let{error:t}=await e.auth.setSession({access_token:a,refresh_token:s});t?i("Auth error: ".concat(t.message)):i("Signed in via implicit flow.")}else if(t.searchParams.get("code")){let{error:a}=await e.auth.exchangeCodeForSession(t.toString());a?i("Auth exchange warning: ".concat(a.message)):i("Signed in via PKCE flow.")}else i("No auth params found.")}let{data:s}=await e.auth.getSession();if(s.session){let{data:t,error:a}=await e.rpc("app_role");a||o(null!=t?t:null),i(e=>e.startsWith("Auth error")?e:"Done.");let s="".concat(location.origin,"/auth/callback");window.history.replaceState({},"",s)}})()},[e]),(0,t.jsxs)("main",{style:{maxWidth:480,margin:"48px auto",display:"grid",gap:12},children:[(0,t.jsx)("h1",{children:"Callback"}),(0,t.jsx)("div",{children:r}),(0,t.jsxs)("div",{children:["Your role: ",(0,t.jsx)("b",{children:null!=n?n:"anon"})]}),(0,t.jsx)("a",{href:"/canvas",children:"Go home"})]})}},11737,e=>{e.v(e=>Promise.resolve().then(()=>e(6085)))}]);